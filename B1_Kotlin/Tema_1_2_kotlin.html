<!DOCTYPE html><html><head>
      <title>PMDM 2¬∫ DAM  Tema 1.2 - Lenguaje Kotlin II</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em!important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em!important;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em!important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px/2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      
    </head>
    <body for="html-export">
      <div class="crossnote markdown-preview  ">
      <style>/* 
A√±ade 

@import "../EstilosPersonalizadosMarkdownEnhanced.less"

justo despu√©s del front matter 
*/
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
</style>
<h1 class="crossnote-header" id="tema-1-parte-2---lenguaje-kotlin-ii">Tema 1 parte 2 - Lenguaje Kotlin II</h1>

<p>Descargar estos apuntes <a href="./Tema_1_2_kotlin.pdf">pdf</a> o <a href="./Tema_1_2_kotlin.html">html</a></p>
<h2 class="crossnote-header" id="%C3%ADndice">√çndice</h2>


<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#colecciones" class="md-toc-link"><p>Colecciones</p>
</a>
          </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#arrays" class="md-toc-link"><p>Arrays</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#array-bidimensional" class="md-toc-link">
            <p>Array Bidimensional</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#listas-mutables" class="md-toc-link">
            <p>Listas Mutables</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#mapas-mutables" class="md-toc-link">
            <p>Mapas Mutables</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#programaci√≥n-funcional" class="md-toc-link"><p>Programaci√≥n Funcional</p>
</a>
          </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#lambdas" class="md-toc-link"><p>Lambdas</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#definiendo-y-usando-funciones-de-orden-superior-hof" class="md-toc-link">
            <p>Definiendo y usando funciones de orden superior HOF</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#clausuras" class="md-toc-link">
            <p>Clausuras</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#map-filter-fold" class="md-toc-link"><p>Map-Filter-Fold</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#creando-objetos-an√≥nimos-de-consultas-sobre-objetos-complejos" class="md-toc-link">
            <p>Creando objetos an√≥nimos de consultas sobre objetos complejos</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#trasformaciones-de-datos-usando-map" class="md-toc-link">
            <p>Trasformaciones de datos usando map</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#haciendo-agrupaciones-con-groupby" class="md-toc-link">
            <p>Haciendo agrupaciones con groupBy</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#obteniendo-secuencias-anidadas-con-flatmap" class="md-toc-link">
            <p>Obteniendo secuencias anidadas con flatMap</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#ejemplo-de-consulta-de-datos-mapeados-a-objetos-en-kolin" class="md-toc-link">
            <p>Ejemplo de consulta de datos mapeados a objetos en Kolin</p>

          </a></div>
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 class="crossnote-header" id="colecciones">Colecciones</h2>

<ul>
<li><a href="https://kotlinlang.org/docs/collections-overview.html">Colecciones en Kotlin</a></li>
</ul>
<p>Ya las hemos usado en algunos de los diferentes ejemplos que hemos estado viendo en el tema. Sin embargo, en Kotlin hay diferentes formas de generar <strong>secuencias de objetos</strong>: <strong>arrays</strong>, <strong>listas inmutables</strong>, <strong>listas mutables</strong>, etc.</p>
<blockquote>
<p>üì£ <strong>Resumen</strong>:Tabla resumen de las m√°s comunes y c√≥mo inicializarlas por extensi√≥n</p>
</blockquote>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Descripci√≥n</th>
<th>Literales</th>
<th>Mutabilidad</th>
<th>Modificar tama√±o</th>
</tr>
</thead>
<tbody>
<tr>
<td>arrayOf</td>
<td>Array de objectes tradicional</td>
<td>Llista immutable</td>
<td>s√≠</td>
<td>no</td>
</tr>
<tr>
<td>listOf</td>
<td>Llista immutable</td>
<td>listOf(1, 2)</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>arrayListOf</td>
<td>Llista mutable</td>
<td>arrayListOf(1, 2)</td>
<td>s√≠</td>
<td>s√≠</td>
</tr>
<tr>
<td>mapOf</td>
<td>HashMap immutable</td>
<td>mapOf(1 to "A", 2 to "B")</td>
<td>no</td>
<td>no</td>
</tr>
<tr>
<td>mutableMapOf</td>
<td>HashMap mutable</td>
<td>...</td>
<td>s√≠</td>
<td>s√≠</td>
</tr>
</tbody>
</table>
<blockquote>
<p>üìå <strong>Nota</strong>: Debemos llevar cuidado, hay que distinguir la inmutabilidad de la colecci√≥n de la inmutabilidad de la variable que la contiene.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h3 class="crossnote-header" id="arrays">Arrays</h3>

<p>Los <a href="https://kotlinlang.org/docs/basic-types.html#arrays">arrays</a> son mutable, es decir pueden cambiar el valor de sus elementos durante la ejecuci√≥n, pero como ya conocemos por otro lenguajes, su tama√±o no se puede cambiar una vez est√© definido, existiendo otro tipo de colecciones para este uso.</p>
<blockquote>
<p>‚úã <strong>Importante</strong>: En Kotlin las declaraciones y acceso a las posiciones del array no suelen realizarse mediante corchetes, como en otros lenguajes, sino que se utilizan los m√©todos de la clase Array.</p>
</blockquote>
<p>En el siguiente ejemplo podemos ver diferentes formas de recorrer el array...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> weekDays <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"primavera"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"verano"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"oto√±o"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"invierno"</span></span><span class="token punctuation">)</span>

    <span class="token comment">// Similar al foreach de C#</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>dato <span class="token keyword keyword-in">in</span> weekDays<span class="token punctuation">)</span> <span class="token function">println</span><span class="token punctuation">(</span>dato<span class="token punctuation">)</span>

    <span class="token comment">// Recorrido con iterador</span>
    <span class="token keyword keyword-val">val</span> it <span class="token operator">=</span> weekDays<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Foreach con HOF</span>
    weekDays<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>

    <span class="token comment">// Acceso mediante √≠ndice</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token keyword keyword-in">in</span> weekDays<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token function">println</span><span class="token punctuation">(</span>weekDays<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">// Acceso mediante √≠ndice con until</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token keyword keyword-in">in</span> <span class="token number">0</span> until weekDays<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token function">println</span><span class="token punctuation">(</span>weekDays<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">// Volcando ambos datos en una tupla</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>posicion<span class="token punctuation">,</span> valor<span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> weekDays<span class="token punctuation">.</span><span class="token function">withIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"La posici√≥n </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">posicion</span></span><span class="token string"> contiene el valor </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">valor</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Adem√°s Kotlin distingue los arrays de primitivas usando clases propias: <strong><code>BooleanArray, ByteArray, CharArray, ShortArray, IntArray, FloatArray, DoubleArray</code></strong>, y la forma de construir literales es mediante: <strong><code>booleanArrayOf, byteArrayOf, charArrayOf, shortArrayOf, intArrayOf, floatArrayOf, doubleArrayOf</code></strong>.</p>
<div style="page-break-after:always;"></div>
<p>En el siguiente ejemplo se ha creado un array de float de tama√±o 4, el acceso est√° realizado mediante <strong><code>[]</code></strong> adem√°s la √∫ltima l√≠nea produce excepci√≥n al intentar realizar un acceso no permitido.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> arrayFloat <span class="token operator">=</span> <span class="token function">FloatArray</span><span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
    arrayFloat<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2.5f</span><span class="token punctuation">;</span>
    arrayFloat<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>arrayFloat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    arrayFloat<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8.9f</span> <span class="token comment">// Excepci√≥n por acceso fuera l√≠mites</span>
<span class="token punctuation">}</span>
</pre><p>Si queremos crear un array de un tipo de objeto determinado, vamos a suponer un tipo <strong><code>Persona</code></strong> con el siguiente c√≥digo:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword keyword-val">val</span> edad<span class="token operator">:</span> Int<span class="token punctuation">)</span>
</pre><p>El array de personas lo podremos inicializar en el momento de creaci√≥n del array, de la siguiente manera (en este caso solo tendr√° un elemento):</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> personas <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token function">Persona</span><span class="token punctuation">(</span> nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>personas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Otra opci√≥n es permitir que el array pueda tener valores nulos, para a√±adir posteriormente los elementos. En este caso tendremos que utilizar el operador de llamadas seguras <strong><code>?.</code></strong>, que solo llamar√° al m√©todo en el caso que el valor no sea nulo, evitando <strong><code>NullPointerException</code></strong>.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> personas <span class="token operator">=</span> arrayOfNulls<span class="token operator">&lt;</span>Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span>size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
    personas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Persona</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>personas<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?:</span> <span class="token string-literal singleline"><span class="token string">"No hay datos"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="array-bidimensional">Array Bidimensional</h4>

<p>En kotlin los arrays de m√°s de una dimensi√≥n se tratan como arrays de arrays (similar a las tablas dentadas de C#). Por lo que se pueden crear filas de distintos tama√±os. El siguiente c√≥digo crea una matriz de enteros de 4 x 4 inicializada a valor 0 y en el elemento segunda fila y segunda columna a valor 3.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> matriz <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    matriz<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>e <span class="token keyword keyword-in">in</span> matriz<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token keyword keyword-in">in</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"%3d"</span></span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Si no queremos inicializar cada una de las filas cuando creamos el array, se puede hacer posteriormente si se  crear la matriz anulable. En este ejemplo creamos una matriz de tres filas, cada una de ellas con tama√±o de columnas distinto (2, 3 y 4 respectivamente) e inicializamos toda la matriz a valor 3.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> dentada <span class="token operator">=</span> arrayOfNulls<span class="token operator">&lt;</span>IntArray<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    dentada<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    dentada<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    dentada<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">IntArray</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token keyword keyword-in">in</span> dentada<span class="token punctuation">.</span>indices<span class="token punctuation">)</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>j <span class="token keyword keyword-in">in</span> <span class="token number">0</span> until dentada<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!!</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span>
            dentada<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!!</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="listas-mutables">Listas Mutables</h4>

<ul>
<li><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/">Listas mutables</a></li>
</ul>
<p>Las <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/">listas mutables</a> est√°n representadas por la clase <strong><code>ArrayList</code></strong> que implementa la interface MutableList y en el fondo es equivalente al tipo ArryList de Java.</p>
<p>Dispondremos de m√©todos similares a otros lenguajes  <strong><code>remove</code></strong>, <strong><code>removeAt</code></strong>, <strong><code>indexOf</code></strong>, <strong><code>clear</code></strong>. As√≠ como la posibilidad de obtener un <strong>iterador</strong> para iterar entre los elementos de la secuencia.</p>
<p><strong>Formas de rellenar</strong> un lista mutable ...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Definiendola por extensi√≥n</span>
    <span class="token keyword keyword-val">val</span> personas1 <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span>
        <span class="token function">Persona</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Persona</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Pedro"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token comment">// Equivalente a Java </span>
    <span class="token keyword keyword-val">val</span> personas2 <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    personas2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    personas2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Pedro"</span></span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// Usando apply me permite aplicar las operaciones entre llaves al</span>
    <span class="token comment">// objeto que acabo de crear. Es una forma de no repetir personas.</span>
    <span class="token keyword keyword-val">val</span> personas3 <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Pedro"</span></span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>Formas de recorrer</strong> un lista mutable ...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token comment">// Foreach tradicional</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>p <span class="token keyword keyword-in">in</span> personas1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Foreach funcional</span>
personas2<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> p <span class="token operator">-&gt;</span> <span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token comment">// Usando un indizador</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>i <span class="token keyword keyword-in">in</span> personas3<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>personas3<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Obtengo un iterador con sus operaciones t√≠picas.</span>
<span class="token keyword keyword-val">val</span> it <span class="token operator">=</span> personas3<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h3 class="crossnote-header" id="mapas-mutables">Mapas Mutables</h3>

<p>Tambi√©n tendremos mapas <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/">MutableMap</a>  y mapas inmutables <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/">Map</a> en kotlin. El funcionamiento es similar, por lo que vamos a ver los ejemplos de los mapas mutables.</p>
<p>Tendremos diferentes formas de a√±adir pares clave-valor como sucede en otros lenguajes pero, la clase <strong>Pair</strong>, de la que hablamos en las funciones y que representa una <strong>tupla con dos valores</strong>, nos permitir√° crear pares de valores que ayudar√°n a a√±adir elementos a una mapa o recorrerlo. Adem√°s, podemos usar el operador <strong><code>+=</code></strong> para agregar elementos.</p>
<p><strong>Formas de rellenar</strong> un mapa mutable ...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Defini√©ndolo por extensi√≥n con el operador to</span>
    <span class="token keyword keyword-val">val</span> personas1 <span class="token operator">=</span> <span class="token function">mutableMapOf</span><span class="token punctuation">(</span>
        <span class="token string-literal singleline"><span class="token string">"21456874L"</span></span> <span class="token keyword keyword-to">to</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-literal singleline"><span class="token string">"13232345K"</span></span> <span class="token keyword keyword-to">to</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Luis"</span></span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// Tradicional con √≠ndices</span>
    <span class="token keyword keyword-val">val</span> personas2 <span class="token operator">=</span> mutableMapOf<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    personas2<span class="token punctuation">[</span><span class="token string-literal singleline"><span class="token string">"21456874L"</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
    personas2<span class="token punctuation">[</span><span class="token string-literal singleline"><span class="token string">"13232345K"</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Luis"</span></span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span>

    <span class="token comment">// Con put como en Java usando tuplas y apply</span>
    <span class="token keyword keyword-val">val</span> personas3 <span class="token operator">=</span> mutableMapOf<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        <span class="token function">put</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"21456874L"</span></span><span class="token punctuation">,</span> <span class="token function">Persona</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">put</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"13232345K"</span></span><span class="token punctuation">,</span> <span class="token function">Persona</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Luis"</span></span><span class="token punctuation">,</span> edad <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Con el operador +=</span>
    <span class="token keyword keyword-val">val</span> personas4 <span class="token operator">=</span> mutableMapOf<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Persona<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    personas3 <span class="token operator">+=</span> <span class="token function">Pair</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"21456874L"</span></span><span class="token punctuation">,</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Ana"</span></span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    personas3 <span class="token operator">+=</span> <span class="token function">Pair</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"13232345K"</span></span><span class="token punctuation">,</span> <span class="token function">Persona</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Luis"</span></span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<p><strong>Formas de recorrer</strong> un mapa mutable ...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Usando las claves y un indizador.</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>dni <span class="token keyword keyword-in">in</span> personas1<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">dni</span></span><span class="token string"> -&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">personas1<span class="token punctuation">[</span>dni<span class="token punctuation">]</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Usando tuplas clave - valor ...</span>
    <span class="token comment">// Con un foreach tradicional</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dni<span class="token punctuation">,</span> persona<span class="token punctuation">)</span> <span class="token keyword keyword-in">in</span> personas3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">dni</span></span><span class="token string"> -&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">persona</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Con un iterador con sus operaciones t√≠picas.</span>
    <span class="token keyword keyword-val">val</span> iterador <span class="token operator">=</span> personas3<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-while">while</span> <span class="token punctuation">(</span>iterador<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-val">val</span> <span class="token punctuation">(</span>dni<span class="token punctuation">,</span> persona<span class="token punctuation">)</span> <span class="token operator">=</span> iterador<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">dni</span></span><span class="token string"> -&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">persona</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Con un foreach funcional</span>
    personas3<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>dni<span class="token punctuation">,</span> persona<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">dni</span></span><span class="token string"> -&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">persona</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h2 class="crossnote-header" id="programaci%C3%B3n-funcional">Programaci√≥n Funcional</h2>

<p>Vamos a ver algunas de las peculiaridades de la programaci√≥n funcional en Kotlin a trav√©s de conceptos vistos en primer curso.</p>
<h3 class="crossnote-header" id="lambdas">Lambdas</h3>

<ul>
<li><a href="https://kotlinlang.org/docs/lambdas.html">Lambdas en Kotlin</a></li>
</ul>
<p>Son tipados como sucede en C# y se definen siempre entre llaves <strong><code>{ definici√≥n }</code></strong> an√°logamente a otros lenguajes con el operador <strong><code>-&gt;</code></strong> por ejemplo <strong><code>{ v:Int -&gt; v % 2 == 0 }</code></strong>.</p>
<blockquote>
<p>üìå <strong>Nota</strong>: Debemos poner el tipo del par√°metro si no va impl√≠cito.</p>
</blockquote>
<p>Si es un procedimiento que no tiene ning√∫n par√°metro de entrada no hace falta poner <strong><code>{ () -&gt; evaluaci√≥n }</code></strong> sino directamente <strong><code>{ evaluaci√≥n }</code></strong>. Por eso utilizamos las llaves.</p>
<blockquote>
<p>‚úã <strong>Importante</strong>: En ocasiones esta sintaxis entre llaves puede <strong>llevarnos a confusi√≥n</strong> porque <strong><code>{ evaluaci√≥n }</code></strong> puede confundirse con un <strong>bloque de c√≥digo</strong> cuando realmente estamos definiendo una funci√≥n lambda con <strong>los argumentos impl√≠citos</strong> o <strong>sin argumentos</strong>.</p>
</blockquote>
<p>El tipo de estas funciones puede definirse de <strong>tres formas</strong>:</p>
<ol>
<li>
<p><strong>SAM</strong> ('<em>Single Abstract Method</em>') interface o tambi√©n conocido como '<strong>functional interface</strong>': Podemos ponerle nombre al tipo y tal y como sucede en Java, es una interfaz pero con una √∫nica funci√≥n abstracta. Por eso ponemos <strong><code>fun</code></strong> delante de la palabra reservada interface.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-interface">interface</span> Predicat<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">compleix</span><span class="token punctuation">(</span>dato<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Boolean
<span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> esPar <span class="token operator">=</span> Predicat<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es par 4 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">esPar<span class="token punctuation">.</span><span class="token function">compleix</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>üìå <strong>Nota</strong>: Aunque es muy similar a Java en Kotlin es poco usada por ser muy verbosa y ser poco pr√°ctica al obligarnos a definir un tipo de forma expl√≠cita.</p>
</blockquote>
</li>
</ol>
<div style="page-break-after:always;"></div>
<ol start="2">
<li>
<p>El tipo se deduce de la inicializaci√≥n</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// F√≠jate que tenemos que indicar el tipo del par√°metro</span>
    <span class="token comment">// o par√°metros de entrada.</span>
    <span class="token keyword keyword-val">val</span> esPar <span class="token operator">=</span> <span class="token punctuation">{</span> v<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span>        
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es par 6 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">esPar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword keyword-val">val</span> sumaDivisores <span class="token operator">=</span> <span class="token punctuation">{</span> n<span class="token operator">:</span> Int <span class="token operator">-&gt;</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span>n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> n <span class="token operator">%</span> it <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Aqu√≠ tenemos m√°s de un par√°metro de entrada.</span>
    <span class="token comment">// F√≠jate que no ponemos par√©ntesis.    </span>
    <span class="token keyword keyword-val">val</span> sonAmigos <span class="token operator">=</span> <span class="token punctuation">{</span> n1<span class="token operator">:</span> Int<span class="token punctuation">,</span> n2<span class="token operator">:</span> Int <span class="token operator">-&gt;</span>
        <span class="token function">sumaDivisores</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span> <span class="token operator">==</span> n2 <span class="token operator">&amp;&amp;</span> <span class="token function">sumaDivisores</span><span class="token punctuation">(</span>n2<span class="token punctuation">)</span> <span class="token operator">==</span> n1
    <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Amigos 234, 565 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">sonAmigos</span><span class="token punctuation">(</span><span class="token number">234</span><span class="token punctuation">,</span> <span class="token number">265</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>El <strong>tipo es an√≥nimo</strong> y viene definido por la signatura de la funci√≥n lambda.</p>
<blockquote>
<p>üìå <strong>Nota:</strong> Solo tiene sentido si vamos a pasar la lambda como <strong>funci√≥n de orden superior</strong> (HOF).</p>
</blockquote>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Aqu√≠ tiene poco sentido hacer esto.</span>
    <span class="token keyword keyword-lateinit">lateinit</span> <span class="token keyword keyword-var">var</span> esPar<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
    esPar <span class="token operator">=</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es par 9 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">esPar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
</ol>
<div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="definiendo-y-usando-funciones-de-orden-superior-hof">Definiendo y usando funciones de orden superior HOF</h4>

<blockquote>
<p>‚úã <strong>Importante</strong>: Este tipo de c√≥digo y definiciones ser√° muy com√∫n encontrarlo en la programaci√≥n con Android y difiere un poco con la sintaxis de C#, vista en primer curso.</p>
</blockquote>
<p>Podemos utilizar un tipo con nombre o no, como ya hemos indicado. Aunque lo m√°s com√∫n es no usarlo.</p>
<ol>
<li>
<p>Tipado con un SAM interface:</p>
<p>Es m√°s similar a Java o a otros lenguajes como C#, pero no es muy com√∫n usarla.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-interface">interface</span> Predicate<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">cumple</span><span class="token punctuation">(</span>dato<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> Boolean
<span class="token punctuation">}</span>

<span class="token comment">// El tipo del callback es Predicate&lt;T&gt;</span>
<span class="token keyword keyword-fun">fun</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">muestraPredicado</span><span class="token punctuation">(</span>nombre<span class="token operator">:</span> String<span class="token punctuation">,</span> dato<span class="token operator">:</span> T<span class="token punctuation">,</span> 
                        predicadoCallback<span class="token operator">:</span> Predicate<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">nombre</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">dato</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">predicadoCallback<span class="token punctuation">.</span><span class="token function">cumple</span><span class="token punctuation">(</span>dato<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">esPar</span><span class="token punctuation">(</span>v<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Pasamos un identificador de funci√≥n definido en el mismo √°mbito del main</span>
    <span class="token function">muestraPredicado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es par"</span></span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token operator">::</span>esPar<span class="token punctuation">)</span>
    <span class="token comment">// Pasamos un lambda como par√°metro.</span>
    <span class="token function">muestraPredicado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es impar"</span></span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>Tipado con un tipo an√≥nimo:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token comment">// En este caso el tipo del callback es an√≥nimo y es (T) -&gt; Boolean</span>
<span class="token comment">// Esto es lo m√°s habitual en Kotlin y lo recomendable.</span>
<span class="token keyword keyword-fun">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">muestraPredicado</span><span class="token punctuation">(</span>
    nombre<span class="token operator">:</span> String<span class="token punctuation">,</span> dato<span class="token operator">:</span> T<span class="token punctuation">,</span>
    predicadoCallback<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Boolean
<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">nombre</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">dato</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">predicadoCallback</span><span class="token punctuation">(</span>dato<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Pasamos un lambda como par√°metro con la misma signatura del tipo an√≥nimo</span>
    <span class="token function">muestraPredicado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es impar"</span></span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span>
        v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
</ol>
<div style="page-break-after:always;"></div>
<blockquote>
<p>‚úã <strong>Muy importante</strong>: F√≠jate que al ir la funci√≥n lambda como √∫ltimo par√°metro podemos ponerla fuera de los par√©ntesis.</p>
<ul>
<li>
<p>Es v√°lido pero no lo recomendable en Kotlin.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token function">muestraPredicado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es impar"</span></span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span> v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
<li>
<p>üëç Esta es la <strong>sintaxis recomendada en Kotlin</strong> y la que vamos usar durante los ejemplos del curso.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token function">muestraPredicado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Es impar"</span></span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span>
    v <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</blockquote>
<h4 class="crossnote-header" id="clausuras">Clausuras</h4>

<p>Funcionan de la misma forma que en C#.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token comment">// Es una HOF porque retorna una funci√≥n</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">contador</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token punctuation">{</span>
    <span class="token keyword keyword-var">var</span> i <span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// i es una variable clausurada.     </span>
    <span class="token comment">// no ponemos el () -&gt; en la lambda de retorno.</span>
    <span class="token keyword keyword-return">return</span> <span class="token punctuation">{</span> i<span class="token operator">++</span> <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-var">var</span> cuenta1 <span class="token operator">=</span> <span class="token function">contador</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span> cuenta2 <span class="token operator">=</span> <span class="token function">contador</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"cuenta1 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">cuenta1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"cuenta1 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">cuenta1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"cuenta1 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">cuenta1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"cuenta2 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">cuenta2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"cuenta2 = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression"><span class="token function">cuenta2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h3 class="crossnote-header" id="map-filter-fold">Map-Filter-Fold</h3>

<p>Podemos aplicar los mismos conceptos de primer curso en CSharp.</p>
<p>De hecho el c√≥digo es muy similar y podremos hacer una analog√≠a f√°cilmente.</p>
<ul>
<li>
<p>En <strong>C#</strong> pod√≠amos hacer:</p>
<pre data-role="codeBlock" data-info="csharp" class="language-csharp csharp"><span class="token class-name"><span class="token keyword keyword-double">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> notas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">,</span> <span class="token number">4.3</span><span class="token punctuation">,</span> <span class="token number">4.6</span><span class="token punctuation">,</span> <span class="token number">4.3</span><span class="token punctuation">,</span> <span class="token number">7.2</span><span class="token punctuation">,</span> <span class="token number">7.6</span><span class="token punctuation">,</span> <span class="token number">5.6</span><span class="token punctuation">,</span> <span class="token number">8.7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Contamos aquellas notas redondeadas a entero que son mayores o iguales a 5.</span>
<span class="token class-name"><span class="token keyword keyword-int">int</span></span> aprobados1 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>c<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Lo mismo pero usando la funci√≥n de fold Count a la que le pasamos </span>
<span class="token comment">// el predicado para filtrar los aprobados.</span>
<span class="token class-name"><span class="token keyword keyword-int">int</span></span> aprobados2 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">// Ordenamos por notas sin repeticiones y tras ordenar de forma</span>
<span class="token comment">// descendente tomamos el primero.</span>
<span class="token class-name"><span class="token keyword keyword-int">int</span></span> notaMayor1 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">Distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">OrderByDescending</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> n<span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Lo mismo pero usando la funci√≥n de fold Max </span>
<span class="token class-name"><span class="token keyword keyword-int">int</span></span> notaMayor2 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span><span class="token punctuation">)</span>Math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
<li>
<p>El c√≥digo en <strong>Kotlin</strong> equivalente ser√≠a:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><span class="token keyword keyword-val">val</span> notas <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">,</span> <span class="token number">4.3</span><span class="token punctuation">,</span> <span class="token number">4.6</span><span class="token punctuation">,</span> <span class="token number">4.3</span><span class="token punctuation">,</span> <span class="token number">7.2</span><span class="token punctuation">,</span> <span class="token number">7.6</span><span class="token punctuation">,</span> <span class="token number">5.6</span><span class="token punctuation">,</span> <span class="token number">8.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-val">val</span> aprobados1 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">roundToInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
                      <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n <span class="token operator">&gt;=</span> <span class="token number">5</span> <span class="token punctuation">}</span>
                      <span class="token punctuation">.</span><span class="token function">fold</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> c<span class="token punctuation">,</span> _ <span class="token operator">-&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword keyword-val">val</span> aprobados2 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">roundToInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">count</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n <span class="token operator">&gt;=</span> <span class="token number">5</span> <span class="token punctuation">}</span>

<span class="token keyword keyword-val">val</span> notaMayor1 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">roundToInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
                      <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">sortedByDescending</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n <span class="token punctuation">}</span>
                      <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword keyword-val">val</span> notaMayor2 <span class="token operator">=</span> notas<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n<span class="token punctuation">.</span><span class="token function">roundToInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">maxOf</span> <span class="token punctuation">{</span> n <span class="token operator">-&gt;</span> n <span class="token punctuation">}</span>
</pre></li>
</ul>
<div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="creando-objetos-an%C3%B3nimos-de-consultas-sobre-objetos-complejos">Creando objetos an√≥nimos de consultas sobre objetos complejos</h4>

<p>Ya sabemos un porque que podemos aplicar los conceptos de Map-Filter-Fold a tipos sencillos pero, ¬øy si queremos aplicarlos a tipos complejos?. Es m√°s, ¬øy si queremos crear objetos an√≥nimos a partir de los resultados de las consultas?</p>
<p>Supongamos la siguiente definici√≥n de datos:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Empleado</span><span class="token punctuation">(</span><span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword keyword-val">val</span> edad<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword keyword-val">val</span> ciudad<span class="token operator">:</span> Ciudad<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-enum">enum</span> <span class="token keyword keyword-class">class</span> <span class="token function">Ciudad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Elche<span class="token punctuation">,</span> Alicante <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-object">object</span> Datos <span class="token punctuation">{</span>    
    <span class="token keyword keyword-val">val</span> empleados <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
            <span class="token function">Empleado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Xusa"</span></span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> Empleado<span class="token punctuation">.</span>Ciudad<span class="token punctuation">.</span>Alicante<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">Empleado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Pepe"</span></span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> Empleado<span class="token punctuation">.</span>Ciudad<span class="token punctuation">.</span>Alicante<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">Empleado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Juanjo"</span></span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> Empleado<span class="token punctuation">.</span>Ciudad<span class="token punctuation">.</span>Elche<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">Empleado</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Vicente"</span></span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> Empleado<span class="token punctuation">.</span>Ciudad<span class="token punctuation">.</span>Elche<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>Queremos obtener una lista de objetos an√≥nimos con el nombre y la ciudad de los empleados mayores de 45 a√±os sin repeticiones y ordenados por nombre.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-val">val</span> res <span class="token operator">=</span> Datos<span class="token punctuation">.</span>empleados
    <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span>edad <span class="token operator">&gt;</span> <span class="token number">45</span> <span class="token punctuation">}</span>    <span class="token comment">// Filtramos por edad</span>
    <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span>                     <span class="token comment">// Proyectamos lo filtrado a un objeto an√≥nimo</span>
        <span class="token keyword keyword-object">object</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-val">val</span> nombre <span class="token operator">=</span> e<span class="token punctuation">.</span>nombre
            <span class="token keyword keyword-val">val</span> ciudad <span class="token operator">=</span> e<span class="token punctuation">.</span>ciudad
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment">// Eliminamos repeticiones</span>
    <span class="token punctuation">.</span><span class="token function">sortedBy</span> <span class="token punctuation">{</span> d <span class="token operator">-&gt;</span> d<span class="token punctuation">.</span>nombre <span class="token punctuation">}</span>     <span class="token comment">// Ordenamos por nombre</span>
    <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token comment">// Pasamos la secuencia a una lista</span>

<span class="token comment">// Si quisi√©ramos retornar la lista</span>
<span class="token comment">// deber√≠amos usar una data class en lugar de objetos an√≥nimos.</span>
<span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"\n"</span></span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"%-10s%-10s\n"</span></span><span class="token punctuation">,</span><span class="token string-literal singleline"><span class="token string">"Nombre"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Ciudad"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    d <span class="token operator">-&gt;</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"%-10s%-10s"</span></span><span class="token punctuation">,</span>d<span class="token punctuation">.</span>nombre<span class="token punctuation">,</span> d<span class="token punctuation">.</span>ciudad<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre><blockquote>
<p>üìå <strong>Nota</strong>: Nos interesar√° m√°s usar data class que objetos an√≥nimos cuando queramos hacer consultas sobre objetos complejos y hacer agrupaciones o recuperar los datos de la consulta en una lista.</p>
</blockquote>
<blockquote>
<p>‚úã <strong>Importante:</strong>: Los objetos an√≥nimos no definen el toString por defecto como ocurre en C#, por lo que si es necesario se deber√° crear un toString dentro de la implementaci√≥n del objeto:</p>
</blockquote>
<blockquote>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"> <span class="token keyword keyword-val">val</span> helloWorld <span class="token operator">=</span> <span class="token keyword keyword-object">object</span> <span class="token punctuation">{</span>
     <span class="token keyword keyword-val">val</span> hello <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Hello"</span></span>
     <span class="token keyword keyword-val">val</span> world <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"World"</span></span>
     <span class="token comment">// las expresiones de objeto extienden Any, por lo que se requiere `override` en `toString()`</span>
     <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-fun">fun</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">hello</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">world</span></span><span class="token string">"</span></span>
   <span class="token punctuation">}</span>
</pre></blockquote>
<div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="trasformaciones-de-datos-usando-map">Trasformaciones de datos usando map</h4>

<p>En la programaci√≥n con Android nos encontraremos con que tenemos que transformar objetos del <strong>modelo</strong> o dominio en objetos de <strong>presentaci√≥n</strong> y viceversa. De esta forma evitamos acoplar la vista a los objetos del modelo y viceversa.</p>
<p>Supongamos que guardamos en nuestro modelo de datos una ser√≠e de datos de contacto de agenda de la siguiente forma:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Contacto</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> telefono<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> listas<span class="token operator">:</span> EnumSet<span class="token operator">&lt;</span>Lista<span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-enum">enum</span> <span class="token keyword keyword-class">class</span> Lista <span class="token punctuation">{</span>
        Amigos<span class="token punctuation">,</span> Trabajo<span class="token punctuation">,</span> Familia
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Donde <strong><code>listas</code></strong> es un conjunto de valores del enumerado <strong><code>Lista</code></strong> que indica a qu√© <strong><code>lista o listas de contactos</code></strong> pertenece el registro.</p>
<p>Supongamos una fuente de datos de contactos que nos devuelve una lista de objetos de tipo <strong><code>Contacto</code></strong>:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-object">object</span> ContactosRepository <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> datos <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span>
        <span class="token function">Contacto</span><span class="token punctuation">(</span>
            <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Xusa"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"111666666"</span></span><span class="token punctuation">,</span>
            listas <span class="token operator">=</span> EnumSet<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Trabajo<span class="token punctuation">,</span> Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Amigos<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Contacto</span><span class="token punctuation">(</span>
            <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Pepe"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"222666666"</span></span><span class="token punctuation">,</span>
            listas <span class="token operator">=</span> EnumSet<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Trabajo<span class="token punctuation">,</span> Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Familia<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Contacto</span><span class="token punctuation">(</span>
            <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Juanjo"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"333666666"</span></span><span class="token punctuation">,</span>
            listas <span class="token operator">=</span> EnumSet<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Amigos<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Contacto</span><span class="token punctuation">(</span>
            <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"Vicente"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"444666666"</span></span><span class="token punctuation">,</span>
            listas <span class="token operator">=</span> EnumSet<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Familia<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<p>A√±adimos un m√©todo <strong><code>Update</code></strong> para actualizar un contacto en la fuente de datos:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-object">object</span> ContactosRepository <span class="token punctuation">{</span>
    <span class="token operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">Update</span><span class="token punctuation">(</span>contacto<span class="token operator">:</span> Contacto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-val">val</span> index <span class="token operator">=</span> datos<span class="token punctuation">.</span><span class="token function">indexOfFirst</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>id <span class="token operator">==</span> contacto<span class="token punctuation">.</span>id <span class="token punctuation">}</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            datos<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> contacto
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>En el interfaz de usuario queremos mostrar cada contacto en la lista con un icono que me indique a qu√© lista de contactos pertenece. Para ello,vamos a crear un tipo en la capa de presentaci√≥n de tipo <strong><code>ContactoUiState</code></strong> con el estado de visualizaci√≥n del interfaz de usuario (UI) que contenga una propiedad booleana para cada una de las posibles listas de contactos...</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">ContactoUiState</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> telefono<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> trabajo<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> familia<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> amigos<span class="token operator">:</span> Boolean
<span class="token punctuation">)</span>
</pre><p>Para pasar de un objeto a otro usaremos el m√©todo <strong><code>map</code></strong> de las colecciones de Kotlin. Pero antes de nada, vamos a crear una funci√≥n que nos ayude a crear objetos de tipo <strong><code>ContactoUiState</code></strong> a partir de objetos de tipo <strong><code>Contacto</code></strong>.</p>
<p>Esta funci√≥n la podemos crear como una <strong>funci√≥n de extensi√≥n</strong> de la clase <strong><code>Contacto</code></strong> para evitar acoplamientos y que la clase <strong><code>Contacto</code></strong> no tenga que conocer la clase <strong><code>ContactoUiState</code></strong>.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> Contacto<span class="token punctuation">.</span><span class="token function">toContactoUiState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">ContactoUiState</span><span class="token punctuation">(</span>
    id <span class="token operator">=</span> id<span class="token punctuation">,</span>
    nombre <span class="token operator">=</span> nombre<span class="token punctuation">,</span>
    telefono <span class="token operator">=</span> telefono<span class="token punctuation">,</span>
    trabajo <span class="token operator">=</span> listas<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Trabajo<span class="token punctuation">)</span><span class="token punctuation">,</span>
    familia <span class="token operator">=</span> listas<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Familia<span class="token punctuation">)</span><span class="token punctuation">,</span>
    amigos <span class="token operator">=</span> listas<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Amigos<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</pre><div style="page-break-after:always;"></div>
<p>De forma an√°loga podemos crear una funci√≥n de extensi√≥n para pasar de <strong><code>ContactoUiState</code></strong> a <strong><code>Contacto</code></strong>.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> ContactoUiState<span class="token punctuation">.</span><span class="token function">toContacto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Contacto</span><span class="token punctuation">(</span>
    id <span class="token operator">=</span> id<span class="token punctuation">,</span>
    nombre <span class="token operator">=</span> nombre<span class="token punctuation">,</span>
    telefono <span class="token operator">=</span> telefono<span class="token punctuation">,</span>
    listas <span class="token operator">=</span> EnumSet<span class="token punctuation">.</span><span class="token function">noneOf</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token operator">::</span><span class="token keyword keyword-class">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>trabajo<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Trabajo<span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>familia<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Familia<span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>amigos<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>Contacto<span class="token punctuation">.</span>Lista<span class="token punctuation">.</span>Amigos<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</pre><p>Ahora podemos usar el m√©todo <strong><code>map</code></strong> para transformar la lista de <strong><code>Contacto</code></strong> en una lista de <strong><code>ContactoUiState</code></strong> y viceversa de forma sencilla:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Mostramos los datos de la fuente de datos</span>
    <span class="token function">println</span><span class="token punctuation">(</span>ContactosRepository<span class="token punctuation">.</span>datos<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span>separator <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"\n"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Transformamos los datos de la fuente de datos a datos de presentaci√≥n con map</span>
    <span class="token keyword keyword-val">val</span> contactosEnUi <span class="token operator">=</span> ContactosRepository<span class="token punctuation">.</span>datos<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toContactoUiState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toMutableList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>contactosEnUi<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span>separator <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"\n"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Modificamos el primer contacto de la lista de presentaci√≥n</span>
    <span class="token comment">// para que no pertenezca a la lista de amigos</span>
    contactosEnUi<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> contactosEnUi<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>amigos <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

    <span class="token comment">// Actualizamos los datos de la fuente de datos con los datos de presentaci√≥n </span>
    <span class="token comment">// usando map. Aunque lo m√°s normal, ser√° actualizar solo un contacto haciendo</span>
    <span class="token comment">// ContactosRepository.Update(contactosEnUi[0].toContacto())</span>
    contactosEnUi<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toContacto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> ContactosRepository<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>

    <span class="token function">println</span><span class="token punctuation">(</span>ContactosRepository<span class="token punctuation">.</span>datos<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span>separator <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"\n"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<h4 class="crossnote-header" id="haciendo-agrupaciones-con-groupby">Haciendo agrupaciones con groupBy</h4>

<p>Si quisi√©ramos mostrar los empleados por ciudad ordenados por nombre podr√≠amos usar el m√©todo <strong><code>groupBy</code></strong> como en C#.</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token comment">// F√≠jate que aunque no es necesario especificar el tipo de la variable</span>
<span class="token comment">// nosotros lo hemos hecho para ver que la agrupaci√≥n me</span>
<span class="token comment">// devuelve un Map&lt;Ciudad, List&lt;Empleado&gt;&gt; donde la clave es la</span>
<span class="token comment">// propiedad `pr la que agrupamos.</span>
<span class="token keyword keyword-val">val</span> empleatsPerCiutat <span class="token operator">:</span> Map<span class="token operator">&lt;</span>Empleado<span class="token punctuation">.</span>Ciudad<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Empleado<span class="token operator">&gt;</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
Datos<span class="token punctuation">.</span>empleados<span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span>ciudad <span class="token punctuation">}</span>

<span class="token keyword keyword-var">var</span> salida <span class="token operator">:</span> StringBuilder <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>eXc <span class="token keyword keyword-in">in</span> empleatsPerCiutat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    salida<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">eXc<span class="token punctuation">.</span>key</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:\n"</span></span><span class="token punctuation">)</span>
    eXc<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">sortedBy</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span> e<span class="token punctuation">.</span>edad <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span>
        e <span class="token operator">-&gt;</span> salida<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"\t</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">e</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">println</span><span class="token punctuation">(</span>salida<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h4 class="crossnote-header" id="obteniendo-secuencias-anidadas-con-flatmap">Obteniendo secuencias anidadas con flatMap</h4>

<p>Supongamos la siguiente de representaci√≥n donde tenemos el t√≠pico array de arrays o tabla dentada. En el fondo, podemos considerarlo como una secuencia de secuencias (sub-secuencias) de enteros:</p>
<p align="center" style="zoom:0.7" class="dot"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 8.1.0 (20230707.0739)
 -->
<!-- Title: G Pages: 1 -->
<svg width="685pt" height="235pt" viewBox="0.00 0.00 684.86 235.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 231)">
<title>G</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-231 680.86,-231 680.86,4 -4,4"></polygon>
<!-- ot1 -->
<g id="node1" class="node">
<title>ot1</title>
<polygon fill="none" stroke="black" points="42,-188.6 42,-222.6 76,-222.6 76,-188.6 42,-188.6"></polygon>
<polygon fill="none" stroke="black" points="76,-188.6 76,-222.6 110,-222.6 110,-188.6 76,-188.6"></polygon>
<polygon fill="none" stroke="black" points="110,-188.6 110,-222.6 144,-222.6 144,-188.6 110,-188.6"></polygon>
<polygon fill="none" stroke="black" points="144,-188.6 144,-222.6 178,-222.6 178,-188.6 144,-188.6"></polygon>
</g>
<!-- ot11 -->
<g id="node2" class="node">
<title>ot11</title>
<polygon fill="none" stroke="black" points="10.21,-73.6 10.21,-108.4 43.79,-108.4 43.79,-73.6 10.21,-73.6"></polygon>
<text text-anchor="start" x="19.21" y="-86.8" font-family="Arial" font-size="14.00">11</text>
<polygon fill="none" stroke="black" points="10.21,-38.8 10.21,-73.6 43.79,-73.6 43.79,-38.8 10.21,-38.8"></polygon>
<text text-anchor="start" x="19.21" y="-52" font-family="Arial" font-size="14.00">22</text>
</g>
<!-- ot1&#45;&gt;ot11 -->
<g id="edge1" class="edge">
<title>ot1:c-&gt;ot11:n</title>
<path fill="none" stroke="black" d="M53.43,-188.75C46.69,-169.6 35.6,-138.05 30.18,-122.64"></path>
<polygon fill="black" stroke="black" points="27,-113.6 34.56,-121.54 28.66,-118.32 30.32,-123.03 30.32,-123.03 30.32,-123.03 28.66,-118.32 26.07,-124.53 27,-113.6 27,-113.6"></polygon>
</g>
<!-- ot12 -->
<g id="node3" class="node">
<title>ot12</title>
<polygon fill="none" stroke="black" points="65.21,-91 65.21,-125.8 98.79,-125.8 98.79,-91 65.21,-91"></polygon>
<text text-anchor="start" x="74.21" y="-104.2" font-family="Arial" font-size="14.00">34</text>
<polygon fill="none" stroke="black" points="65.21,-56.2 65.21,-91 98.79,-91 98.79,-56.2 65.21,-56.2"></polygon>
<text text-anchor="start" x="74.21" y="-69.4" font-family="Arial" font-size="14.00">35</text>
<polygon fill="none" stroke="black" points="65.21,-21.4 65.21,-56.2 98.79,-56.2 98.79,-21.4 65.21,-21.4"></polygon>
<text text-anchor="start" x="74.21" y="-34.6" font-family="Arial" font-size="14.00">29</text>
</g>
<!-- ot1&#45;&gt;ot12 -->
<g id="edge2" class="edge">
<title>ot1:c-&gt;ot12:n</title>
<path fill="none" stroke="black" d="M90.67,-188.91C88.47,-174.14 85.26,-152.51 83.42,-140.17"></path>
<polygon fill="black" stroke="black" points="82,-130.6 87.92,-139.83 82.74,-135.55 83.47,-140.49 83.47,-140.49 83.47,-140.49 82.74,-135.55 79.02,-141.15 82,-130.6 82,-130.6"></polygon>
</g>
<!-- ot13 -->
<g id="node4" class="node">
<title>ot13</title>
<polygon fill="none" stroke="black" points="120.21,-56.2 120.21,-91 153.79,-91 153.79,-56.2 120.21,-56.2"></polygon>
<text text-anchor="start" x="129.21" y="-69.4" font-family="Arial" font-size="14.00">10</text>
</g>
<!-- ot1&#45;&gt;ot13 -->
<g id="edge3" class="edge">
<title>ot1:c-&gt;ot13:n</title>
<path fill="none" stroke="black" d="M128.43,-188.98C130.53,-166.14 134.37,-124.29 136.1,-105.36"></path>
<polygon fill="black" stroke="black" points="137,-95.6 140.57,-105.97 136.54,-100.58 136.09,-105.56 136.09,-105.56 136.09,-105.56 136.54,-100.58 131.61,-105.15 137,-95.6 137,-95.6"></polygon>
</g>
<!-- ot14 -->
<g id="node5" class="node">
<title>ot14</title>
<polygon fill="none" stroke="black" points="175.21,-108.4 175.21,-143.2 208.79,-143.2 208.79,-108.4 175.21,-108.4"></polygon>
<text text-anchor="start" x="184.21" y="-121.6" font-family="Arial" font-size="14.00">17</text>
<polygon fill="none" stroke="black" points="175.21,-73.6 175.21,-108.4 208.79,-108.4 208.79,-73.6 175.21,-73.6"></polygon>
<text text-anchor="start" x="184.21" y="-86.8" font-family="Arial" font-size="14.00">14</text>
<polygon fill="none" stroke="black" points="175.21,-38.8 175.21,-73.6 208.79,-73.6 208.79,-38.8 175.21,-38.8"></polygon>
<text text-anchor="start" x="184.21" y="-52" font-family="Arial" font-size="14.00">30</text>
<polygon fill="none" stroke="black" points="175.21,-4 175.21,-38.8 208.79,-38.8 208.79,-4 175.21,-4"></polygon>
<text text-anchor="start" x="184.21" y="-17.2" font-family="Arial" font-size="14.00">31</text>
</g>
<!-- ot1&#45;&gt;ot14 -->
<g id="edge4" class="edge">
<title>ot1:c-&gt;ot14:n</title>
<path fill="none" stroke="black" d="M169.64,-188.61C175.37,-178 182.67,-164.47 187.34,-155.82"></path>
<polygon fill="black" stroke="black" points="192,-147.2 191.21,-158.14 189.62,-151.6 187.25,-156 187.25,-156 187.25,-156 189.62,-151.6 183.29,-153.86 192,-147.2 192,-147.2"></polygon>
</g>
<!-- otFlat -->
<g id="node6" class="node">
<title>otFlat</title>
<polygon fill="none" stroke="black" points="333.14,-188.2 333.14,-223 366.71,-223 366.71,-188.2 333.14,-188.2"></polygon>
<text text-anchor="start" x="342.14" y="-201.4" font-family="Arial" font-size="14.00">11</text>
<polygon fill="none" stroke="black" points="366.71,-188.2 366.71,-223 400.28,-223 400.28,-188.2 366.71,-188.2"></polygon>
<text text-anchor="start" x="375.71" y="-201.4" font-family="Arial" font-size="14.00">22</text>
<polygon fill="none" stroke="black" points="400.28,-188.2 400.28,-223 433.86,-223 433.86,-188.2 400.28,-188.2"></polygon>
<text text-anchor="start" x="409.28" y="-201.4" font-family="Arial" font-size="14.00">34</text>
<polygon fill="none" stroke="black" points="433.86,-188.2 433.86,-223 467.43,-223 467.43,-188.2 433.86,-188.2"></polygon>
<text text-anchor="start" x="442.86" y="-201.4" font-family="Arial" font-size="14.00">35</text>
<polygon fill="none" stroke="black" points="467.43,-188.2 467.43,-223 501,-223 501,-188.2 467.43,-188.2"></polygon>
<text text-anchor="start" x="476.43" y="-201.4" font-family="Arial" font-size="14.00">29</text>
<polygon fill="none" stroke="black" points="501,-188.2 501,-223 534.57,-223 534.57,-188.2 501,-188.2"></polygon>
<text text-anchor="start" x="510" y="-201.4" font-family="Arial" font-size="14.00">10</text>
<polygon fill="none" stroke="black" points="534.57,-188.2 534.57,-223 568.14,-223 568.14,-188.2 534.57,-188.2"></polygon>
<text text-anchor="start" x="543.57" y="-201.4" font-family="Arial" font-size="14.00">17</text>
<polygon fill="none" stroke="black" points="568.14,-188.2 568.14,-223 601.72,-223 601.72,-188.2 568.14,-188.2"></polygon>
<text text-anchor="start" x="577.14" y="-201.4" font-family="Arial" font-size="14.00">14</text>
<polygon fill="none" stroke="black" points="601.72,-188.2 601.72,-223 635.29,-223 635.29,-188.2 601.72,-188.2"></polygon>
<text text-anchor="start" x="610.72" y="-201.4" font-family="Arial" font-size="14.00">30</text>
<polygon fill="none" stroke="black" points="635.29,-188.2 635.29,-223 668.86,-223 668.86,-188.2 635.29,-188.2"></polygon>
<text text-anchor="start" x="644.29" y="-201.4" font-family="Arial" font-size="14.00">31</text>
</g>
<!-- ot1&#45;&gt;otFlat -->
<g id="edge5" class="edge">
<title>ot1-&gt;otFlat</title>
<path fill="none" stroke="blue" d="M185.85,-205.6C222.76,-205.6 268.9,-205.6 314.41,-205.6"></path>
<polygon fill="none" stroke="blue" points="314.33,-209.1 324.33,-205.6 314.33,-202.1 314.33,-209.1"></polygon>
<text text-anchor="middle" x="255.57" y="-212.8" font-family="Arial" font-size="14.00" fill="blue">Flat o Aplanado</text>
</g>
</g>
</svg>
</p><p>Si te fijas en el diagrama podemos ver que la operaci√≥n de flat consiste en generar una nueva secuencia con datos de las sub-secuencias de entrada. El efecto es como si estuvi√©ramos '<em>aplanando</em>' la tabla dentada.</p>
<p>En <strong>Kotlin</strong> podemos usar el m√©todo <strong><code>flatMap</code></strong> para obtener la secuencia de enteros de la tabla dentada. El c√≥digo ser√≠a el siguiente:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-val">val</span> jagged <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>
    <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// flatMap = Array&lt;Array&lt;Int&gt;&gt; ‚Üí (Array&lt;Int&gt; ‚Üí List&lt;Int&gt;) ‚Üí List&lt;Int&gt;</span>
<span class="token keyword keyword-val">val</span> flat <span class="token operator">=</span> jagged<span class="token punctuation">.</span><span class="token function">flatMap</span> <span class="token punctuation">{</span> v <span class="token operator">-&gt;</span> v<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token function">println</span><span class="token punctuation">(</span>flat<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">", "</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Mostrar√° por pantalla: 11, 22, 34, 25, 29, 10, 17, 14, 30, 31</span>
</pre><div style="page-break-after:always;"></div>
<h3 class="crossnote-header" id="ejemplo-de-consulta-de-datos-mapeados-a-objetos-en-kolin">Ejemplo de consulta de datos mapeados a objetos en Kolin</h3>

<ul>
<li>Descarga los archivos de este ejemplo de <strong><a href="./assets/codigo/ejemplo_consultas_funcionales_recurso.zip">aqu√≠</a></strong>.</li>
</ul>
<p>Supongamos las siguientes definiciones de a modo de DTOs:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Libro</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> titulo<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> a√±o<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> paginas<span class="token operator">:</span> Int
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-fun">fun</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span>
        <span class="token string-literal singleline"><span class="token string">"Titulo: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">titulo<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  A√±o: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">a√±o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  P√°ginas: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">paginas</span></span><span class="token string">"</span></span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Autor</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nacionalidad<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> muerte<span class="token operator">:</span> LocalDate<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> libros<span class="token operator">:</span> List<span class="token operator">&lt;</span>Libro<span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-fun">fun</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span>
        <span class="token string-literal singleline"><span class="token string">"Nombre: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">nombre<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">37</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  Nacionalidad: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">nacionalidad<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> "</span></span> <span class="token operator">+</span>
                <span class="token string-literal singleline"><span class="token string">"Muerte: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">muerte<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"dd/MM/yyyy"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n"</span></span> <span class="token operator">+</span>
                <span class="token string-literal singleline"><span class="token string">"Libros:\n\t</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">libros<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"\n\t"</span></span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span>
<span class="token punctuation">}</span>
</pre><div style="page-break-after:always;"></div>
<p>y los siguientes datos de prueba:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-object">object</span> Datos <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> autores<span class="token operator">:</span> List<span class="token operator">&lt;</span>Autor<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span>
        <span class="token function">Autor</span><span class="token punctuation">(</span>
            <span class="token string-literal singleline"><span class="token string">"William Shakespeare"</span></span><span class="token punctuation">,</span>
            <span class="token string-literal singleline"><span class="token string">"Inglesa"</span></span><span class="token punctuation">,</span>
            LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1616</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">listOf</span><span class="token punctuation">(</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Macbeth"</span></span><span class="token punctuation">,</span> <span class="token number">1623</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"La tempestad"</span></span><span class="token punctuation">,</span> <span class="token number">1611</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Autor</span><span class="token punctuation">(</span>
            <span class="token string-literal singleline"><span class="token string">"Miguel de Cervantes"</span></span><span class="token punctuation">,</span>
            <span class="token string-literal singleline"><span class="token string">"Espa√±ola"</span></span><span class="token punctuation">,</span>
            LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1616</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">listOf</span><span class="token punctuation">(</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Don Quijote de la Mancha"</span></span><span class="token punctuation">,</span> <span class="token number">1605</span><span class="token punctuation">,</span> <span class="token number">1376</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"La Galatea"</span></span><span class="token punctuation">,</span> <span class="token number">1585</span><span class="token punctuation">,</span> <span class="token number">664</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Los trabajos de Persiles y Sigismunda"</span></span><span class="token punctuation">,</span> <span class="token number">1617</span><span class="token punctuation">,</span> <span class="token number">888</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Novelas ejemplares"</span></span><span class="token punctuation">,</span> <span class="token number">1613</span><span class="token punctuation">,</span> <span class="token number">1160</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Autor</span><span class="token punctuation">(</span>
            <span class="token string-literal singleline"><span class="token string">"Fernando de Rojas"</span></span><span class="token punctuation">,</span>
            <span class="token string-literal singleline"><span class="token string">"Espa√±ola"</span></span><span class="token punctuation">,</span>
            LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1541</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">listOf</span><span class="token punctuation">(</span>
                <span class="token function">Libro</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"La Celestina"</span></span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">separadorDato</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span>
    <span class="token string-literal singleline"><span class="token string">"\n--------------------------------------------------------------------------------\n"</span></span>

</pre><div style="page-break-after:always;"></div>
<p>Con estos datos de prueba podemos hacer consultas sobre los datos de los autores. Por ejemplo:</p>
<ol>
<li>
<p>Si queremos obtener una lista de los autores que han escrito m√°s de un libro podr√≠amos hacer lo siguiente:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">autoresConMasDeUnLibro</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> snapshot <span class="token operator">=</span> Datos<span class="token punctuation">.</span>autores
        <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>libros<span class="token punctuation">.</span>size <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token function">separadorDato</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>Si queremos obtener el total de libros escritos por autores espa√±oles podr√≠amos hacer lo siguiente:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> totalLibrosEscritosPorEspa√±<span class="token function">oles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> totalLibros <span class="token operator">=</span> Datos<span class="token punctuation">.</span>autores
        <span class="token comment">// Filtramos por nacionalidad</span>
        <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>nacionalidad <span class="token operator">==</span> <span class="token string-literal singleline"><span class="token string">"Espa√±ola"</span></span> <span class="token punctuation">}</span>
        <span class="token comment">// Obtenemos el n√∫mero de libros de cada autor</span>
        <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>libros<span class="token punctuation">.</span>size <span class="token punctuation">}</span>
        <span class="token comment">// Sumamos los libros escritos por cada autor</span>
        <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Hay </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">totalLibros</span></span><span class="token string"> escritos por espa√±oles"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
</ol>
<div style="page-break-after:always;"></div>
<ol start="3">
<li>
<p>Si queremos obtener una lista de autores agrupados por siglo podr√≠amos hacer lo siguiente:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">autoresAgrupadosPorSiglo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Creamos un DTO para evitar usar objetos an√≥nimos.</span>
    <span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">AutorMuerte</span><span class="token punctuation">(</span><span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword keyword-val">val</span> muerte<span class="token operator">:</span> LocalDate<span class="token punctuation">)</span>
    <span class="token comment">// Nota: Podr√≠amos haber usado un Pair&lt;String, LocalDate&gt; en</span>
    <span class="token comment">// lugar de un DTO pero el c√≥digo ser√≠a menos legible.</span>

    <span class="token keyword keyword-val">val</span> snapshot <span class="token operator">=</span> Datos<span class="token punctuation">.</span>autores
        <span class="token comment">// Mapeamos a un objeto tipado AutorMuerte</span>
        <span class="token comment">// para hacer la consulta en este √°mbito</span>
        <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> a <span class="token operator">-&gt;</span> <span class="token function">AutorMuerte</span><span class="token punctuation">(</span>nombre <span class="token operator">=</span> a<span class="token punctuation">.</span>nombre<span class="token punctuation">,</span> muerte <span class="token operator">=</span> a<span class="token punctuation">.</span>muerte<span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token comment">// Ordenamos por fecha de muerte</span>
        <span class="token punctuation">.</span><span class="token function">sortedBy</span> <span class="token punctuation">{</span> a <span class="token operator">-&gt;</span> a<span class="token punctuation">.</span>muerte <span class="token punctuation">}</span>
        <span class="token comment">// Agrupamos por siglo obteniendo un Map&lt;Int, List&lt;Autor&gt;&gt;</span>
        <span class="token comment">// donde Int es el siglo y List&lt;AutorMuerte&gt; los autores</span>
        <span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>muerte<span class="token punctuation">.</span>year <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>

    snapshot<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>siglo<span class="token punctuation">,</span> autores<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">separadorDato</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"Siglo </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">siglo</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:\n\t"</span></span><span class="token punctuation">)</span>
        <span class="token function">println</span><span class="token punctuation">(</span>autores<span class="token punctuation">.</span><span class="token function">joinToString</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"\n\t"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> a <span class="token operator">-&gt;</span>
            <span class="token string-literal singleline"><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">a<span class="token punctuation">.</span>nombre</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">a<span class="token punctuation">.</span>muerte<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"dd/MM/yyyy"</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
<li>
<p>Calcular el total de p√°ginas publicadas por William Shakespeare:</p>
<pre data-role="codeBlock" data-info="Kotlin" class="language-kotlin Kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">totalPaginasWilliamShakespeare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> totalPaginas <span class="token operator">=</span> Datos<span class="token punctuation">.</span>autores
        <span class="token comment">// Filtramos por nombre</span>
        <span class="token punctuation">.</span><span class="token function">filter</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>nombre <span class="token operator">==</span> <span class="token string-literal singleline"><span class="token string">"William Shakespeare"</span></span> <span class="token punctuation">}</span>
        <span class="token comment">// De cada autor obtenemos la lista de libros</span>
        <span class="token comment">// En este caso solo tendr√≠amos un autor.</span>
        <span class="token punctuation">.</span><span class="token function">flatMap</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>libros <span class="token punctuation">}</span>
        <span class="token comment">// De cada libro obtenemos el n√∫mero de p√°ginas</span>
        <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>paginas <span class="token punctuation">}</span>
        <span class="token comment">// Sumamos las p√°ginas de cada libro</span>
        <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"William Shakespeare ha escrito </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">totalPaginas</span></span><span class="token string"> p√°ginas"</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
</ol>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>