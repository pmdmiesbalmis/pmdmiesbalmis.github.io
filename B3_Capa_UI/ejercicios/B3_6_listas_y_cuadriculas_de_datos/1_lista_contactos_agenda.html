<!DOCTYPE html><html><head>
      <title>PMDM 2췈 DAM Tema 3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .caso_estudio {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .ejercicio {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="visualizar-lista-de-contactos-de-la-agenda">Visualizar lista de contactos de la Agenda </h1>
<p><a href="./1_lista_contactos_agenda.pdf">Descargar estos apuntes</a></p>
<h2 id="codelab-guiado-para-crear-una-lista-de-contactos-de-la-agenda">'<em>Codelab</em>' guiado para crear una lista de contactos de la Agenda </h2>
<p>En el siguiente ejercicio partiremos del <strong>ejercicio 3</strong> del <strong>Tema 3.2</strong> donde defin칤amos un <strong>componente imagen para la Agenda</strong>. La idea del mismo es visualizar una lista de contactos de la Agenda.</p>
<h3 id="paso-1-definir-el-componente-para-un-item-en-la-lista">Paso 1: Definir el componente para un '<em>item</em>' en la lista </h3>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 80%">
<p>Deber치 visualizar todos los datos de un contacto como su imagen, nombre, apellidos, tel칠fono y correo electr칩nico. Adem치s, mostrar치 en forma de iconos las categor칤as a las que pertenece el contacto.<br>
Por 칰ltimo, al seleccionar un contacto se generar치 una peque침a animaci칩n para mostrarnos una serie de botones, <strong>que aunque de momento no le vamos a dar funcionalidad</strong>, m치s adelante me permitir치 hacer llamadas, enviar un correo, editar o eliminar el contacto.</p>
</div>
<div style="width: auto">
<img width="300px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto.png">
<img style="margin-top: 10px" width="300px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto_seleccionado.png">
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<p>Crearemos pues en el paquete <strong>features</strong> un nuevo paquete <strong>vercontactos</strong> y dentro de 칠l un nuevo componente <strong>ContactoListItem.kt</strong> y las clases asociadas <strong>ContactoUiState.kt</strong> y <strong>ItemListaContactosEvent.kt</strong> que ser치n las que nos permitan gestionar el estado del componente y los eventos que se produzcan sobre el mismo.</p>
<p>Veamos pues en primer lugar las clases <strong><code>CatergoriaUiState.kt</code></strong> y <strong><code>ContactoUiState.kt</code></strong> que ser치 la que nos permita gestionar el estado del componente.</p>
</div>
<div style="width: auto">
<p align="center" style="zoom:1" class="puml"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="229px" preserveAspectRatio="none" style="width:219px;height:229px;background:#FFFFFF;" version="1.1" viewBox="0 0 219 229" width="219px" zoomAndPan="magnify"><defs></defs><g><rect fill="#EEEEEE" height="18.0938" style="stroke:#000000;stroke-width:1.0;" width="71" x="6" y="6"></rect><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="8" y="20.457">Android</text><line style="stroke:#000000;stroke-width:1.0;" x1="66" x2="66" y1="6" y2="24.0938"></line><polygon fill="#000000" points="69,12,75,12,72,19.0938" style="stroke:#000000;stroke-width:1.0;"></polygon><path d="M17,31.1875 L17,33.1875 L25,33.1875 L25,32.1875 L20,32.1875 L20,31.1875 L17,31.1875 M17,34.1875 L17,38.6875 C17,38.9675 17.22,39.1875 17.5,39.1875 L24.5,39.1875 C24.78,39.1875 25,38.9675 25,38.6875 L25,34.1875 L17,34.1875 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="26" y="39.5508">[com.ahorcado]</text><path d="M27,46.2813 L27,48.2813 L35,48.2813 L35,47.2813 L30,47.2813 L30,46.2813 L27,46.2813 M27,49.2813 L27,53.7813 C27,54.0613 27.22,54.2813 27.5,54.2813 L34.5,54.2813 C34.78,54.2813 35,54.0613 35,53.7813 L35,49.2813 L27,49.2813 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="36" y="54.6445">[data]</text><path d="M27,61.375 L27,63.375 L35,63.375 L35,62.375 L30,62.375 L30,61.375 L27,61.375 M27,64.375 L27,68.875 C27,69.155 27.22,69.375 27.5,69.375 L34.5,69.375 C34.78,69.375 35,69.155 35,68.875 L35,64.375 L27,64.375 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="36" y="69.7383">[models]</text><path d="M27,76.4688 L27,78.4688 L35,78.4688 L35,77.4688 L30,77.4688 L30,76.4688 L27,76.4688 M27,79.4688 L27,83.9688 C27,84.2488 27.22,84.4688 27.5,84.4688 L34.5,84.4688 C34.78,84.4688 35,84.2488 35,83.9688 L35,79.4688 L27,79.4688 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="16" x="36" y="84.832">[ui]</text><path d="M37,91.5625 L37,93.5625 L45,93.5625 L45,92.5625 L40,92.5625 L40,91.5625 L37,91.5625 M37,94.5625 L37,99.0625 C37,99.3425 37.22,99.5625 37.5,99.5625 L44.5,99.5625 C44.78,99.5625 45,99.3425 45,99.0625 L45,94.5625 L37,94.5625 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56" x="46" y="99.9258">[features]</text><path d="M47,106.6563 L47,108.6563 L55,108.6563 L55,107.6563 L50,107.6563 L50,106.6563 L47,106.6563 M47,109.6563 L47,114.1563 C47,114.4363 47.22,114.6563 47.5,114.6563 L54.5,114.6563 C54.78,114.6563 55,114.4363 55,114.1563 L55,109.6563 L47,109.6563 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="79" x="56" y="115.0195">[components]</text><path d="M47,121.75 L47,123.75 L55,123.75 L55,122.75 L50,122.75 L50,121.75 L47,121.75 M47,124.75 L47,129.25 C47,129.53 47.22,129.75 47.5,129.75 L54.5,129.75 C54.78,129.75 55,129.53 55,129.25 L55,124.75 L47,124.75 " fill="#0000FF" style="stroke:;stroke-width:0.0;stroke-dasharray:;"></path><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="83" x="56" y="130.1133">[vercontactos]</text><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="56" y="145.207">CatergoriaUiState.kt</text><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="106" x="56" y="160.3008">ContactoUiState.kt</text><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="156" x="56" y="175.3945">ItemListaContactosEvent.kt</text><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="111" x="56" y="190.4883">ContactoListItem.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="9" x="26" y="205.582">...</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="26" y="220.6758">AgendaApplication.kt</text><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="9" y="33.6406"></rect><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="49.7344"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="49.7344" y2="49.7344"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="64.8281"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="64.8281" y2="64.8281"></line><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="19" y="78.9219"></rect><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="79.9219"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="79.9219" y2="79.9219"></line><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="94.0156"></rect><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="81.9219" y2="95.0156"></line><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="95.0156" y2="95.0156"></line><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="97.0156" y2="110.1094"></line><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="110.1094" y2="110.1094"></line><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="39" y="124.2031"></rect><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="97.0156" y2="125.2031"></line><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="125.2031" y2="125.2031"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="127.2031" y2="140.2969"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="140.2969" y2="140.2969"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="127.2031" y2="155.3906"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="155.3906" y2="155.3906"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="127.2031" y2="170.4844"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="170.4844" y2="170.4844"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="127.2031" y2="185.5781"></line><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="185.5781" y2="185.5781"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="200.6719"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="200.6719" y2="200.6719"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="215.7656"></line><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="215.7656" y2="215.7656"></line><!--SRC=[XP5VIyCm5CNVyodka-mFbZcdI15npauTAmpRxKKKxfgi1jlSaTuCPFZTJTKvDv2HXt3F-TsStEIwOhHSOS52hCLBtqXBMhw8TIhQS7cqe48gU_MKKHdWAzaC9JsBzbzB8kEUL99KHRKdEbqBRMYrjjf28JkhgkTMg_PsJP-v9ACCxzWP5MJ3UU7KrHPTAPkHOSoOVk5zUe2iR4vMurGdx8lWZVz3Vyuw23wmAiVQF-6ceufM_iA7JwwRwkOD2K4Gr5i_LqPYVxaiT8QioNX0VFXrxVNlNveKQ7WQZy4FNNa2Je9kfziBJXlfguEXciF96NGxOQyJTivW4ALGsqtHk9kCeI9dCmNInrizTtL2KunmXV3e3EjIXL1NZJHkGX9jH8ZCIbiofPzDZ6RnDmJtnCcI-0i-xntVQ8P4MNyjcCNYLYtG5UnRCvBQv25Cq-7nXHYZoHtcFaXLOa0-mBw742MV]--></g></svg></p></div>
</div>
<div style="page-break-after:always;"></div>
<h4 id="link-categoriauistatektassetscodigoejercicios3_61_lista_contactos_agendacatergoriauistatekt"><a href="../../assets/codigo/ejercicios3_6/1_lista_contactos_agenda/CatergoriaUiState.kt">游댕 CategoriaUiState.kt</a> </h4>
<p>Definimos un primer data class denominado <strong><code>CatergoriaUiState</code></strong> que nos permitir치 gestionar el estado de las categor칤as de un contacto. Para ello definimos una serie de propiedades booleanas que nos indicar치n si el contacto pertenece o no a una categor칤a y una serie de propiedades de tipo <strong><code>ImageVector</code></strong> que nos permitir치n almacenar el icono asociado a cada categor칤a.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">CatergoriaUiState</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> amigos<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> amigosIcon <span class="token operator">:</span> ImageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>SportsEsports<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> trabajo<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> trabajoIcon <span class="token operator">:</span> ImageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>Work<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> familia<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> familiaIcon <span class="token operator">:</span> ImageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>FamilyRestroom<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> emergencias<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> emergenciasIcon <span class="token operator">:</span> ImageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Filled<span class="token punctuation">.</span>MedicalServices
<span class="token punctuation">)</span>
</code></pre><h4 id="link-contactouistatektassetscodigoejercicios3_61_lista_contactos_agendacontactouistatekt"><a href="../../assets/codigo/ejercicios3_6/1_lista_contactos_agenda/ContactoUiState.kt">游댕 ContactoUiState.kt</a> </h4>
<p>Definimos ahora un data class denominado <strong><code>ContactoUiState</code></strong> que nos permitir치 gestionar el estado de un contacto como ya hicimos en otra parte del curso. Usaremos la clase <strong><code>CatergoriaUiState</code></strong> para gestionar las categor칤as a las que pertenece el contacto.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">ContactoUiState</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> id<span class="token operator">:</span> Int <span class="token operator">=</span> Instant<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>epochSecond<span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> apellidos<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> foto<span class="token operator">:</span> ImageBitmap<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> correo<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> telefono<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">""</span></span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> categorias <span class="token operator">:</span> CatergoriaUiState <span class="token operator">=</span> <span class="token function">CatergoriaUiState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><p>En estas clases podemos definir m칠todos de extensi칩n que me ayuden a transformar los datos de un <strong><code>Contacto</code></strong> en el modelo en un objeto de tipo <strong><code>ContactoUiState</code></strong>.</p>
<blockquote>
<p>游늷 <strong>Nota</strong>: Estas clases de estado posiblemente puedan ser reutilizadas en el futuro para otros componentes.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h4 id="link-itemlistacontactoseventktassetscodigoejercicios3_61_lista_contactos_agendaitemlistacontactoseventkt"><a href="../../assets/codigo/ejercicios3_6/1_lista_contactos_agenda/ItemListaContactosEvent.kt">游댕 ItemListaContactosEvent.kt</a> </h4>
<p>Definiendo un <strong><code>sealed class</code></strong> denominado <strong><code>ItemListaContactosEvent</code></strong> que nos permitir치 gestionar los eventos que se produzcan sobre el componente. De momento solo definiremos un par de eventos denominado <strong><code>OnClickContacto</code></strong> que nos permitir치 gestionar el evento de pulsaci칩n sobre un contacto y <strong><code>OnDeleteContacto</code></strong> para gestionar la eliminaci칩n del mismo. Pero m치s adelante tendremos m치s eventos como por ejemplo <strong><code>OnEditContacto</code></strong> para editar el contacto seleccionado y al utilizar una clase sellada ser치 m치s f치cil de gestionar la elevaci칩n de los eventos a trav칠s de <em>compose</em>.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-sealed">sealed</span> <span class="token keyword keyword-class">class</span> ItemListaContactosEvent <span class="token punctuation">{</span>
    <span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">OnClickContacto</span><span class="token punctuation">(</span><span class="token keyword keyword-val">val</span> contacto <span class="token operator">:</span> ContactoUiState<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ItemListaContactosEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-object">object</span> OnDeleteContacto <span class="token operator">:</span> <span class="token function">ItemListaContactosEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><h4 id="link-contactolistitemktassetscodigoejercicios3_61_lista_contactos_agendacontactolistitemkt"><a href="../../assets/codigo/ejercicios3_6/1_lista_contactos_agenda/ContactoListItem.kt">游댕 ContactoListItem.kt</a> </h4>
<p>En el siguiente fuente encontraremos la propuesta de interfaz de las im치genes anteriores para el componente <strong><code>ContactoListItem</code></strong>. Vamos a comentar c칩mo hemos estructurado el mismo. Comentando algunos de los 'composables' en los que se ha dividido el componente...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token comment">// Muestra los iconos con las categor칤as del contacto, por eso</span>
<span class="token comment">// recibe 칰nicamente el estado de las categor칤as.</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">Categorias</span><span class="token punctuation">(</span>categoriasState<span class="token operator">:</span> CatergoriaUiState<span class="token punctuation">)</span>
</code></pre><div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 80%">
<p>Por ejemplo si tenemos a <strong><code>true</code></strong> las categor칤as <strong><code>Amigos</code></strong> y <strong><code>Familia</code></strong>. Mostrar치 la imagen de la derecha.</p>
</div>
<div style="width: auto; margin-left: 2px">
<img height="50px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto_iconos_categorias.png">
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token comment">// Muestra todos los datos del contacto menos la imagen asociada.</span>
<span class="token comment">// Por esa raz칩n los recibe cada uno de los datos del contacto</span>
<span class="token comment">// excepto la imagen.</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">DatosContacto</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    apellidos<span class="token operator">:</span> String<span class="token punctuation">,</span>
    correo<span class="token operator">:</span> String<span class="token punctuation">,</span>
    telefono<span class="token operator">:</span> String<span class="token punctuation">,</span>
    categorias<span class="token operator">:</span> CatergoriaUiState
<span class="token punctuation">)</span>
</code></pre></div>
<div style="width: auto; margin-left: 2px">
<img height="75px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto_datos_contacto.png">
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token comment">// Muestra OutlinedIconButton con los iconos de las </span>
<span class="token comment">// acciones posibles sobre ul contacto seleccionado.</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">AccionesContacto</span><span class="token punctuation">(</span>
    onLlamarClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    onCorreoClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    onEditClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    onDeleteClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div>
<div style="width: auto; margin-left: 2px">
<img height="30px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto_opciones_sobre_seleccion.png">
</div>
</div>
<blockquote>
<p>游늷 <strong>Nota</strong>: Los siguientes <em>composables</em> tendr치n animaciones. No vamos a entrar en ellas en el presente curso por falta de tiempo. Pero, puedes aprender todos los conceptos relacionados con la misma en el <strong><a href="https://www.youtube.com/watch?v=HNSKJIQtb4c">siguiente videotutorial</a></strong>.</p>
</blockquote>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalLayoutApi<span class="token operator">::</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span>
<span class="token comment">// Muestra la imagen del contacto, los datos del contacto </span>
<span class="token comment">// y un perque침o icono que tendr치 una animaci칩n de rotaci칩n </span>
<span class="token comment">// cuando el contacto est칠 seleccionado.</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">ContenidoPrincipalCardContacto</span><span class="token punctuation">(</span>
    contactoUiState<span class="token operator">:</span> ContactoUiState<span class="token punctuation">,</span>
    seleccionadoState<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier
<span class="token punctuation">)</span>
</code></pre></div>
<div style="width: auto; margin-left: 2px">
<img height="40px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto.png">
</div>
</div>
<div style="page-break-after:always;"></div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<p>Por 칰timo, vamos a crear la tarjeta que contendr치 el componente <strong><code>ContactoListItem</code></strong>. En ella definiremos un <strong><code>ElevatedCard</code></strong> que contendr치 en una columna el componente <strong><code>ContenidoPrincipalCardContacto</code></strong> y al estar seleccionada (<strong><code>seleccionadoState == true</code></strong>) mostrar치 el componente <strong><code>AccionesContacto</code></strong>. Esto provocar치 un cambio de tama침o del contenido del layout que realizaremos de forma progrem치tica con la funci칩n <strong><code>animateContentSize</code></strong>.</p>
</div>
<div style="width: auto; margin-left: 2px">
<img height="70px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/item_contacto_seleccionado.png">
</div>
</div>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalMaterial3Api<span class="token operator">::</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">ContactoListItem</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    contactoUiState<span class="token operator">:</span> ContactoUiState<span class="token punctuation">,</span>
    seleccionadoState<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    onContactoClicked<span class="token operator">:</span> <span class="token punctuation">(</span>ContactoUiState<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">,</span>
    onEditClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">,</span>
    onDeleteClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit
<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">ElevatedCard</span><span class="token punctuation">(</span>
    onClick <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">onContactoClicked</span><span class="token punctuation">(</span>contactoUiState<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        Modifier
            <span class="token punctuation">.</span><span class="token function">fillMaxWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">animateContentSize</span><span class="token punctuation">(</span>
                animationSpec <span class="token operator">=</span> <span class="token function">tween</span><span class="token punctuation">(</span>
                    durationMillis <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>
                    easing <span class="token operator">=</span> LinearOutSlowInEasing
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Column <span class="token punctuation">{</span>
        <span class="token function">ContenidoPrincipalCardContacto</span><span class="token punctuation">(</span>
            contactoUiState <span class="token operator">=</span> contactoUiState<span class="token punctuation">,</span>
            seleccionadoState <span class="token operator">=</span> seleccionadoState
        <span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>seleccionadoState<span class="token punctuation">)</span>
            <span class="token function">AccionesContacto</span><span class="token punctuation">(</span>
                onEditClicked <span class="token operator">=</span> onEditClicked<span class="token punctuation">,</span>
                onDeleteClicked <span class="token operator">=</span> onDeleteClicked
            <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div style="page-break-after:always;"></div>
<h3 id="paso-2-crear-el-feature-listacontactosscreen">Paso 2: Crear el feature ListaContactosScreen </h3>
<p>Vamos a definir ahora dentro del paquete <strong><code>vercontactos</code></strong> un <em>Screen</em> que visualice la lista de contactos usando <strong><code>LazyColumn</code></strong>. Crearemos pues <strong><code>ListaContactosScreen.kt</code></strong> y definiremos el siguiente c칩digo, donde vamos a usar <strong><code>ContactoListItem</code></strong> para visualizar cada uno de los contactos de la lista.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalFoundationApi<span class="token operator">::</span><span class="token keyword keyword-class">class</span><span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">ListaContactosScreen</span><span class="token punctuation">(</span>
    modifier<span class="token operator">:</span> Modifier <span class="token operator">=</span> Modifier<span class="token punctuation">,</span>
    contactosState<span class="token operator">:</span> List<span class="token operator">&lt;</span>ContactoUiState<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    contactoSeleccionadoState<span class="token operator">:</span> ContactoUiState<span class="token operator">?</span><span class="token punctuation">,</span>
    onContactoClicked<span class="token operator">:</span> <span class="token punctuation">(</span>ContactoUiState<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">,</span>
    onAddClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    onEditClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    onDeleteClicked<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Box</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> modifier<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">LazyColumn</span><span class="token punctuation">(</span>
            contentPadding <span class="token operator">=</span> <span class="token function">PaddingValues</span><span class="token punctuation">(</span>all <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
            verticalArrangement <span class="token operator">=</span> Arrangement<span class="token punctuation">.</span><span class="token function">spacedBy</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">items</span><span class="token punctuation">(</span>
                contactosState<span class="token punctuation">,</span>
                key <span class="token operator">=</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>id <span class="token punctuation">}</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span> contacto <span class="token operator">-&gt;</span>
                <span class="token function">ContactoListItem</span><span class="token punctuation">(</span>
                    modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">animateItemPlacement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    contactoUiState <span class="token operator">=</span> contacto<span class="token punctuation">,</span>
                    seleccionadoState <span class="token operator">=</span> contactoSeleccionadoState
                        <span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>id <span class="token operator">==</span> contacto<span class="token punctuation">.</span>id <span class="token punctuation">}</span> <span class="token operator">?:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    onContactoClicked <span class="token operator">=</span> onContactoClicked<span class="token punctuation">,</span>
                    onEditClicked <span class="token operator">=</span> onEditClicked<span class="token punctuation">,</span>
                    onDeleteClicked <span class="token operator">=</span> onDeleteClicked
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">FloatingActionButton</span><span class="token punctuation">(</span>
            modifier <span class="token operator">=</span> Modifier
                <span class="token punctuation">.</span><span class="token function">align</span><span class="token punctuation">(</span>Alignment<span class="token punctuation">.</span>BottomEnd<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">.</span>dp<span class="token punctuation">)</span><span class="token punctuation">,</span>
            onClick <span class="token operator">=</span> onAddClicked
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Icon</span><span class="token punctuation">(</span>imageVector <span class="token operator">=</span> Icons<span class="token punctuation">.</span>Default<span class="token punctuation">.</span>Add<span class="token punctuation">,</span> contentDescription <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Crear Contacto"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>Vamos a definir un preview para la lista de contactos que acceda directamente a <strong><code>ContactoDaoMock</code></strong>. Este preview adem치s de para visualizar la lista nos puede servir para tener una proto-implementaci칩n de la l칩gica de negocio de la aplicaci칩n que ir치 en el <strong><code>ViewModel</code></strong>.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token annotation builtin">@Preview</span><span class="token punctuation">(</span>
    name <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"PORTRAIT"</span></span><span class="token punctuation">,</span>
    device <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"spec:width=360dp,height=800dp,dpi=480"</span></span><span class="token punctuation">,</span>
    showBackground <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">)</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">ListaContactosScreenTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> contactos <span class="token operator">=</span> <span class="token function">ContactoDaoMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span>
        <span class="token function">ContactoUiState</span><span class="token punctuation">(</span>
            id <span class="token operator">=</span> it<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            foto <span class="token operator">=</span> it<span class="token punctuation">.</span>foto<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> Imagenes<span class="token punctuation">.</span><span class="token function">base64ToBitmap</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            nombre <span class="token operator">=</span> it<span class="token punctuation">.</span>nombre<span class="token punctuation">,</span>
            apellidos <span class="token operator">=</span> it<span class="token punctuation">.</span>apellidos<span class="token punctuation">,</span>
            telefono <span class="token operator">=</span> it<span class="token punctuation">.</span>telefono<span class="token punctuation">,</span>
            correo <span class="token operator">=</span> it<span class="token punctuation">.</span>correo<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Definimos un estado que nos permitir치 gestionar el contacto</span>
    <span class="token comment">// actualmente seleccionado y su manejador</span>
    <span class="token keyword keyword-var">var</span> contactoSeleccionadoState<span class="token operator">:</span> ContactoUiState<span class="token operator">?</span> <span class="token keyword keyword-by">by</span> remember <span class="token punctuation">{</span> <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-var">var</span> onContactoClicked<span class="token operator">:</span> <span class="token punctuation">(</span>ContactoUiState<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit <span class="token operator">=</span> <span class="token punctuation">{</span> c <span class="token operator">-&gt;</span>
        contactoSeleccionadoState <span class="token operator">=</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>contactoSeleccionadoState <span class="token operator">==</span> <span class="token keyword keyword-null">null</span>
                <span class="token operator">||</span> c<span class="token punctuation">.</span>id <span class="token operator">!=</span> contactoSeleccionadoState<span class="token operator">!!</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> c<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-null">null</span>
    <span class="token punctuation">}</span>

    <span class="token function">ListaContactosScreen</span><span class="token punctuation">(</span>
        modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contactosState <span class="token operator">=</span> contactos<span class="token punctuation">,</span>
        contactoSeleccionadoState <span class="token operator">=</span> contactoSeleccionadoState<span class="token punctuation">,</span>
        onContactoClicked <span class="token operator">=</span> onContactoClicked<span class="token punctuation">,</span>
        onAddClicked <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        onEditClicked <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        onDeleteClicked <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div style="page-break-after:always;"></div>
<h3 id="paso-3-definir-el-viewmodel">Paso 3: Definir el ViewModel </h3>
<p>Ahora vamos a definir un <strong><code>ViewModel</code></strong> para la pantalla de la lista de contactos. Para ello crearemos dentro del paquete <strong><code>vercontactos</code></strong> el fuente <strong><code>ListaContactosViewModel.kt</code></strong>.</p>
<blockquote>
<p>九 <strong>Importante</strong>: Si estas utilizando inyecci칩n de dependencias puedes seguir us치ndola aunque en este caso no lo vamos ha hacer por simplificar. Adem치s, sino la has implementado es un buen momento para hacerlo y terminar de entender el concepto.</p>
</blockquote>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-class">class</span> ListaContactosViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Creamos un repositorio de contactos. Mejor inyectarlo con Hilt</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-val">val</span> contactoRepository <span class="token operator">=</span> <span class="token function">ContactoRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Estado que nos permitir치 gestionar el contacto actualmente </span>
    <span class="token comment">// seleccionado, valdr치 null si no hay ninguno   </span>
    <span class="token keyword keyword-var">var</span> contatoSleccionadoState<span class="token operator">:</span> ContactoUiState<span class="token operator">?</span> <span class="token keyword keyword-by">by</span> <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-set">set</span>
    <span class="token comment">// Creamos un estado con la lista de contactos y llamamos a una</span>
    <span class="token comment">// funci칩n privada que se encargar치 del mapeo entre el Modelo y el UiState</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-var">var</span> _listaContactosState <span class="token keyword keyword-by">by</span> <span class="token function">mutableStateOf</span><span class="token punctuation">(</span><span class="token function">getContactos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// El getter solo nos permite acceder al estado pero no modificarlo</span>
    <span class="token keyword keyword-val">val</span> listaContactosState<span class="token operator">:</span> List<span class="token operator">&lt;</span>ContactoUiState<span class="token operator">&gt;</span>
        <span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> _listaContactosState
    <span class="token comment">// Funci칩n privada que nos permite obtener la lista de contactos </span>
    <span class="token comment">// mapeando entre el Modelo y el UiState</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-fun">fun</span> <span class="token function">getContactos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>ContactoUiState<span class="token operator">&gt;</span> <span class="token operator">=</span> contactoRepository<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toContactoUiState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toMutableList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// M칠todo que nos permite gestionar los eventos que se produzcan en </span>
    <span class="token comment">// nuestro caso la selecci칩n de un contacto y su eliminaci칩n</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">onItemListaContatoEvent</span><span class="token punctuation">(</span>e<span class="token operator">:</span> ItemListaContactosEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-when">when</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-is">is</span> ItemListaContactosEvent<span class="token punctuation">.</span>OnClickContacto <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                contatoSleccionadoState <span class="token operator">=</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>contatoSleccionadoState<span class="token operator">?</span><span class="token punctuation">.</span>id <span class="token operator">!=</span> e<span class="token punctuation">.</span>contacto<span class="token punctuation">.</span>id<span class="token punctuation">)</span> e<span class="token punctuation">.</span>contacto <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-null">null</span>
            <span class="token punctuation">}</span>
            <span class="token keyword keyword-is">is</span> ItemListaContactosEvent<span class="token punctuation">.</span>OnDeleteContacto <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                contactoRepository<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>contatoSleccionadoState<span class="token operator">!!</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
                <span class="token comment">// Una vez hemos borrado deberemos actualizar la lista de </span>
                <span class="token comment">// contactos para que se actualice el estado de la misma</span>
                _listaContactosState <span class="token operator">=</span> <span class="token function">getContactos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div style="page-break-after:always;"></div>
<h3 id="paso-4-vamos-usar-nuestro-screeen-con-el-viewmodel">Paso 4: Vamos usar nuestro Screeen con el ViewModel </h3>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-class">class</span> MainActivity <span class="token operator">:</span> <span class="token function">ComponentActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-fun">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-super">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>

        <span class="token keyword keyword-val">val</span> vm <span class="token operator">:</span> ListaContactosViewModel <span class="token keyword keyword-by">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        setContent <span class="token punctuation">{</span>
            AgendaTheme <span class="token punctuation">{</span>
                <span class="token function">Surface</span><span class="token punctuation">(</span>
                    modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    color <span class="token operator">=</span> MaterialTheme<span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>background
                <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">ListaContactosScreen</span><span class="token punctuation">(</span>
                        contactosState <span class="token operator">=</span> vm<span class="token punctuation">.</span>listaContactosState<span class="token punctuation">,</span>
                        contactoSeleccionadoState <span class="token operator">=</span> vm<span class="token punctuation">.</span>contatoSleccionadoState<span class="token punctuation">,</span>
                        onContactoClicked <span class="token operator">=</span> <span class="token punctuation">{</span> c <span class="token operator">-&gt;</span>
                            vm<span class="token punctuation">.</span><span class="token function">onItemListaContatoEvent</span><span class="token punctuation">(</span>
                                ItemListaContactosEvent<span class="token punctuation">.</span><span class="token function">OnClickContacto</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        onDeleteClicked <span class="token operator">=</span> <span class="token punctuation">{</span>
                            vm<span class="token punctuation">.</span><span class="token function">onItemListaContatoEvent</span><span class="token punctuation">(</span>
                                ItemListaContactosEvent<span class="token punctuation">.</span>OnDeleteContacto<span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 50%">
<p>La imagen final de la aplicaci칩n ser치 la siguiente. En ella podemos ver que al seleccionar un contacto se nos muestran una serie de botones que nos permitir치n realizar acciones sobre el mismo. En este caso solo tenemos implementada la eliminaci칩n del contacto.</p>
<p>Adem치s, tenemos un bot칩n flotante que nos permitir치 a침adir un nuevo contacto. En este caso no tenemos implementada la funcionalidad pero m치s adelante lo haremos.</p>
</div>
<div style="width: auto">
<img height="300px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/lista_contactos_screen1.png">
</div>
<div style="width: auto">
<img height="300px" src="../../assets/imagenes/ejercicios3_6/1_lista_contactos_agenda/lista_contactos_screen2.png">
</div>
</div>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>