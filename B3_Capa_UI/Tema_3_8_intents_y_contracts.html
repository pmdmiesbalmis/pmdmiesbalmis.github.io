<!DOCTYPE html><html><head>
      <title>PMDM 2潞 DAM  Tema 3.8 - Intents y Contracts</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<p><style>/* 
A帽ade 

@import "../EstilosPersonalizadosMarkdownEnhanced.less"

justo despu茅s del front matter 
*/
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
</style></p>
<h1 id="tema-38---intents-y-contracts">Tema 3.8 - Intents y Contracts </h1>
<p>Descargar estos apuntes <a href="./Tema_3_8_intents_y_contracts.pdf">pdf</a> o <a href="./Tema_3_8_intents_y_contracts.html">html</a></p>
<h2 id="铆ndice">ndice </h2>

<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#introducci贸n" class="md-toc-link">
            <p>Introducci贸n</p>

          </a></div><details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#tipos-de-intents" class="md-toc-link"><p>Tipos de Intents</p>
</a>
          </summary>
        <div>
          <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#intents-expl铆citos" class="md-toc-link"><p>Intents Expl铆citos</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#abriendo-otra-aplicaci贸n-desde-nuestra-aplicaci贸n" class="md-toc-link">
            <p>Abriendo otra aplicaci贸n desde nuestra aplicaci贸n</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:24px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#intents-impl铆citos" class="md-toc-link"><p>Intents Impl铆citos</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#enviar-un-correo-electr贸nico-escogiendo-la-aplicaci贸n" class="md-toc-link">
            <p>Enviar un correo electr贸nico escogiendo la aplicaci贸n</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#abrir-una-localizaci贸n-en-google-maps" class="md-toc-link">
            <p>Abrir una localizaci贸n en Google Maps</p>

          </a></div>
        </div>
      </details>
    
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 id="introducci贸n">Introducci贸n </h2>
<ul>
<li>
<p><strong>Intents</strong></p>
<ul>
<li>Documentaci贸n oficial: <strong><a href="https://developer.android.com/guide/components/intents-filters?hl=es-419">Intents</a></strong></li>
<li>Documentaci贸n oficial: <strong><a href="https://developer.android.com/training/basics/intents?hl=es-419">Interactuando con otras Apps</a></strong></li>
<li>V铆deo Intents: <strong><a href="https://www.youtube.com/watch?v=2hIY1xuImuQ">Philipp Lackner (Ingl茅s)</a></strong></li>
</ul>
</li>
<li>
<p><strong>Permissions</strong></p>
<ul>
<li>Documentaci贸n oficial: <strong><a href="https://developer.android.com/guide/topics/permissions/overview?hl=es-419">Permisos</a></strong></li>
<li>V铆deo Permisos 1: <strong><a href="https://www.youtube.com/watch?v=zCAx4WZ98rs">Android Developers</a></strong></li>
<li>V铆deo Permisos 2: <strong><a href="https://www.youtube.com/watch?v=x38dYUm7tCY">Android Developers</a></strong></li>
<li>V铆deo Permisos: <strong><a href="https://www.youtube.com/watch?v=D3JCtaK8LSU">Philipp Lackner (Ingl茅s)</a></strong></li>
</ul>
</li>
<li>
<p><strong>Permissions in Compose con Accompanist Library</strong> (Experimental)</p>
<ul>
<li>V铆deo: <strong><a href="https://www.youtube.com/watch?v=imFJZ4Kbv_g">Martin Kiperszmid (Castellano)</a></strong></li>
<li>V铆deo: <strong><a href="https://www.youtube.com/watch?v=uO6igFsa5y0">Stevdza-San (Ingl茅s)</a></strong></li>
<li>Documentaci贸n librer铆a: <strong><a href="https://google.github.io/accompanist/permissions/">Accompanist</a></strong></li>
</ul>
</li>
</ul>
<p>Una <strong>Intent</strong> es un objeto de mensajer铆a que puedes usar para solicitar una acci贸n de otro componente de una app. Si bien las intents facilitan la comunicaci贸n entre componentes de varias formas, existen tres casos de uso principales:</p>
<ol>
<li>Iniciar una actividad.</li>
<li>Iniciar un servicio.</li>
<li>Transmitir una emisi贸n o broadcast.</li>
</ol>
<p>Nosotros en este tema vamos a centrarnos en el primer caso de uso que es, <strong>Iniciar una actividad</strong>. Como se puede deducir es una funcionalidad del API de Android que nos permite iniciar una actividad desde otra actividad incluso si la actividad pertenece a otra aplicaci贸n diferente como por ejemplos hacer una llamada telef贸nica, enviar un correo electr贸nico, abrir una p谩gina web, etc.</p>
<blockquote>
<p> <strong>Dercarga</strong>: El proyecto con el c贸digo delos ejemplos de este tema en el siguiente <strong><a href="assets/codigo/tema_3_8/intents_ejemplo.zip">enlace</a></strong></p>
</blockquote>
<div style="page-break-after:always;"></div>
<h2 id="tipos-de-intents">Tipos de Intents </h2>
<h3 id="intents-expl铆citos">Intents Expl铆citos </h3>
<p>Especifican qu茅 aplicaci贸n las administrar谩, ya sea incluyendo el <strong>nombre del paquete de la app de destino</strong> o el nombre de clase del componente completamente calificado. Normalmente, el usuario usa una intent expl铆cita para iniciar un componente en su propia aplicaci贸n porque conoce el nombre de clase de la actividad o el servicio que desea iniciar. Por ejemplo, puedes utilizarla para iniciar una actividad nueva en respuesta a una acci贸n del usuario o iniciar un servicio para descargar un archivo en segundo plano.</p>
<h4 id="abriendo-otra-aplicaci贸n-desde-nuestra-aplicaci贸n">Abriendo otra aplicaci贸n desde nuestra aplicaci贸n </h4>
<p>Para abrir otra aplicaci贸n desde nuestra aplicaci贸n, debemos crear un objeto <strong>Intent</strong> y especificar el <strong>nombre del paquete de la aplicaci贸n de destino</strong>. Por ejemplo, si queremos abrir la aplicaci贸n de <strong>Chrome</strong> desde nuestra aplicaci贸n, debemos crear un objeto <strong>Intent</strong> y especificar el nombre del paquete de la aplicaci贸n de destino que en este caso es <strong><code>com.android.chrome</code></strong>. Para ello usaremos el m茅todo <strong><code>setPackage()</code></strong> del objeto <strong>Intent</strong>. Una vez creado el objeto <strong>Intent</strong> lo pasaremos como par谩metro al m茅todo <strong><code>startActivity()</code></strong>. Como el m茅todo <strong><code>startActivity()</code></strong> es un m茅todo de la clase <strong>Context</strong>, necesitamos un objeto de esta clase para poder llamar al m茅todo. Para ello usaremos el <strong><code>LocalContext.current</code></strong> que nos proporciona <strong>Jetpack Compose</strong>. El c贸digo ser铆a el siguiente...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token comment">// IntentExplicito.kt</span>

<span class="token keyword keyword-fun">fun</span> Context<span class="token punctuation">.</span><span class="token function">openChrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Creamos un Intent con la acci贸n ACTION_MAIN</span>
    <span class="token comment">// que es abrir una actividad principal de la aplicaci贸n Chrome.</span>
    <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_MAIN<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">also</span> <span class="token punctuation">{</span>
        it<span class="token punctuation">.</span>`<span class="token keyword keyword-package">package</span>` <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"com.android.chrome"</span></span>
        <span class="token comment">// Lanza ActivityNotFoundException si no est谩 instalada la aplicaci贸n.</span>
        <span class="token function">startActivity</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">IntentOpenChrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> context <span class="token operator">=</span> LocalContext<span class="token punctuation">.</span>current
    <span class="token function">Box</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contentAlignment <span class="token operator">=</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>Alignment<span class="token punctuation">.</span>Center<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Button</span><span class="token punctuation">(</span>onClick <span class="token operator">=</span> <span class="token punctuation">{</span> context<span class="token punctuation">.</span><span class="token function">openChrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Open Chrome"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h5 id="saber-el-nombre-del-paquete-de-la-app-de-destino">Saber el nombre del paquete de la app de destino </h5>
<p>Para saber el nombre del paquete de la app de destino, podemos usar la herramienta <strong>adb.exe</strong> (<a href="https://developer.android.com/studio/command-line/adb?hl=es-419">Android Debug Bridge</a>) instalada junto al SDK de Android. Para ello debemos abrir una consola de comandos e ir a la carpeta <strong><code>platform-tools</code></strong> donde est茅 instalado el SDK para nuestro usuario. (Ej: <strong><code>C:\Users\alumno\AppData\Local\Android\Sdk\platform-tools&gt;</code></strong>). Otras opci贸n es a帽adir esta carpeta al <strong>Path</strong> de nuestro usuario para que podamos ejecutar los comandos desde cualquier ubicaci贸n, incluso desde la ventana del terminal de AndroidStudio.<br>
Una vez tenemos acceso a la herramienta <strong>adb.exe</strong> seguiremos estos pasos:</p>
<ol>
<li>
<p>Arrancaremos la m谩quina virtual de nuestro emulador de Android <strong>desde el mismo Android Studio</strong> o desde un terminal si sabemos el nombre de la m谩quina. Por ejemplo, si nuestro emulador se llama <strong>Pixel_3a_API_33</strong> ejecutaremos el comando:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>alumno<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Android<span class="token punctuation">\</span>Sdk<span class="token punctuation">\</span>tools<span class="token punctuation">\</span>emulator.exe <span class="token parameter variable">-avd</span> Pixel_3a_API_33
</code></pre></li>
<li>
<p>Con el emulador arrancado, ejecutaremos el comando <strong><code>adb shell</code></strong> para acceder a la consola del emulador. Por ejemplo:</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>alumno<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Local<span class="token punctuation">\</span>Android<span class="token punctuation">\</span>Sdk<span class="token punctuation">\</span>platform-tools<span class="token operator">&gt;</span>adb shell
emu64x:/ $
</code></pre></li>
<li>
<p>Ahora ejecutaremos el comando <strong><code>pm list packages</code></strong> para listar todos los paquetes de aplicaciones instaladas en el emulador y si queremos buscar una aplicaci贸n en concreto podemos usar el comando <strong><code>grep</code></strong>. Por ejemplo, si queremos saber el nombre del paquete de la app de <strong>Chrome</strong>, ejecutaremos el comando:</p>
<pre data-role="codeBlock" data-info="bash {highlight=2}" class="language-bash bash" data-line="2"><code>emu64x:/ $ pm list packages <span class="token operator">|</span> <span class="token function">grep</span> chrome
package:com.android.chrome
emu64x:/ $
</code><div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div></pre></li>
</ol>
<div style="display: flex; justify-content: space-between; align-items: top; margin-top: 15px">
<div style="width: 50%">
<p>Otra forma m谩s sencilla es a trav茅s de <strong>Android Studio</strong>. Una vez arrancado el emulador, abriremos la ventana <strong>Device File Explorer</strong> situado a la derecha como se muestra en la imagen de ejemplo y navegaremos hasta la carpeta <strong><code>data/data</code></strong> donde se encuentran todas las aplicaciones instaladas en el emulador. Ahora solo tenemos que buscar la carpeta de la aplicaci贸n que nos interese que se corresponde con el nombre del paquete de la aplicaci贸n.</p>
</div>
<div style="width: auto">
<img height="600px" src="assets/imagenes/tema_3_8/ubicacion_aplicaciones.png">
</div>
</div>
<div style="page-break-after:always;"></div>
<h3 id="intents-impl铆citos">Intents Impl铆citos </h3>
<p>Son los que m谩s interesantes para nosotros. Puesto que no siempre sabemos que aplicaciones vamos a tener instaladas.</p>
<p>No nombran el componente espec铆fico, pero, en cambio, declaran una acci贸n general para realizar, lo cual permite que un componente de otra aplicaci贸n la maneje. Por ejemplo, si quieres enviar un correo electr贸nico, no necesitas saber qu茅 aplicaci贸n de correo electr贸nico tiene el usuario instalada; simplemente debes enviar una intent impl铆cita para que cualquier aplicaci贸n de correo electr贸nico pueda responderla. Es m谩s, puedes preguntarle al sistema si existe una actividad que pueda responder a tu intent antes de iniciarla y ofrecerle la posibilidad al usuario de elegir qu茅 aplicaci贸n usar.</p>
<h4 id="enviar-un-correo-electr贸nico-escogiendo-la-aplicaci贸n">Enviar un correo electr贸nico escogiendo la aplicaci贸n </h4>
<p>Veamos un ejemplo de un <strong>Intent impl铆cito</strong> para solicitar al sistema enviar un correo electr贸nico con un texto plano. Adem谩s, al Intent le pasaremos una serie de par谩metros como el asunto, el texto del correo y los destinatarios. Para ello usaremos el m茅todo <strong><code>putExtra()</code></strong> del objeto <strong>Intent</strong>. El c贸digo ser铆a el siguiente...</p>
<p><strong>Aunque no es necesario</strong>, podemos indicar a Android que tipo de intents vamos a usar en nuestra aplicaci贸n al final de Manifest de la aplicaci贸n con la etiqueta <strong><code>&lt;queries&gt;</code></strong>.</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml xml"><code><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    ...

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>queries</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.SEND<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name"><span class="token namespace">android:</span>mimeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/plain<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>queries</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token comment">// IntentsImplicitos.kt</span>

<span class="token keyword keyword-fun">fun</span> Context<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span>
    correos<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    asunto<span class="token operator">:</span> String<span class="token punctuation">,</span>
    texto<span class="token operator">:</span> String<span class="token punctuation">,</span>
    forzarEleccion<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_SEND<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        type <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"text/plain"</span></span>
        <span class="token comment">// A帽adimos los datos del correo.</span>
        <span class="token function">putExtra</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>EXTRA_EMAIL<span class="token punctuation">,</span> correos<span class="token punctuation">)</span>
        <span class="token function">putExtra</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>EXTRA_SUBJECT<span class="token punctuation">,</span> asunto<span class="token punctuation">)</span>
        <span class="token function">putExtra</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>EXTRA_TEXT<span class="token punctuation">,</span> texto<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-val">val</span> chooser <span class="token operator">=</span> <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>forzarEleccion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-val">val</span> title<span class="token operator">:</span> String <span class="token operator">=</span> resources<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>string<span class="token punctuation">.</span>enviar_correo<span class="token punctuation">)</span>
        Intent<span class="token punctuation">.</span><span class="token function">createChooser</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> title<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-else">else</span> <span class="token keyword keyword-null">null</span>

    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>intent<span class="token punctuation">.</span><span class="token function">resolveActivity</span><span class="token punctuation">(</span>packageManager<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">startActivity</span><span class="token punctuation">(</span>chooser <span class="token operator">?:</span> intent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">IntentSendMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> context <span class="token operator">=</span> LocalContext<span class="token punctuation">.</span>current
    <span class="token function">Box</span><span class="token punctuation">(</span>modifier <span class="token operator">=</span> Modifier<span class="token punctuation">.</span><span class="token function">fillMaxSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        contentAlignment <span class="token operator">=</span> androidx<span class="token punctuation">.</span>compose<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>Alignment<span class="token punctuation">.</span>Center<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Button</span><span class="token punctuation">(</span>onClick <span class="token operator">=</span> <span class="token punctuation">{</span> context<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span>
            correos <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"correo@alu.edu.gva.es"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            asunto <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Asunto del correo"</span></span><span class="token punctuation">,</span>
            texto <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Texto del correo"</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Send Mail"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div style="page-break-after:always;"></div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<p>Al usar <strong><code>ACTION_SEND</code></strong> con esos par谩metros. <strong><code>Android</code></strong> nos ofrecer谩 varias opciones para enviar el correo. Si seleccionamos <strong><code>Gmail</code></strong> + <strong><code>Always</code></strong> la siguiente vez que queramos enviar un correo, <strong>no nos preguntar谩</strong>.</p>
<p>Realmente el sistema <strong>Android busca el componente apropiado</strong> para iniciar comparando el contenido de la intent con los <strong><a href="https://developer.android.com/guide/topics/manifest/intent-filter-element?hl=es-419">filtros de intents</a></strong> declarados en el archivo de manifiesto de otras aplicaciones en el dispositivo. Si la intent coincide con un filtro de intents, el sistema inicia ese componente y le entrega el objeto Intent. <strong>Si varios filtros de intents son compatibles</strong>, el sistema muestra un cuadro de di谩logo para que el usuario pueda elegir la aplicaci贸n que se debe usar.</p>
</div>
<div style="width: auto">
<img height="200px" src="assets/imagenes/tema_3_8/email_opciones.png">
</div>
</div>
<p>En nuestro caso, la App debe tener una actividad que acepte los par谩metros que le pasamos y tener un filtro similar al siguiente:</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.ClaseQueDefineLaActividad<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    &lt;android:exported="true"&gt; <span class="token comment">&lt;!-- Necesario para que otras apps puedan usarla --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.SEND<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.DEFAULT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name"><span class="token namespace">android:</span>mimeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/plain<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>   
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>Puedes consultar la <strong><a href="https://developer.android.com/guide/components/intents-filters?hl=es-419#Receiving">documentaci贸n oficial</a></strong> para m谩s informaci贸n.</p>
<blockquote>
<p> <strong>Nota</strong>: Si no declaras ning煤n filtro de intent para una actividad, esta solo se puede iniciar con un intent expl铆cito.</p>
</blockquote>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<p>Si queremos que el sistema nos pregunte siempre que aplicaci贸n queremos usar para enviar el correo independientemente de si la hemos predeterminado o no. Deberemos usar el m茅todo <strong><code>createChooser()</code></strong> del objeto <strong>Intent</strong> como se ve en el c贸digo de ejemplo.</p>
</div>
<div style="width: auto">
<img height="200px" src="assets/imagenes/tema_3_8/email_forzado.png">
</div>
</div>
<div style="page-break-after:always;"></div>
<h4 id="abrir-una-localizaci贸n-en-google-maps">Abrir una localizaci贸n en Google Maps </h4>
<p>Veamos algunos ejemplos m谩s de <strong>Intents impl铆citos</strong> extra铆dos de la documentaci贸n oficial <strong><a href="https://developer.android.com/guide/components/intents-common?hl=es-419">aqu铆</a></strong> o <strong><a href="https://developer.android.com/training/basics/intents/sending?hl=es-419">aqu铆</a></strong> ...</p>
<p>En este caso vamos a visualizar una geolocalizaci贸n y la aplicaci贸n de <strong><code>Maps</code></strong> tiene un filtro que acepta este tipo de intents. F铆jate que en este caso hemos controlado la excepci贸n <strong><code>ActivityNotFoundException</code></strong> que se lanza si no tenemos instalada la aplicaci贸n de <strong><code>Maps</code></strong> mostrando un mensaje temporal.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin kotlin"><code><span class="token keyword keyword-fun">fun</span> Context<span class="token punctuation">.</span><span class="token function">buscaEnMaps</span><span class="token punctuation">(</span>lugar<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> intent <span class="token operator">=</span> <span class="token function">Intent</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>ACTION_VIEW<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-data">data</span> <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"geo:0,0?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">lugar</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-try">try</span> <span class="token punctuation">{</span>
        <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> ActivityNotFoundException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"No se puede abrir Maps"</span></span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation builtin">@Composable</span>
<span class="token keyword keyword-fun">fun</span> <span class="token function">IntentBuscaEnMaps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> context <span class="token operator">=</span> LocalContext<span class="token punctuation">.</span>current
    <span class="token function">Button</span><span class="token punctuation">(</span>onClick <span class="token operator">=</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">buscaEnMaps</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"I.E.S Doctor Balmis, +Alicante"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Text</span><span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"Ver Balmis en Maps"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>