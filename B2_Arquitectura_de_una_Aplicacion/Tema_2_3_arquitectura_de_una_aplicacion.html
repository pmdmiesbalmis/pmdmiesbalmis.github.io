<!DOCTYPE html><html><head>
      <title>PMDM 2&#xBA; DAM  Tema 2.3 - Arquitectura de una aplicaci&#xF3;n</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p,html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div{display:inline}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  300px/2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <style>/* 
Añade 

@import "../EstilosPersonalizadosMarkdownEnhanced.less"

justo después del front matter 
*/
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v19/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
</style>
<h1 class="mume-header undefined" id="tema-23---arquitectura-de-una-aplicaci%C3%B3n">Tema 2.3 - Arquitectura de una aplicaci&#xF3;n</h1>

<p>Descargar estos apuntes <a href="./Tema_2_3_arquitectura_de_una_aplicacion.pdf">pdf</a> o <a href="./Tema_2_3_arquitectura_de_una_aplicacion.html">html</a></p>
<h2 class="mume-header undefined" id="%C3%ADndice">&#xCD;ndice</h2>


<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#introducci&#xF3;n" class="md-toc-link">
            <p>Introducci&#xF3;n</p>

          </a></div><details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#esquema-b&#xE1;sico-de-una-aplicaci&#xF3;n-android-propuesto-por-google" class="md-toc-link"><p>Esquema b&#xE1;sico de una aplicaci&#xF3;n Android propuesto por Google</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#capa-ui" class="md-toc-link">
            <p>Capa UI</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#capa-de-datos" class="md-toc-link">
            <p>Capa de Datos</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#capa-de-dominio" class="md-toc-link">
            <p>Capa de Dominio</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#modelo-vista-vista-modelo-mvvm" class="md-toc-link">
            <p>Modelo vista vista modelo MVVM</p>

          </a></div><details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#visi&#xF3;n-general-de-la-arquitectura-en-un-proyecto-de-android" class="md-toc-link"><p>Visi&#xF3;n general de la arquitectura en un proyecto de Android</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#estructurando-el-modelo" class="md-toc-link">
            <p>Estructurando el Modelo</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#estructurando-la-capa-de-datos" class="md-toc-link">
            <p>Estructurando la capa de datos</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#estructurando-la-capa-de-ui" class="md-toc-link">
            <p>Estructurando la capa de UI</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#ap&#xE9;ndice-i---codificando-im&#xE1;genes-en-base64" class="md-toc-link"><p>Ap&#xE9;ndice I - Codificando im&#xE1;genes en Base64</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#funciones-de-utilidad-para-codificar-y-decodificar-im&#xE1;genes" class="md-toc-link">
            <p>Funciones de utilidad para codificar y decodificar im&#xE1;genes</p>

          </a></div>
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 class="mume-header" id="introducci%C3%B3n">Introducci&#xF3;n</h2>

<p>B&#xE1;sicamente una aquitectura software es la estructura de un sistema de software, los componentes del software, las propiedades externamente visibles de esos componentes y las relaciones entre ellos.</p>
<p>La idea tras las arquitecturas es tener capas que separen las responsabilidades de cada una de ellas. De esta forma se consigue que el c&#xF3;digo sea m&#xE1;s mantenible, escalable y testeable. Adem&#xE1;s, podremos cambiar una capa sin que afecte a las dem&#xE1;s.</p>
<p>Actualmente existen arquitecturas complejas de sistemas c&#xF3;mo por ejemplo <a href="https://en.wikipedia.org/wiki/Hexagonal_architecture_(software)">Arquitectura Hexagonal</a>, <a href="https://en.wikipedia.org/wiki/Microservices">Microservicios</a>, <a href="https://en.wikipedia.org/wiki/Event-driven_architecture">Event-driven Architecture</a>, etc. Sin embargo, en el mundo del dise&#xF1;o dise&#xF1;o de aplicaciones para dispositivos m&#xF3;viles tenemos patrones arquitect&#xF3;nicos m&#xE1;s sencillas c&#xF3;mo MVC, MVP, MVVM, etc.</p>
<blockquote>
<p>&#x1F4CC; <strong>Nota</strong>: Puedes ver m&#xE1;s informaci&#xF3;n sobre la arquitectura propuesta por Google para Android en <a href="https://developer.android.com/jetpack/guide?hl=es-419">Gu&#xED;a de arquitectura de apps</a></p>
</blockquote>
<h2 class="mume-header" id="esquema-b%C3%A1sico-de-una-aplicaci%C3%B3n-android-propuesto-por-google">Esquema b&#xE1;sico de una aplicaci&#xF3;n Android propuesto por Google</h2>

<p align="center" style="zoom:0.7"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="610pt" height="116pt" viewBox="0.00 0.00 610.47 116.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-112 606.47,-112 606.47,4 -4,4"/>
<!-- UI -->
<g id="node1" class="node">
<title>UI</title>
<path fill="#63b8ff" stroke="#63b8ff" d="M132,-108C132,-108 12,-108 12,-108 6,-108 0,-102 0,-96 0,-96 0,-12 0,-12 0,-6 6,0 12,0 12,0 132,0 132,0 138,0 144,-6 144,-12 144,-12 144,-96 144,-96 144,-102 138,-108 132,-108"/>
<text text-anchor="middle" x="72" y="-48" font-family="Arial" font-size="20.00" fill="#ffffff">Capa UI</text>
</g>
<!-- Dominio -->
<g id="node2" class="node">
<title>Dominio</title>
<path fill="#36648b" stroke="#36648b" d="M374.7056,-108C374.7056,-108 227.7644,-108 227.7644,-108 221.7644,-108 215.7644,-102 215.7644,-96 215.7644,-96 215.7644,-12 215.7644,-12 215.7644,-6 221.7644,0 227.7644,0 227.7644,0 374.7056,0 374.7056,0 380.7056,0 386.7056,-6 386.7056,-12 386.7056,-12 386.7056,-96 386.7056,-96 386.7056,-102 380.7056,-108 374.7056,-108"/>
<text text-anchor="middle" x="301.235" y="-72" font-family="Arial" font-size="20.00" fill="#ffffff">Capa de Dominio</text>
<text text-anchor="middle" x="301.235" y="-48" font-family="Arial" font-size="20.00" fill="#ffffff">o</text>
<text text-anchor="middle" x="301.235" y="-24" font-family="Arial" font-size="20.00" fill="#ffffff">Modelo</text>
</g>
<!-- UI&#45;&gt;Dominio -->
<g id="edge1" class="edge">
<title>UI-&gt;Dominio</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M144.2167,-54C163.728,-54 185.1475,-54 205.7218,-54"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="205.7421,-57.5001 215.742,-54 205.742,-50.5001 205.7421,-57.5001"/>
</g>
<!-- Datos -->
<g id="node3" class="node">
<title>Datos</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M590.47,-108C590.47,-108 470.47,-108 470.47,-108 464.47,-108 458.47,-102 458.47,-96 458.47,-96 458.47,-12 458.47,-12 458.47,-6 464.47,0 470.47,0 470.47,0 590.47,0 590.47,0 596.47,0 602.47,-6 602.47,-12 602.47,-12 602.47,-96 602.47,-96 602.47,-102 596.47,-108 590.47,-108"/>
<text text-anchor="middle" x="530.47" y="-48" font-family="Arial" font-size="20.00" fill="#ffffff">Capa Datos</text>
</g>
<!-- Dominio&#45;&gt;Datos -->
<g id="edge2" class="edge">
<title>Dominio-&gt;Datos</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M396.6213,-54C417.212,-54 438.6551,-54 458.1894,-54"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="396.5937,-50.5001 386.5937,-54 396.5936,-57.5001 396.5937,-50.5001"/>
</g>
</g>
</svg>
</p><h3 class="mume-header" id="capa-ui">Capa UI</h3>

<p>La funci&#xF3;n de la capa de la IU (o capa de presentaci&#xF3;n) consiste en mostrar los datos de la aplicaci&#xF3;n en la pantalla. Cuando los datos cambian, ya sea debido a la interacci&#xF3;n del usuario (como cuando presiona un bot&#xF3;n) o una entrada externa (como una respuesta de red), la IU debe actualizarse para reflejar los cambios.</p>
<p>La capa de la IU consta de los siguientes dos elementos:</p>
<ul>
<li>
<p>Elementos de la IU que renderizan los datos en la pantalla (puedes compilar estos elementos mediante las vistas XML o las funciones de <strong>Jetpack Compose</strong>)</p>
</li>
<li>
<p>Contenedores de estados (como las clases <strong>ViewModel</strong>) que contienen datos, los exponen a la IU y controlan la l&#xF3;gica</p>
</li>
</ul>
<blockquote>
<p>&#x270B; <strong>Importante</strong>: Documentaci&#xF3;n oficial de Android sobre la <strong><a href="https://developer.android.com/jetpack/guide/ui-layer?hl=es-419">Capa de UI</a></strong> en la que m&#xE1;s adelante profundizaremos</p>
</blockquote>
<p align="center" style="zoom:0.7"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="926pt" height="204pt" viewBox="0.00 0.00 926.47 204.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 200)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-200 922.47,-200 922.47,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterUI</title>
<path fill="#63b8ff" stroke="#63b8ff" d="M20,-8C20,-8 468,-8 468,-8 474,-8 480,-14 480,-20 480,-20 480,-176 480,-176 480,-182 474,-188 468,-188 468,-188 20,-188 20,-188 14,-188 8,-182 8,-176 8,-176 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="244" y="-166" font-family="Arial" font-size="20.00" fill="#ffffff">Capa UI</text>
</g>
<!-- ComponentesUI -->
<g id="node1" class="node">
<title>ComponentesUI</title>
<path fill="#b9d3ee" stroke="#b9d3ee" d="M196,-136C196,-136 40,-136 40,-136 34,-136 28,-130 28,-124 28,-124 28,-40 28,-40 28,-34 34,-28 40,-28 40,-28 196,-28 196,-28 202,-28 208,-34 208,-40 208,-40 208,-124 208,-124 208,-130 202,-136 196,-136"/>
<text text-anchor="middle" x="118" y="-76" font-family="Arial" font-size="20.00" fill="#000000">Componentes UI</text>
</g>
<!-- Estado -->
<g id="node2" class="node">
<title>Estado</title>
<path fill="#6c7b8b" stroke="#6c7b8b" d="M448,-136C448,-136 292,-136 292,-136 286,-136 280,-130 280,-124 280,-124 280,-40 280,-40 280,-34 286,-28 292,-28 292,-28 448,-28 448,-28 454,-28 460,-34 460,-40 460,-40 460,-124 460,-124 460,-130 454,-136 448,-136"/>
<text text-anchor="middle" x="370" y="-88" font-family="Arial" font-size="20.00" fill="#ffffff">Contenedor de</text>
<text text-anchor="middle" x="370" y="-64" font-family="Arial" font-size="20.00" fill="#ffffff">Estados</text>
</g>
<!-- ComponentesUI&#45;&gt;Estado -->
<g id="edge1" class="edge">
<title>ComponentesUI-&gt;Estado</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M208.266,-82C228.2007,-82 249.4362,-82 269.7403,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="269.941,-85.5001 279.9409,-82 269.9409,-78.5001 269.941,-85.5001"/>
</g>
<!-- Dominio -->
<g id="node3" class="node">
<title>Dominio</title>
<path fill="#36648b" stroke="#36648b" d="M690.7056,-136C690.7056,-136 543.7644,-136 543.7644,-136 537.7644,-136 531.7644,-130 531.7644,-124 531.7644,-124 531.7644,-40 531.7644,-40 531.7644,-34 537.7644,-28 543.7644,-28 543.7644,-28 690.7056,-28 690.7056,-28 696.7056,-28 702.7056,-34 702.7056,-40 702.7056,-40 702.7056,-124 702.7056,-124 702.7056,-130 696.7056,-136 690.7056,-136"/>
<text text-anchor="middle" x="617.235" y="-100" font-family="Arial" font-size="20.00" fill="#ffffff">Capa de Dominio</text>
<text text-anchor="middle" x="617.235" y="-76" font-family="Arial" font-size="20.00" fill="#ffffff">o</text>
<text text-anchor="middle" x="617.235" y="-52" font-family="Arial" font-size="20.00" fill="#ffffff">Modelo</text>
</g>
<!-- Estado&#45;&gt;Dominio -->
<g id="edge2" class="edge">
<title>Estado-&gt;Dominio</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M460.307,-82C480.2498,-82 501.4424,-82 521.589,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="521.6997,-85.5001 531.6997,-82 521.6996,-78.5001 521.6997,-85.5001"/>
</g>
<!-- Datos -->
<g id="node4" class="node">
<title>Datos</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M906.47,-136C906.47,-136 786.47,-136 786.47,-136 780.47,-136 774.47,-130 774.47,-124 774.47,-124 774.47,-40 774.47,-40 774.47,-34 780.47,-28 786.47,-28 786.47,-28 906.47,-28 906.47,-28 912.47,-28 918.47,-34 918.47,-40 918.47,-40 918.47,-124 918.47,-124 918.47,-130 912.47,-136 906.47,-136"/>
<text text-anchor="middle" x="846.47" y="-76" font-family="Arial" font-size="20.00" fill="#ffffff">Capa Datos</text>
</g>
<!-- Dominio&#45;&gt;Datos -->
<g id="edge3" class="edge">
<title>Dominio-&gt;Datos</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M712.6213,-82C733.212,-82 754.6551,-82 774.1894,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="712.5937,-78.5001 702.5937,-82 712.5936,-85.5001 712.5937,-78.5001"/>
</g>
</g>
</svg>
</p><div style="page-break-after:always;"></div>
<h3 class="mume-header" id="capa-de-datos">Capa de Datos</h3>

<p>La capa de datos est&#xE1; formada por repositorios que pueden contener de <strong>cero a muchas fuentes de datos</strong>. A este tipo de dise&#xF1;o se le denomina <strong><a href="https://martinfowler.com/eaaCatalog/repository.html">Repository Pattern</a></strong> y es un patr&#xF3;n de dise&#xF1;o que se utiliza para separar la l&#xF3;gica empresarial de la l&#xF3;gica de acceso a los datos. El repositorio se encarga de obtener los datos de una fuente de datos y convertirlos en un formato con el que el resto de la aplicaci&#xF3;n pueda trabajar.</p>
<blockquote>
<p>&#x1F4CC; <strong>Nota</strong>: Este patr&#xF3;n fu&#xE9; introducido <strong>Martin Fowler</strong> en su libro <a href="https://www.amazon.es/Patterns-Enterprise-Application-Architecture-Martin/dp/0321127420">Patterns of Enterprise Application Architecture</a> en el a&#xF1;o <strong>2002</strong> y posteriormente desarrollado por <strong>Eric Evans</strong> en su libro <a href="https://www.amazon.es/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215">Domain-Driven Design</a> en el a&#xF1;o <strong>2003</strong>. Hoy en d&#xED;a es un patr&#xF3;n muy utilizado en el desarrollo de software y &#xE1;mpliamente utilizado en el desarrollo de aplicaciones m&#xF3;viles.</p>
</blockquote>
<blockquote>
<p>&#x270B; <strong>Importante</strong>: Documentaci&#xF3;n oficial de Android sobre la <strong><a href="https://developer.android.com/jetpack/guide/data-layer?hl=es-419">Capa de datos</a></strong> en la que m&#xE1;s adelante profundizaremos</p>
</blockquote>
<p align="center" style="zoom:0.7"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="926pt" height="204pt" viewBox="0.00 0.00 926.47 204.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 200)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-200 922.47,-200 922.47,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterD</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M450.47,-8C450.47,-8 898.47,-8 898.47,-8 904.47,-8 910.47,-14 910.47,-20 910.47,-20 910.47,-176 910.47,-176 910.47,-182 904.47,-188 898.47,-188 898.47,-188 450.47,-188 450.47,-188 444.47,-188 438.47,-182 438.47,-176 438.47,-176 438.47,-20 438.47,-20 438.47,-14 444.47,-8 450.47,-8"/>
<text text-anchor="middle" x="674.47" y="-166" font-family="Arial" font-size="20.00" fill="#ffffff">Capa Datos</text>
</g>
<!-- Repositorio -->
<g id="node1" class="node">
<title>Repositorio</title>
<path fill="#b9d3ee" stroke="#b9d3ee" d="M626.47,-136C626.47,-136 470.47,-136 470.47,-136 464.47,-136 458.47,-130 458.47,-124 458.47,-124 458.47,-40 458.47,-40 458.47,-34 464.47,-28 470.47,-28 470.47,-28 626.47,-28 626.47,-28 632.47,-28 638.47,-34 638.47,-40 638.47,-40 638.47,-124 638.47,-124 638.47,-130 632.47,-136 626.47,-136"/>
<text text-anchor="middle" x="548.47" y="-76" font-family="Arial" font-size="20.00" fill="#000000">Repositorio/s</text>
</g>
<!-- FuenteDatos -->
<g id="node2" class="node">
<title>FuenteDatos</title>
<path fill="#6c7b8b" stroke="#6c7b8b" d="M878.47,-136C878.47,-136 722.47,-136 722.47,-136 716.47,-136 710.47,-130 710.47,-124 710.47,-124 710.47,-40 710.47,-40 710.47,-34 716.47,-28 722.47,-28 722.47,-28 878.47,-28 878.47,-28 884.47,-28 890.47,-34 890.47,-40 890.47,-40 890.47,-124 890.47,-124 890.47,-130 884.47,-136 878.47,-136"/>
<text text-anchor="middle" x="800.47" y="-76" font-family="Arial" font-size="20.00" fill="#ffffff">Fuente/s Datos</text>
</g>
<!-- Repositorio&#45;&gt;FuenteDatos -->
<g id="edge1" class="edge">
<title>Repositorio-&gt;FuenteDatos</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M638.736,-82C658.6707,-82 679.9062,-82 700.2103,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="700.411,-85.5001 710.4109,-82 700.4109,-78.5001 700.411,-85.5001"/>
</g>
<!-- UI -->
<g id="node3" class="node">
<title>UI</title>
<path fill="#63b8ff" stroke="#63b8ff" d="M132,-136C132,-136 12,-136 12,-136 6,-136 0,-130 0,-124 0,-124 0,-40 0,-40 0,-34 6,-28 12,-28 12,-28 132,-28 132,-28 138,-28 144,-34 144,-40 144,-40 144,-124 144,-124 144,-130 138,-136 132,-136"/>
<text text-anchor="middle" x="72" y="-76" font-family="Arial" font-size="20.00" fill="#ffffff">Capa UI</text>
</g>
<!-- Dominio -->
<g id="node4" class="node">
<title>Dominio</title>
<path fill="#36648b" stroke="#36648b" d="M374.7056,-136C374.7056,-136 227.7644,-136 227.7644,-136 221.7644,-136 215.7644,-130 215.7644,-124 215.7644,-124 215.7644,-40 215.7644,-40 215.7644,-34 221.7644,-28 227.7644,-28 227.7644,-28 374.7056,-28 374.7056,-28 380.7056,-28 386.7056,-34 386.7056,-40 386.7056,-40 386.7056,-124 386.7056,-124 386.7056,-130 380.7056,-136 374.7056,-136"/>
<text text-anchor="middle" x="301.235" y="-100" font-family="Arial" font-size="20.00" fill="#ffffff">Capa de Dominio</text>
<text text-anchor="middle" x="301.235" y="-76" font-family="Arial" font-size="20.00" fill="#ffffff">o</text>
<text text-anchor="middle" x="301.235" y="-52" font-family="Arial" font-size="20.00" fill="#ffffff">Modelo</text>
</g>
<!-- UI&#45;&gt;Dominio -->
<g id="edge2" class="edge">
<title>UI-&gt;Dominio</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M144.2167,-82C163.728,-82 185.1475,-82 205.7218,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="205.7421,-85.5001 215.742,-82 205.742,-78.5001 205.7421,-85.5001"/>
</g>
<!-- Dominio&#45;&gt;Repositorio -->
<g id="edge3" class="edge">
<title>Dominio-&gt;Repositorio</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M396.8247,-82C417.0696,-82 438.3732,-82 458.4051,-82"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="396.6655,-78.5001 386.6655,-82 396.6654,-85.5001 396.6655,-78.5001"/>
</g>
</g>
</svg>
</p><h3 class="mume-header" id="capa-de-dominio">Capa de Dominio</h3>

<p>La capa de dominio es una <strong>capa opcional</strong> que se ubica entre la capa de la IU y la de datos.</p>
<p>La capa de dominio es responsable de encapsular la l&#xF3;gica empresarial compleja o la l&#xF3;gica empresarial simple que varios ViewModels reutilizan. Esta capa es opcional porque no todas las apps tendr&#xE1;n estos requisitos. Solo debes usarla cuando sea necesario; por ejemplo, para administrar la complejidad o favorecer la reutilizaci&#xF3;n.</p>
<p>Esta terminolog&#xED;a viene del <strong>DDD (Domain Driven Design)</strong> que es una metodolog&#xED;a de dise&#xF1;o de software que se centra en la l&#xF3;gica empresarial y en la comunicaci&#xF3;n entre los expertos en el dominio y los desarrolladores.</p>
<p>Sin embargo, nosotros vamos a obviar esta capa y vamos a implementar una arquitectura m&#xE1;s sencilla basada en el patr&#xF3;n <strong>MVVM</strong> en el cual esta capa se denomina <strong>Modelo</strong> ya que representar&#xE1; el modelo de datos.</p>
<div style="page-break-after:always;"></div>
<h2 class="mume-header" id="modelo-vista-vista-modelo-mvvm">Modelo vista vista modelo MVVM</h2>

<p>MVVM es un patr&#xF3;n de dise&#xF1;o de software que facilita la separaci&#xF3;n de la l&#xF3;gica de presentaci&#xF3;n de la l&#xF3;gica de negocio.</p>
<p>MVVM es una variante del patr&#xF3;n MVC (Modelo-Vista-Controlador) que se utiliza para la construcci&#xF3;n de interfaces de usuario. En MVVM, el ViewModel asume la funcionalidad del &quot;intermediario&quot;. En MVVM, toda la l&#xF3;gica de presentaci&#xF3;n se coloca en el ViewModel.</p>
<p>El ViewModel es responsable de recuperar los datos de los modelos y exponerlos a la vista. El ViewModel tambi&#xE9;n se utiliza para manejar todas las interacciones del usuario. El ViewModel recupera los datos de los modelos, los formatea y los expone a la vista. El ViewModel tambi&#xE9;n acepta las entradas del usuario y las valida antes de actualizar los modelos.</p>
<p>Implementaciones o aproximaciones a esta arquitectura hay muy diversas, pero b&#xE1;sicamente la que nosotros vamos a implementar un esquema similar al siguiente para aproximarnos a MVVM siguiendo las recomendaciones de Google.</p>
<p align="center" style="zoom:0.65"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="1041pt" height="378pt" viewBox="0.00 0.00 1040.61 378.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 374)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-374 1036.61,-374 1036.61,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterUI</title>
<path fill="none" stroke="#6495ed" stroke-width="5" d="M20,-8C20,-8 710.039,-8 710.039,-8 716.039,-8 722.039,-14 722.039,-20 722.039,-20 722.039,-350 722.039,-350 722.039,-356 716.039,-362 710.039,-362 710.039,-362 20,-362 20,-362 14,-362 8,-356 8,-350 8,-350 8,-20 8,-20 8,-14 14,-8 20,-8"/>
<text text-anchor="middle" x="365.0195" y="-340" font-family="Arial" font-size="20.00" fill="#6495ed">Capa UI</text>
</g>
<!-- View -->
<g id="node1" class="node">
<title>View</title>
<path fill="#63b8ff" stroke="#63b8ff" d="M220,-214C220,-214 100,-214 100,-214 94,-214 88,-208 88,-202 88,-202 88,-118 88,-118 88,-112 94,-106 100,-106 100,-106 220,-106 220,-106 226,-106 232,-112 232,-118 232,-118 232,-202 232,-202 232,-208 226,-214 220,-214"/>
<text text-anchor="middle" x="160" y="-154" font-family="Arial" font-size="20.00" fill="#ffffff">View</text>
</g>
<!-- ViewModel -->
<g id="node2" class="node">
<title>ViewModel</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M630.039,-214C630.039,-214 510.039,-214 510.039,-214 504.039,-214 498.039,-208 498.039,-202 498.039,-202 498.039,-118 498.039,-118 498.039,-112 504.039,-106 510.039,-106 510.039,-106 630.039,-106 630.039,-106 636.039,-106 642.039,-112 642.039,-118 642.039,-118 642.039,-202 642.039,-202 642.039,-208 636.039,-214 630.039,-214"/>
<text text-anchor="middle" x="570.039" y="-154" font-family="Arial" font-size="20.00" fill="#ffffff">ViewModel</text>
</g>
<!-- View&#45;&gt;ViewModel -->
<g id="edge1" class="edge">
<title>View:ne-&gt;ViewModel:nw</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M232,-214C313.1585,-295.1585 408.6537,-297.5362 490.6522,-221.1331"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="493.2767,-223.4642 498.039,-214 488.4142,-218.4287 493.2767,-223.4642"/>
<text text-anchor="middle" x="365.0195" y="-280.5" font-family="Arial" font-size="15.00" fill="#104e8b">Evento UI</text>
</g>
<!-- View&#45;&gt;ViewModel -->
<g id="edge2" class="edge">
<title>View-&gt;ViewModel</title>
<path fill="none" stroke="#1e90ff" stroke-width="2" stroke-dasharray="5,2" d="M242.6746,-160C317.4152,-160 426.3591,-160 497.7111,-160"/>
<polygon fill="#1e90ff" stroke="#1e90ff" stroke-width="2" points="242.3629,-156.5001 232.3629,-160 242.3628,-163.5001 242.3629,-156.5001"/>
<text text-anchor="middle" x="365.0195" y="-182.5" font-family="Arial" font-size="15.00" fill="#1874cd">Evento de cambio</text>
<text text-anchor="middle" x="365.0195" y="-164.5" font-family="Arial" font-size="15.00" fill="#1874cd">de estado</text>
</g>
<!-- View&#45;&gt;ViewModel -->
<g id="edge3" class="edge">
<title>View:se-&gt;ViewModel:sw</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M239.3868,-98.8669C321.3853,-22.4638 416.8805,-24.8415 498.039,-106"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="236.7623,-96.5358 232,-106 241.6248,-101.5713 236.7623,-96.5358"/>
<text text-anchor="middle" x="365.0195" y="-60.5" font-family="Arial" font-size="15.00" fill="#104e8b">Datos UI</text>
</g>
<!-- Model -->
<g id="node3" class="node">
<title>Model</title>
<path fill="#36648b" stroke="#36648b" d="M1020.566,-214C1020.566,-214 899.742,-214 899.742,-214 893.742,-214 887.742,-208 887.742,-202 887.742,-202 887.742,-118 887.742,-118 887.742,-112 893.742,-106 899.742,-106 899.742,-106 1020.566,-106 1020.566,-106 1026.566,-106 1032.566,-112 1032.566,-118 1032.566,-118 1032.566,-202 1032.566,-202 1032.566,-208 1026.566,-214 1020.566,-214"/>
<text text-anchor="middle" x="960.154" y="-166" font-family="Arial" font-size="20.00" fill="#ffffff">Data Layer</text>
<text text-anchor="middle" x="960.154" y="-142" font-family="Arial" font-size="20.00" fill="#ffffff">with the Model</text>
</g>
<!-- ViewModel&#45;&gt;Model -->
<g id="edge4" class="edge">
<title>ViewModel:ne-&gt;Model:nw</title>
<path fill="none" stroke="#1e90ff" stroke-width="2" stroke-dasharray="5,2" d="M649.3306,-221.0246C725.0856,-291.2709 813.2246,-288.9294 888.154,-214"/>
<polygon fill="#1e90ff" stroke="#1e90ff" stroke-width="2" points="651.669,-218.4174 642.039,-214 646.8124,-223.4586 651.669,-218.4174"/>
<text text-anchor="middle" x="790.8685" y="-294.5" font-family="Arial" font-size="15.00" fill="#1874cd">Evento de cambio</text>
<text text-anchor="middle" x="790.8685" y="-276.5" font-family="Arial" font-size="15.00" fill="#1874cd">en el modelo</text>
</g>
<!-- ViewModel&#45;&gt;Model -->
<g id="edge5" class="edge">
<title>ViewModel:se-&gt;Model:sw</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M642.039,-106C716.9684,-31.0706 805.1074,-28.7291 880.8624,-98.9754"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="878.524,-101.5826 888.154,-106 883.3806,-96.5414 878.524,-101.5826"/>
<text text-anchor="middle" x="790.8685" y="-78.5" font-family="Arial" font-size="15.00" fill="#104e8b">Operaci&#xF3;n CRUD</text>
</g>
</g>
</svg>
</p><p>Donde ...</p>
<ul>
<li><strong>View</strong> son los <strong>Componentes UI</strong> en nuestro caso los componentes de <strong>Jetpack Compose</strong> que renderizan los datos en la pantalla.</li>
<li><strong>ViewModel</strong> es el <strong>Contenedor de estados</strong> que contiene datos, los exponen a la IU y controlan la l&#xF3;gica.</li>
<li><strong>Model</strong> es una abstracci&#xF3;n de los datos de la aplicaci&#xF3;n. En nuestro caso ser&#xE1;n los <strong>Repositorios</strong> que se encargan de obtener los datos de una fuente de datos y convertirlos en un formato con el que el resto de la aplicaci&#xF3;n pueda trabajar.</li>
</ul>
<div style="page-break-after:always;"></div>
<h2 class="mume-header" id="visi%C3%B3n-general-de-la-arquitectura-en-un-proyecto-de-android">Visi&#xF3;n general de la arquitectura en un proyecto de Android</h2>

<p>A la hora de concretar la arquitectura de una aplicaci&#xF3;n de Android, aunque hay una serie de recomendaciones por parte de Google, no hay una forma &#xFA;nica de hacerlo. Por tanto, el equipo de desarrollo de una aplicaci&#xF3;n debe decidir alg&#xFA;n tipo de <strong>convenio organizativo</strong> de paquetes, nombres de clases, etc. que se adapte a sus necesidades. De tal manera que cualquier miembro del equipo sepa encontrar f&#xE1;cilmente donde se encuentra la implementaci&#xF3;n de una determinada funcionalidad. Adem&#xE1;s de modificar f&#xE1;cilmente con el menor n&#xFA;mero de fallos y conflictos de trabajo en paralelo.</p>
<p>Esto &#xFA;ltimo, se consigue creando diferentes m&#xF3;dulos de la aplicaci&#xF3;n que se puedan desarrollar de forma independiente y que se puedan integrar f&#xE1;cilmente en el proyecto final. Sin embargo, la parte de modularizaci&#xF3;n en diferentes paquetes no la vamos a abordar en este curso por falta de tiempo.</p>
<p>Descarga del siguiente enlace tienes un <strong><a href="cheatsheet_carpetas_arquitectura.pdf">&apos;Cheat Sheet&apos; de la Arquitectura</a></strong> propuesta en el curso que debes descargar y tener accesible durante el presente curso.</p>
<blockquote>
<p>&#x1F4CC; <strong>Nota</strong>: Vamos a empezar con una <strong>estructuraci&#xF3;n inicial del proyecto</strong> siguiendo el esquema propuesto en el cheatsheet anterior para ir aproxim&#xE1;ndonos a la arquitectura propuesta por Google y a medida que vayamos avanzando en el curso iremos concretando m&#xE1;s sobre su implementaci&#xF3;n, las diferentes sub-capas de la arquitectura, los convenios de nombres que hemos usado en el curso, etc.</p>
</blockquote>
<div style="page-break-after:always;"></div>
<h3 class="mume-header" id="estructurando-el-modelo">Estructurando el Modelo</h3>

<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 80%">
<p>Aqu&#xED; vamos a crear los modelos de datos que vamos a utilizar en nuestra aplicaci&#xF3;n. En nuestro caso, vamos a crear un modelo de datos para representar un <strong>Contacto</strong> de una Agenda.</p>
<p>Para ello, siguiendo es esquema de carpetas propuesto en el cheatsheet anterior, vamos a crear un paquete <strong><code>models</code></strong> dentro del paquete <strong>principal</strong> de nuestro proyecto.</p>
</div>
<div style="width: auto">
<p align="center" style="zoom:1"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="78px" preserveAspectRatio="none" style="width:150px;height:78px;background:#FFFFFF;" version="1.1" viewBox="0 0 150 78" width="150px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="18.0938" style="stroke:#000000;stroke-width:1.0;" width="71" x="6" y="6"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="8" y="20.457">Android</text><line style="stroke:#000000;stroke-width:1.0;" x1="66" x2="66" y1="6" y2="24.0938"/><polygon fill="#000000" points="69,12,75,12,72,19.0938" style="stroke:#000000;stroke-width:1.0;"/><path d="M17,31.1875 L17,33.1875 L25,33.1875 L25,32.1875 L20,32.1875 L20,31.1875 L17,31.1875 M17,34.1875 L17,38.6875 C17,38.9675 17.22,39.1875 17.5,39.1875 L24.5,39.1875 C24.78,39.1875 25,38.9675 25,38.6875 L25,34.1875 L17,34.1875 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="117" x="26" y="39.5508">[com.pmdm.agenda]</text><path d="M37,46.2813 L37,48.2813 L45,48.2813 L45,47.2813 L40,47.2813 L40,46.2813 L37,46.2813 M37,49.2813 L37,53.7813 C37,54.0613 37.22,54.2813 37.5,54.2813 L44.5,54.2813 C44.78,54.2813 45,54.0613 45,53.7813 L45,49.2813 L37,49.2813 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="50" x="46" y="54.6445">[models]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="46" y="69.7383">Contacto.kt</text><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="9" y="33.6406"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="48.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="28" y1="49.7344" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="51.7344" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="64.8281" y2="64.8281"/><!--SRC=[JP3TIm915CNVxrzndq9tST7DB0OHou_0Lf9SVOc4sPrHXcRdodm88ltlJLGKz-tUypldSCVES-iTrnxW0hjx8omfiODB2IacoV1gJrf8EtgjgScEZMWoVf16yBSaWJHDSLYJ9iiidRckT92Z_qn3Gcht8qrnGiRpsbFsxk4ZpZWQVIUlD3T-iopm9ArJPB2NvTtyEijRws1mBYlC1zZhilo6zMznCYlnwzo6rkEgG4V1rXA5SjwgAlZ8js71JnnVWl6gaGoVZz8ifa-_2voPax9a6cayBBRBFy6WttbG7jVInYQuNS9KxddGFX8r2MKE33Vbl7C71JU745_1K3gOKFIrPuQpzIS0]--></g></svg></p></div>
</div>
<p>Este modelos ser&#xE1;n clases &apos;<em>generales</em>&apos; o &apos;<em>gen&#xE9;ricas</em>&apos; que representar&#xE1;n los datos de mi problema. Podremos definir roles entre ellas, as&#xED; como relaciones de herencia, composici&#xF3;n, etc. En algunos casos complejos incluso podremos definir casos de uso, etc.</p>
<p>Nosotros simplemente vamos a definir una clase <strong><code>Contacto</code></strong> que representar&#xE1; un contacto de una agenda. Para ello, vamos a crear un fichero <strong><code>Contacto.kt</code></strong> dentro del paquete <strong><code>models</code></strong> con el siguiente contenido.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">Contacto</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> apellidos<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> foto<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> correo<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> telefono<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> categorias<span class="token operator">:</span> EnumSet<span class="token operator">&lt;</span>Categorias<span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-enum">enum</span> <span class="token keyword keyword-class">class</span> Categorias <span class="token punctuation">{</span>
        Amigos<span class="token punctuation">,</span> Trabajo<span class="token punctuation">,</span> Familia<span class="token punctuation">,</span> Emergencias
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x270B; <strong>Importante</strong>: El modelo no deber&#xED;a tener ninguna referencia o <strong>dependencia</strong> de la <strong>capa de UI</strong> ni a la <strong>capa de datos</strong>.</p>
</blockquote>
<p>Para evitar que el modelo tenga <strong>dependencias</strong> por ejemplo de las bibliotecas del propio android. F&#xED;jate que la propiedad <strong><code>foto</code></strong> es de tipo <strong><code>String?</code></strong> y no de tipo <strong><code>Bitmap?</code></strong> que nos obligar&#xED;a a incluir el paquete <strong><code>android.graphics</code></strong> en el modelo. De esta manera la imagen puede ser una <strong>url</strong>, un <strong>path</strong>, un <strong>base64</strong>, etc. y la conversi&#xF3;n a <strong><code>Bitmap</code></strong> la haremos en la capa de UI.</p>
<p>En nuestro caso hemos decidido que sea una cadena en <strong>base64</strong>. Si quieres saber m&#xE1;s sobre que es <strong><code>base64</code></strong> puedes consultar el <strong>Ap&#xE9;ndice I</strong> al final de este documento o bien a <a href="https://es.wikipedia.org/wiki/Base64">este enlace a la Wikipedia</a>.</p>
<div style="page-break-after:always;"></div>
<h3 class="mume-header" id="estructurando-la-capa-de-datos">Estructurando la capa de datos</h3>

<p>Ahondado <strong>un poco m&#xE1;s</strong> el diagrama general de la capa de datos podr&#xED;amos tener un esquema similar al siguiente:</p>
<p align="center" style="zoom:0.6"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="957pt" height="304pt" viewBox="0.00 0.00 957.41 304.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 300)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-300 953.406,-300 953.406,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterD</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M362,-8C362,-8 929.406,-8 929.406,-8 935.406,-8 941.406,-14 941.406,-20 941.406,-20 941.406,-276 941.406,-276 941.406,-282 935.406,-288 929.406,-288 929.406,-288 362,-288 362,-288 356,-288 350,-282 350,-276 350,-276 350,-20 350,-20 350,-14 356,-8 362,-8"/>
<text text-anchor="middle" x="645.703" y="-266" font-family="Arial" font-size="20.00" fill="#ffffff">Capa Datos</text>
</g>
<!-- Repositorio -->
<g id="node1" class="node">
<title>Repositorio</title>
<path fill="#b9d3ee" stroke="#b9d3ee" d="M539.3854,-174C539.3854,-174 372.2046,-174 372.2046,-174 366.2046,-174 360.2046,-168 360.2046,-162 360.2046,-162 360.2046,-78 360.2046,-78 360.2046,-72 366.2046,-66 372.2046,-66 372.2046,-66 539.3854,-66 539.3854,-66 545.3854,-66 551.3854,-72 551.3854,-78 551.3854,-78 551.3854,-162 551.3854,-162 551.3854,-168 545.3854,-174 539.3854,-174"/>
<text text-anchor="middle" x="455.795" y="-126" font-family="Arial" font-size="20.00" fill="#000000">Data</text>
<text text-anchor="middle" x="455.795" y="-102" font-family="Arial" font-size="20.00" fill="#000000">ContactoRepository</text>
</g>
<!-- Services -->
<g id="node2" class="node">
<title>Services</title>
<path fill="#6c7b8b" stroke="#6c7b8b" d="M891.498,-74C891.498,-74 807.498,-74 807.498,-74 801.498,-74 795.498,-68 795.498,-62 795.498,-62 795.498,-30 795.498,-30 795.498,-24 801.498,-18 807.498,-18 807.498,-18 891.498,-18 891.498,-18 897.498,-18 903.498,-24 903.498,-30 903.498,-30 903.498,-62 903.498,-62 903.498,-68 897.498,-74 891.498,-74"/>
<text text-anchor="middle" x="849.498" y="-52" font-family="Arial" font-size="20.00" fill="#ffffff">Services</text>
<text text-anchor="middle" x="849.498" y="-28" font-family="Arial" font-size="20.00" fill="#ffffff">Api REST</text>
</g>
<!-- Repositorio&#45;&gt;Services -->
<g id="edge2" class="edge">
<title>Repositorio-&gt;Services</title>
<path fill="none" stroke="#104e8b" stroke-width="2" stroke-dasharray="5,2" d="M551.6021,-101.9922C624.3041,-88.3272 722.2339,-69.9204 785.6198,-58.0065"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="786.3058,-61.4389 795.4871,-56.1518 785.0126,-54.5594 786.3058,-61.4389"/>
</g>
<!-- Room -->
<g id="node3" class="node">
<title>Room</title>
<path fill="#6c7b8b" stroke="#6c7b8b" d="M891.498,-148C891.498,-148 807.498,-148 807.498,-148 801.498,-148 795.498,-142 795.498,-136 795.498,-136 795.498,-104 795.498,-104 795.498,-98 801.498,-92 807.498,-92 807.498,-92 891.498,-92 891.498,-92 897.498,-92 903.498,-98 903.498,-104 903.498,-104 903.498,-136 903.498,-136 903.498,-142 897.498,-148 891.498,-148"/>
<text text-anchor="middle" x="849.498" y="-126" font-family="Arial" font-size="20.00" fill="#ffffff">Room</text>
<text text-anchor="middle" x="849.498" y="-102" font-family="Arial" font-size="20.00" fill="#ffffff">Local DB</text>
</g>
<!-- Repositorio&#45;&gt;Room -->
<g id="edge1" class="edge">
<title>Repositorio-&gt;Room</title>
<path fill="none" stroke="#104e8b" stroke-width="2" stroke-dasharray="5,2" d="M551.6021,-120C624.1545,-120 721.831,-120 785.2281,-120"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="785.4871,-123.5001 795.4871,-120 785.4871,-116.5001 785.4871,-123.5001"/>
</g>
<!-- Mocks -->
<g id="node4" class="node">
<title>Mocks</title>
<path fill="#f0f8ff" stroke="#f0f8ff" d="M919.3141,-246C919.3141,-246 779.6819,-246 779.6819,-246 773.6819,-246 767.6819,-240 767.6819,-234 767.6819,-234 767.6819,-178 767.6819,-178 767.6819,-172 773.6819,-166 779.6819,-166 779.6819,-166 919.3141,-166 919.3141,-166 925.3141,-166 931.3141,-172 931.3141,-178 931.3141,-178 931.3141,-234 931.3141,-234 931.3141,-240 925.3141,-246 919.3141,-246"/>
<text text-anchor="middle" x="849.498" y="-224" font-family="Arial" font-size="20.00" fill="#000000">Mocks</text>
<text text-anchor="middle" x="849.498" y="-200" font-family="Arial" font-size="20.00" fill="#000000">Datos Contactos</text>
<text text-anchor="middle" x="849.498" y="-176" font-family="Arial" font-size="20.00" fill="#000000">de prueba</text>
</g>
<!-- Repositorio&#45;&gt;Mocks -->
<g id="edge3" class="edge">
<title>Repositorio-&gt;Mocks</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M551.6021,-140.928C614.2365,-154.6098 695.5955,-172.3817 757.4587,-185.895"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="757.086,-189.3961 767.6026,-188.1109 758.5799,-182.5574 757.086,-189.3961"/>
</g>
<!-- Dominio -->
<g id="node5" class="node">
<title>Dominio</title>
<path fill="#36648b" stroke="#36648b" d="M132,-174C132,-174 12,-174 12,-174 6,-174 0,-168 0,-162 0,-162 0,-78 0,-78 0,-72 6,-66 12,-66 12,-66 132,-66 132,-66 138,-66 144,-72 144,-78 144,-78 144,-162 144,-162 144,-168 138,-174 132,-174"/>
<text text-anchor="middle" x="72" y="-126" font-family="Arial" font-size="20.00" fill="#ffffff">Modelo</text>
<text text-anchor="middle" x="72" y="-102" font-family="Arial" font-size="20.00" fill="#ffffff">Contacto</text>
</g>
<!-- Dominio&#45;&gt;Repositorio -->
<g id="edge4" class="edge">
<title>Dominio-&gt;Repositorio</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M154.4328,-120C214.7568,-120 296.7648,-120 360.003,-120"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="154.1889,-116.5001 144.1889,-120 154.1889,-123.5001 154.1889,-116.5001"/>
</g>
</g>
</svg>
</p><p>Vamos a concretar una propuesta de organizaci&#xF3;n en paquetes y nomenclatura para el mismo que vamos a seguir durante el curso...</p>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 70%">
<ol>
<li>Crearemos <strong>paquete</strong> <strong><code>data</code></strong> dentro del paquete <strong>principal</strong> de nuestro proyecto. En &#xE9;l, vamos a crear los <strong>repositorios</strong> que se encargar&#xE1;n de obtener los datos de una fuente de datos y convertirlos en un formato con el que el resto de la aplicaci&#xF3;n pueda trabajar. Adem&#xE1;s, contendr&#xE1; los paquetes que van a gestionar las diferentes fuentes de datos de nuestra aplicaci&#xF3;n y esto ser&#xE1; lo primero que vamos hacer porque sin fuente no puede haber repositorio que la encapsule.</li>
</ol>
</div>
<div style="width: auto">
<p align="center" style="zoom:1"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="153px" preserveAspectRatio="none" style="width:185px;height:153px;background:#FFFFFF;" version="1.1" viewBox="0 0 185 153" width="185px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="18.0938" style="stroke:#000000;stroke-width:1.0;" width="71" x="6" y="6"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="8" y="20.457">Android</text><line style="stroke:#000000;stroke-width:1.0;" x1="66" x2="66" y1="6" y2="24.0938"/><polygon fill="#000000" points="69,12,75,12,72,19.0938" style="stroke:#000000;stroke-width:1.0;"/><path d="M17,31.1875 L17,33.1875 L25,33.1875 L25,32.1875 L20,32.1875 L20,31.1875 L17,31.1875 M17,34.1875 L17,38.6875 C17,38.9675 17.22,39.1875 17.5,39.1875 L24.5,39.1875 C24.78,39.1875 25,38.9675 25,38.6875 L25,34.1875 L17,34.1875 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="117" x="26" y="39.5508">[com.pmdm.agenda]</text><path d="M37,46.2813 L37,48.2813 L45,48.2813 L45,47.2813 L40,47.2813 L40,46.2813 L37,46.2813 M37,49.2813 L37,53.7813 C37,54.0613 37.22,54.2813 37.5,54.2813 L44.5,54.2813 C44.78,54.2813 45,54.0613 45,53.7813 L45,49.2813 L37,49.2813 " fill="#0000FF" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="33" x="46" y="54.6445">[data]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="46" y="69.7383">ContactoRepository.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131" x="46" y="84.832">RepositoryConverters.kt</text><path d="M47,91.5625 L47,93.5625 L55,93.5625 L55,92.5625 L50,92.5625 L50,91.5625 L47,91.5625 M47,94.5625 L47,99.0625 C47,99.3425 47.22,99.5625 47.5,99.5625 L54.5,99.5625 C54.78,99.5625 55,99.3425 55,99.0625 L55,94.5625 L47,94.5625 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="47" x="56" y="99.9258">[mocks]</text><path d="M57,106.6563 L57,108.6563 L65,108.6563 L65,107.6563 L60,107.6563 L60,106.6563 L57,106.6563 M57,109.6563 L57,114.1563 C57,114.4363 57.22,114.6563 57.5,114.6563 L64.5,114.6563 C64.78,114.6563 65,114.4363 65,114.1563 L65,109.6563 L57,109.6563 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="58" x="66" y="115.0195">[contacto]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="112" x="66" y="130.1133">ContactoDaoMock.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="66" y="145.207">ContactoMock.kt</text><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="9" y="33.6406"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="48.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="28" y1="49.7344" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="51.7344" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="64.8281" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="51.7344" y2="79.9219"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="79.9219" y2="79.9219"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="39" y="94.0156"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="51.7344" y2="95.0156"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="95.0156" y2="95.0156"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="49" y="109.1094"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="97.0156" y2="110.1094"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="110.1094" y2="110.1094"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="112.1094" y2="125.2031"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="125.2031" y2="125.2031"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="112.1094" y2="140.2969"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="140.2969" y2="140.2969"/><!--SRC=[PL7RQi9047tVhvYdeWa6JQqjGSJMIy4QAXfzAHNMx2gBoOxiJWGH_xrRD2hjwxdCEJFJjSGDMPuHOqUsVDN2e19BTaoO3vxNVbXZ9gJfVAMO1xjSv07VI2tuj-Snt_UXdMA69bfbXUpSomMdKkD33pNnb70gTsWLeJa4MpfJDyY9zjAGDFPANeORFF3iNqAEwTQM4N-xdlEkxAr2dsFiZ6N47NE1J-p4kcx3yqac6TSqZyVWgbc56Xf1M0yVWx0oApGCvGh25ZJgKVWKDP-XDqZWbwwoolja31OBaqeGof9HguASlyf6VCzXMcXIkOpWSoVrgFzH0Z3GUsLGvr8J6otYcw3LhBqfWfaqhWaiOjQNQrvav1mf2gKt4SoJOUs5ZRdU5Ev74KZBUkZccaC4WzaF]--></g></svg></p></div>
</div>
<ol start="2">
<li>
<p>Crearemos <strong>paquete</strong> <strong><code>mocks</code></strong> que definir&#xE1; <strong>colecciones de objetos de prueba</strong> que simulan una fuente de datos. Como puede haber diferentes clases, vamos a crear un paquete <strong><code>mocks.contacto</code></strong> el cual definir&#xE1; las clases que contienen los contactos de prueba.</p>
<ul>
<li>
<p><strong><a href="assets/codigo/ContactoMock.kt">ContactoMock.kt</a></strong> es una clase que define un objeto de prueba de tipo <strong><code>Contacto</code></strong>. En este caso es id&#xE9;ntica a la clase <strong><code>Contacto</code></strong> que hemos definido en el modelo. Sin embargo, en un caso real, podr&#xED;a ser diferente ya que el modelo es independiente de la fuente de datos.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword keyword-data">data</span> <span class="token keyword keyword-class">class</span> <span class="token function">ContactoMock</span><span class="token punctuation">(</span>
    <span class="token keyword keyword-val">val</span> id<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> nombre<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> apellidos<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> foto<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> correo<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> telefono<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword keyword-val">val</span> categorias<span class="token operator">:</span> EnumSet<span class="token operator">&lt;</span>Categorias<span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-enum">enum</span> <span class="token keyword keyword-class">class</span> Categorias <span class="token punctuation">{</span>
        Amigos<span class="token punctuation">,</span> Trabajo<span class="token punctuation">,</span> Familia<span class="token punctuation">,</span> Emergencias
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
 <div style="page-break-after:always;"></div>
<ul>
<li>
<p><strong><a href="assets/codigo/ContactoDaoMock.kt">ContactoDaoMock.kt</a></strong> es una clase que define una colecci&#xF3;n de objetos de prueba de tipo <strong><code>ContactoMock</code></strong>. En este caso, es una clase que implementa las operaciones CRUD (Create, Read, Update, Delete) sobre la colecci&#xF3;n de objetos de prueba como los siguientes...</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword keyword-class">class</span> ContactoDaoMock <span class="token punctuation">{</span>
    <span class="token comment">// Colecci&#xF3;n de datos de prueba</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-var">var</span> contactos <span class="token operator">=</span> <span class="token function">mutableListOf</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

    <span class="token comment">// Obtiene una lista de contactos</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>ContactoMock<span class="token operator">&gt;</span> <span class="token operator">=</span> contactos
    <span class="token comment">// Obtiene un contacto por Id</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> ContactoMock<span class="token operator">?</span> <span class="token operator">=</span> contactos<span class="token punctuation">.</span><span class="token function">find</span> <span class="token punctuation">{</span> u <span class="token operator">-&gt;</span> u<span class="token punctuation">.</span>id <span class="token operator">==</span> id <span class="token punctuation">}</span>
    <span class="token comment">// Inserta un contacto en la colecci&#xF3;n de contactos</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">insert</span><span class="token punctuation">(</span>contacto<span class="token operator">:</span> ContactoMock<span class="token punctuation">)</span> <span class="token operator">=</span> contactos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>contacto<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></li>
</ul>
</li>
<li>
<p>Dentro del paquete <strong><code>data</code></strong>, crearemos el fichero <strong><a href="assets/codigo/RepositoryConverters.kt">RepositoryConverters.kt</a></strong> que contendr&#xE1; las <strong>funciones de extensi&#xF3;n</strong> para transformar el <strong>modelo</strong> y la <strong>fuente de datos</strong> y viceversa. Al usar funciones de extensi&#xF3;n, podemos agregar m&#xE9;todos a una clase sin tener que modificar la definici&#xF3;n de la clase manteniendo el principio OCP (Open-Closed Principle) de SOLID. Adem&#xE1;s, evitamos que el modelo tenga <strong>dependencias</strong> de la fuente de datos.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token comment">// Convierte un un objeto Contacto del modelo en un ContactoMock</span>
<span class="token keyword keyword-fun">fun</span> Contacto<span class="token punctuation">.</span><span class="token function">toContactoMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">ContactoMock</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token comment">// Convierte un un objeto ContactoMock de la fuente de datos en un Contacto</span>
<span class="token keyword keyword-fun">fun</span> ContactoMock<span class="token punctuation">.</span><span class="token function">toContacto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">Contacto</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</pre></li>
<li>
<p>entro del paquete <strong><code>data</code></strong>, crearemos el fichero <strong><a href="assets/codigo/ContactoRepository.kt">ContactoRepository.kt</a></strong> que contendr&#xE1; la clase <strong><code>ContactoRepository</code></strong> que implementa las operaciones CRUD (Create, Read, Update, Delete) sobre <strong>objetos del modelo</strong> <strong><code>Contacto</code></strong> y se encargar&#xE1; de replicarlos en la fuente de datos en nuestro caso el &apos;<em><strong>mock</strong></em>&apos; de forma transparente.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword keyword-class">class</span> ContactoRepository <span class="token punctuation">{</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-var">var</span> dao <span class="token operator">=</span> <span class="token function">ContactoDaoMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> MutableList<span class="token operator">&lt;</span>Contacto<span class="token operator">&gt;</span> <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span><span class="token function">toContacto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toMutableList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token keyword keyword-get">get</span><span class="token punctuation">(</span>id<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Contacto<span class="token operator">?</span> <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toContacto</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-fun">fun</span> <span class="token function">insert</span><span class="token punctuation">(</span>contacto<span class="token operator">:</span> Contacto<span class="token punctuation">)</span> <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>contacto<span class="token punctuation">.</span><span class="token function">toContactoMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x1F4E3; <strong>Resumen</strong>: Podemos decir que es una envoltorio o &apos;<em>Wapper</em>&apos; que <strong>encapsula la fuente de datos</strong> y sus datos de forma que el resto de la aplicaci&#xF3;n pueda trabajar con ellos como un modelo gen&#xE9;rico sin saber cual es la fuente de los mismos.</p>
<p>Aqu&#xED; tienes un <strong><a href="https://www.youtube.com/watch?v=QqsH0OgqafA">v&#xED;deo</a></strong> que <strong>te pueden ayudar a tener una idea de su funcionamiento del patr&#xF3;n repository</strong> en en otros lenguajes de programaci&#xF3;n. No hace falta entender 100% el c&#xF3;digo, pero si la idea general del patr&#xF3;n.</p>
</blockquote>
</li>
</ol>
<div style="page-break-after:always;"></div>
<h3 class="mume-header" id="estructurando-la-capa-de-ui">Estructurando la capa de UI</h3>

<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 75%">
<p>Esta va a ser la capa m&#xE1;s compleja organizativamente. Pues vamos atener diferentes paquetes para diferenciar claramente las diferentes partes de la capa de UI.</p>
<p>En el <strong>diagrama de la derecha</strong>, tienes nuestra propuesta de plantilla organizativa para esta capa que hay en el &apos;<em>cheatsheet</em>&apos;. Aunque en los futuros temas vamos a abordar con detalle los ficheros que vamos a crear en cada uno de los paquetes, vamos a hacer una <strong>primera aproximaci&#xF3;n</strong> a la estructura de la capa de UI para tener <strong>una visi&#xF3;n global de la misma</strong>.</p>
<p>Esta estructura responder&#xED;a a la <strong><a href="https://developer.android.com/jetpack/guide/ui-layer?hl=es-419#state-holders">propuesta de Google</a></strong> donde existe un <strong>contenedor de estados</strong> que contiene los datos, los expone a la IU y controla la l&#xF3;gica. En nuestro caso, este contenedor de estados ser&#xE1; el <strong>ViewModel</strong>.</p>
<p align="center" style="zoom:0.5"><!--?xml version="1.0" encoding="UTF-8" standalone="no"?-->

<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="867pt" height="316pt" viewBox="0.00 0.00 867.23 316.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 312)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-312 863.228,-312 863.228,4 -4,4"/>
<g id="clust1" class="cluster">
<title>clusterUI</title>
<path fill="none" stroke="#6495ed" stroke-width="5" d="M273.228,-8C273.228,-8 839.228,-8 839.228,-8 845.228,-8 851.228,-14 851.228,-20 851.228,-20 851.228,-288 851.228,-288 851.228,-294 845.228,-300 839.228,-300 839.228,-300 273.228,-300 273.228,-300 267.228,-300 261.228,-294 261.228,-288 261.228,-288 261.228,-20 261.228,-20 261.228,-14 267.228,-8 273.228,-8"/>
<text text-anchor="middle" x="806.555" y="-278" font-family="Arial" font-size="20.00" fill="#6495ed">Capa UI</text>
</g>
<!-- DataLayer -->
<g id="node1" class="node">
<title>DataLayer</title>
<path fill="#36648b" stroke="#36648b" d="M134.084,-227C134.084,-227 11.972,-227 11.972,-227 5.972,-227 -.028,-221 -.028,-215 -.028,-215 -.028,-59 -.028,-59 -.028,-53 5.972,-47 11.972,-47 11.972,-47 134.084,-47 134.084,-47 140.084,-47 146.084,-53 146.084,-59 146.084,-59 146.084,-215 146.084,-215 146.084,-221 140.084,-227 134.084,-227"/>
<text text-anchor="middle" x="73.028" y="-131" font-family="Arial" font-size="20.00" fill="#ffffff">Capa de datos</text>
</g>
<!-- ViewModel -->
<g id="node2" class="node">
<title>ViewModel</title>
<path fill="#4f94cd" stroke="#4f94cd" d="M433.228,-228C433.228,-228 313.228,-228 313.228,-228 307.228,-228 301.228,-222 301.228,-216 301.228,-216 301.228,-60 301.228,-60 301.228,-54 307.228,-48 313.228,-48 313.228,-48 433.228,-48 433.228,-48 439.228,-48 445.228,-54 445.228,-60 445.228,-60 445.228,-216 445.228,-216 445.228,-222 439.228,-228 433.228,-228"/>
<text text-anchor="middle" x="373.228" y="-132" font-family="Arial" font-size="20.00" fill="#ffffff">ViewModel</text>
</g>
<!-- DataLayer&#45;&gt;ViewModel -->
<!-- DataLayer&#45;&gt;ViewModel -->
<g id="edge5" class="edge">
<title>DataLayer-&gt;ViewModel</title>
<path fill="none" stroke="#104e8b" stroke-width="2" stroke-dasharray="1,5" d="M146.0813,-107.6667C146.0813,-107.6667 291.147,-107.6667 291.147,-107.6667"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="291.147,-111.1668 301.147,-107.6667 291.1469,-104.1668 291.147,-111.1668"/>
<text text-anchor="middle" x="208.642" y="-130.5" font-family="Arial" font-size="15.00" fill="#104e8b">Datos de</text>
<text text-anchor="middle" x="208.642" y="-112.5" font-family="Arial" font-size="15.00" fill="#104e8b">la Aplicaci&#xF3;n</text>
</g>
<!-- UIState -->
<g id="node3" class="node">
<title>UIState</title>
<path fill="#2f4f4f" stroke="#2f4f4f" d="M580.228,-138C580.228,-138 532.228,-138 532.228,-138 526.228,-138 520.228,-132 520.228,-126 520.228,-126 520.228,-78 520.228,-78 520.228,-72 526.228,-66 532.228,-66 532.228,-66 580.228,-66 580.228,-66 586.228,-66 592.228,-72 592.228,-78 592.228,-78 592.228,-126 592.228,-126 592.228,-132 586.228,-138 580.228,-138"/>
<text text-anchor="middle" x="556.228" y="-108" font-family="Arial" font-size="20.00" fill="#ffffff">UI</text>
<text text-anchor="middle" x="556.228" y="-84" font-family="Arial" font-size="20.00" fill="#ffffff">State</text>
</g>
<!-- ViewModel&#45;&gt;UIState -->
<g id="edge1" class="edge">
<title>ViewModel-&gt;UIState</title>
<path fill="none" stroke="#104e8b" stroke-width="2" stroke-dasharray="1,5" d="M445.2918,-102C470.8969,-102 498.631,-102 519.9637,-102"/>
</g>
<!-- UI -->
<g id="node4" class="node">
<title>UI</title>
<path fill="#63b8ff" stroke="#63b8ff" d="M799.228,-228C799.228,-228 679.228,-228 679.228,-228 673.228,-228 667.228,-222 667.228,-216 667.228,-216 667.228,-60 667.228,-60 667.228,-54 673.228,-48 679.228,-48 679.228,-48 799.228,-48 799.228,-48 805.228,-48 811.228,-54 811.228,-60 811.228,-60 811.228,-216 811.228,-216 811.228,-222 805.228,-228 799.228,-228"/>
<text text-anchor="middle" x="739.228" y="-144" font-family="Arial" font-size="20.00" fill="#ffffff">Componenres</text>
<text text-anchor="middle" x="739.228" y="-120" font-family="Arial" font-size="20.00" fill="#ffffff">en la UI</text>
</g>
<!-- ViewModel&#45;&gt;UI -->
<g id="edge3" class="edge">
<title>ViewModel-&gt;UI</title>
<path fill="none" stroke="#104e8b" stroke-width="2" d="M455.5378,-183C455.5378,-183 667.0684,-183 667.0684,-183"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="455.5379,-179.5001 445.5378,-183 455.5378,-186.5001 455.5379,-179.5001"/>
<text text-anchor="middle" x="556.228" y="-196.5" font-family="Arial" font-size="15.00" fill="#104e8b">Eventos</text>
<text text-anchor="middle" x="556.228" y="-178.5" font-family="Arial" font-size="15.00" fill="#104e8b"> </text>
</g>
<!-- UIState&#45;&gt;UI -->
<g id="edge2" class="edge">
<title>UIState-&gt;UI</title>
<path fill="none" stroke="#104e8b" stroke-width="2" stroke-dasharray="1,5" d="M592.3829,-102C592.3829,-102 657.1868,-102 657.1868,-102"/>
<polygon fill="#104e8b" stroke="#104e8b" stroke-width="2" points="657.1868,-105.5001 667.1868,-102 657.1868,-98.5001 657.1868,-105.5001"/>
</g>
</g>
</svg>
</p></div>
<div style="width: auto">
<p align="center" style="zoom:1"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="485px" preserveAspectRatio="none" style="width:241px;height:485px;background:#FFFFFF;" version="1.1" viewBox="0 0 241 485" width="241px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="18.0938" style="stroke:#000000;stroke-width:1.0;" width="71" x="6" y="6"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="8" y="20.457">Android</text><line style="stroke:#000000;stroke-width:1.0;" x1="66" x2="66" y1="6" y2="24.0938"/><polygon fill="#000000" points="69,12,75,12,72,19.0938" style="stroke:#000000;stroke-width:1.0;"/><path d="M17,31.1875 L17,33.1875 L25,33.1875 L25,32.1875 L20,32.1875 L20,31.1875 L17,31.1875 M17,34.1875 L17,38.6875 C17,38.9675 17.22,39.1875 17.5,39.1875 L24.5,39.1875 C24.78,39.1875 25,38.9675 25,38.6875 L25,34.1875 L17,34.1875 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="113" x="26" y="39.5508">[com.pmdm.myapp]</text><path d="M27,46.2813 L27,48.2813 L35,48.2813 L35,47.2813 L30,47.2813 L30,46.2813 L27,46.2813 M27,49.2813 L27,53.7813 C27,54.0613 27.22,54.2813 27.5,54.2813 L34.5,54.2813 C34.78,54.2813 35,54.0613 35,53.7813 L35,49.2813 L27,49.2813 " fill="#0000FF" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="18" x="36" y="54.6445">[ui]</text><path d="M37,61.375 L37,63.375 L45,63.375 L45,62.375 L40,62.375 L40,61.375 L37,61.375 M37,64.375 L37,68.875 C37,69.155 37.22,69.375 37.5,69.375 L44.5,69.375 C44.78,69.375 45,69.155 45,68.875 L45,64.375 L37,64.375 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="51" x="46" y="69.7383">[themes]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="46" y="84.832">DarkTheme.kt</text><path d="M37,91.5625 L37,93.5625 L45,93.5625 L45,92.5625 L40,92.5625 L40,91.5625 L37,91.5625 M37,94.5625 L37,99.0625 C37,99.3425 37.22,99.5625 37.5,99.5625 L44.5,99.5625 C44.78,99.5625 45,99.3425 45,99.0625 L45,94.5625 L37,94.5625 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="41" x="46" y="99.9258">[views]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73" x="46" y="115.0195">MainActivity.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="46" y="130.1133">Fragments.kt</text><path d="M37,136.8438 L37,138.8438 L45,138.8438 L45,137.8438 L40,137.8438 L40,136.8438 L37,136.8438 M37,139.8438 L37,144.3438 C37,144.6238 37.22,144.8438 37.5,144.8438 L44.5,144.8438 C44.78,144.8438 45,144.6238 45,144.3438 L45,139.8438 L37,139.8438 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="66" x="46" y="145.207">[navigation]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93" x="46" y="160.3008">MainNavGraph.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="46" y="175.3945">Feature1ScreenRoute.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="46" y="190.4883">Feature2ScreenRoute.kt</text><path d="M37,197.2188 L37,199.2188 L45,199.2188 L45,198.2188 L40,198.2188 L40,197.2188 L37,197.2188 M37,200.2188 L37,204.7188 C37,204.9988 37.22,205.2188 37.5,205.2188 L44.5,205.2188 C44.78,205.2188 45,204.9988 45,204.7188 L45,200.2188 L37,200.2188 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="85" x="46" y="205.582">[composables]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="46" y="220.6758">Composable1.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="188" x="46" y="235.7695">ComposableUiState1.kt (Optional)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="46" y="250.8633">Composable2.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="188" x="46" y="265.957">ComposableUiState2.kt (Optional)</text><path d="M37,272.6875 L37,274.6875 L45,274.6875 L45,273.6875 L40,273.6875 L40,272.6875 L37,272.6875 M37,275.6875 L37,280.1875 C37,280.4675 37.22,280.6875 37.5,280.6875 L44.5,280.6875 C44.78,280.6875 45,280.4675 45,280.1875 L45,275.6875 L37,275.6875 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56" x="46" y="281.0508">[features]</text><path d="M47,287.7813 L47,289.7813 L55,289.7813 L55,288.7813 L50,288.7813 L50,287.7813 L47,287.7813 M47,290.7813 L47,295.2813 C47,295.5613 47.22,295.7813 47.5,295.7813 L54.5,295.7813 C54.78,295.7813 55,295.5613 55,295.2813 L55,290.7813 L47,290.7813 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56" x="56" y="296.1445">[feature1]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="100" x="56" y="311.2383">Feature1Screen.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="56" y="326.332">Feature1ViewModel.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="56" y="341.4258">Feature1UiState.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="56" y="356.5195">Feature1Events.kt</text><path d="M57,363.25 L57,365.25 L65,365.25 L65,364.25 L60,364.25 L60,363.25 L57,363.25 M57,366.25 L57,370.75 C57,371.03 57.22,371.25 57.5,371.25 L64.5,371.25 C64.78,371.25 65,371.03 65,370.75 L65,366.25 L57,366.25 " fill="#4169E1" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="79" x="66" y="371.6133">[component1]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="66" y="386.707">component1.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="66" y="401.8008">component1UiState.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="66" y="416.8945">component1Events.kt</text><path d="M57,423.625 L57,425.625 L65,425.625 L65,424.625 L60,424.625 L60,423.625 L57,423.625 M57,426.625 L57,431.125 C57,431.405 57.22,431.625 57.5,431.625 L64.5,431.625 C64.78,431.625 65,431.405 65,431.125 L65,426.625 L57,426.625 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="79" x="66" y="431.9883">[component2]</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="66" y="447.082">component2.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="66" y="462.1758">component2UiState.kt</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="66" y="477.2695">component2Events.kt</text><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="9" y="33.6406"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="19" y="48.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="49.7344" y2="49.7344"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="63.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="64.8281" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="66.8281" y2="79.9219"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="79.9219" y2="79.9219"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="94.0156"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="95.0156"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="95.0156" y2="95.0156"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="97.0156" y2="110.1094"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="110.1094" y2="110.1094"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="97.0156" y2="125.2031"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="125.2031" y2="125.2031"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="139.2969"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="140.2969"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="140.2969" y2="140.2969"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="142.2969" y2="155.3906"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="155.3906" y2="155.3906"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="142.2969" y2="170.4844"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="170.4844" y2="170.4844"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="142.2969" y2="185.5781"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="185.5781" y2="185.5781"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="199.6719"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="200.6719"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="200.6719" y2="200.6719"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="202.6719" y2="215.7656"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="215.7656" y2="215.7656"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="202.6719" y2="230.8594"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="230.8594" y2="230.8594"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="202.6719" y2="245.9531"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="245.9531" y2="245.9531"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="202.6719" y2="261.0469"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="261.0469" y2="261.0469"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="29" y="275.1406"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="276.1406"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="28" y1="276.1406" y2="276.1406"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="39" y="290.2344"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="30" y1="278.1406" y2="291.2344"/><line style="stroke:#888888;stroke-width:1.0;" x1="30" x2="38" y1="291.2344" y2="291.2344"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="306.3281"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="306.3281" y2="306.3281"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="321.4219"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="321.4219" y2="321.4219"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="336.5156"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="336.5156" y2="336.5156"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="351.6094"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="351.6094" y2="351.6094"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="49" y="365.7031"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="366.7031"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="366.7031" y2="366.7031"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="368.7031" y2="381.7969"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="381.7969" y2="381.7969"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="368.7031" y2="396.8906"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="396.8906" y2="396.8906"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="368.7031" y2="411.9844"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="411.9844" y2="411.9844"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="49" y="426.0781"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="40" y1="293.2344" y2="427.0781"/><line style="stroke:#888888;stroke-width:1.0;" x1="40" x2="48" y1="427.0781" y2="427.0781"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="429.0781" y2="442.1719"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="442.1719" y2="442.1719"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="429.0781" y2="457.2656"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="457.2656" y2="457.2656"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="50" y1="429.0781" y2="472.3594"/><line style="stroke:#888888;stroke-width:1.0;" x1="50" x2="58" y1="472.3594" y2="472.3594"/><!--SRC=[ZLDRRvim57xthpXFKn9KLBokcr1LjKlIIbbOgvBaPLgb4t2eLR2HiQcYQlzzPhd08CiYthxR-NoCRmgDIXUOQaBUoVEjY9NayJDvdn471eEh3okPnanT_uXavkPPdBdP6lFyvs1070Uk8fbAvIzJmwwROiCtWhr2oJMc7Pb-OHahjb87HgXUPnNalkh_cqlEtcflW5pSHfgNNA-tTWVk52OP4xeuAL1WoHFKN8g_KhzZUQymVwbJ6MgZc1T6YZ7n98rcROvskUEpxNPpMU0oRQnZkCUyVNwDpNceKV-XeFUGLxKnxRTLzDzEsdKUxxZQdAqkU8hQswdRUziLg_65lT10nYpjKjlANM9SDgxtf2KBQwXBEL23-vGcs9xSvDh33ywYXsRHGtdqo2nQp_fblnicuisRVKnHw7amXPAfmjuaU2uzfnzTsWkDi6jQ0hq4xzodd_oBpp0Spw2Y-wHt_pY5GXeLCOXveHLVckfFw9C9bWXFHcYUCHyUSYOcesyx0CQYv4gAwbMHoIAe1PSNPr-vXf0fsmGM0Hcn5PfKMqSaOouI7-QpkxClP8eYCPZOR5QGeRIvQkt3EFmD]--></g></svg></p></div>
</div>
<p>Vamos a explicar brevemente los tres elementos de la Capa de UI y cada uno de los sub-paquetes que hemos creado en dentro del paquete <strong><code>UI</code></strong> que la representa.</p>
<blockquote>
<p>&#x1F4CC; <strong>Nota</strong>: Iremos profundizando en su implementaci&#xF3;n en los siguientes temas.</p>
</blockquote>
<p>Elementos que la forman:</p>
<ol>
<li>
<p><strong><code>ViewModel</code></strong> Como hemos comentado es el <strong>Contenedor de estados</strong> que contiene datos, los expone a la IU y controla la l&#xF3;gica. Podemos tener un <strong>ViewModel</strong> por cada <strong>pantalla</strong> de nuestra aplicaci&#xF3;n o compartirlo entre varias. Adem&#xE1;s, en nuestra propuesta de arquitectura se encargar&#xE1; gestionar:</p>
<ul>
<li>La <strong>gesti&#xF3;n de los datos</strong> de los elementos visuales a trav&#xE9;s de objetos <strong><code>UiState</code></strong> que representan el estado de visualizaci&#xF3;n de los componentes en la UI.</li>
<li>La <strong>l&#xF3;gica</strong> de la pantalla entre los que vamos a incluir la gesti&#xF3;n de <strong>casos de uso</strong> de los objetos del modelo.</li>
<li>Derivada de gesti&#xF3;n de la l&#xF3;gica tendremos la <strong>gesti&#xF3;n de los eventos</strong> de los componentes en la UI.</li>
<li>Gesti&#xF3;n de la visualizaci&#xF3;n de estados de <strong>error</strong>.</li>
<li>Transformaci&#xF3;n de los objetos del <strong>UiState</strong> a los objetos de <strong>Modelo</strong> y viceversa.</li>
<li>Comunicaci&#xF3;n con la <strong>capa de datos</strong> a trav&#xE9;s de las &apos;<em>clases repositorio</em>&apos;.</li>
</ul>
</li>
<li>
<p><strong><code>UiState</code></strong> estar&#xE1; representado por una o varias clases que representar&#xE1;n el <strong>estado de visualizaci&#xF3;n</strong> de los elementos visuales de la pantalla. Podr&#xED;amos tener:</p>
<ul>
<li>Un <strong><code>UiState</code></strong> por cada <strong>elemento visual</strong> de la pantalla. Por ejemplo, un <strong><code>UiState</code></strong> de tipo booleano para representar el estado de un <strong>icono</strong> o si se visualiza o no un <strong>circulo de progreso</strong>, etc.</li>
<li>Un <strong><code>UiState</code></strong> por cada <strong>grupo de elementos visuales relacionados entre si</strong> en la pantalla. Por ejemplo, una <strong><code>data class NombreCompletoUiState</code></strong> con <strong><code>nombre</code></strong>, <strong><code>apellido1</code></strong> y <strong><code>apellido2</code></strong> a modo de <strong><code>UiState</code></strong> para representar el estado de <strong>tres campos de texto</strong> que representen el nombre completo de una persona.</li>
<li>Un <strong><code>UiState</code></strong> por cada <strong>pantalla</strong> de nuestra aplicaci&#xF3;n que a su vez este formado por UiStates de grupo de elementos visuales que se repitan entre pantallas.</li>
</ul>
</li>
<li>
<p><strong><code>Componentes en la UI</code></strong> son los elementos visuales que renderizan los datos en la pantalla. En nuestro caso, ser&#xE1;n los componentes de <strong>Jetpack Compose</strong> que renderizan los datos en la pantalla. Sin embargo, podr&#xED;a sustituir de forma sencilla por componentes tradicionales de <strong>XML</strong> o <em>&apos;Vistas&apos;</em>.</p>
</li>
</ol>
<p>Sub-paquetes de la capa de UI:</p>
<ol>
<li><strong><code>ui.themes</code></strong> es un paquete que contendr&#xE1; los diferentes temas de la aplicaci&#xF3;n. Que contendr&#xE1;n los colores, tipograf&#xED;as, etc. que vamos a usar en nuestra aplicaci&#xF3;n.</li>
<li><strong><code>ui.views</code></strong> es un paquete que contendr&#xE1; las diferentes vistas de la aplicaci&#xF3;n. En nuestro caso, tendremos una &#xFA;nica vista que ser&#xE1; la <strong><code>MainActivity</code></strong> que ser&#xE1; la actividad principal de nuestra aplicaci&#xF3;n. Solo si tuvi&#xE9;ramos, puntos de entrada secundarios en nuestra aplicaci&#xF3;n definir&#xED;amos m&#xE1;s &apos;<em>activities</em>&apos;.</li>
<li><strong><code>ui.navigation</code></strong> es un paquete que contendr&#xE1; el grafo de navegaci&#xF3;n de nuestra aplicaci&#xF3;n. Con las diferentes rutas de navegaci&#xF3;n entre las pantallas.</li>
<li><strong><code>ui.composables</code></strong> aqu&#xED; definiremos aquellos componentes personalizados de la aplicaci&#xF3;n que sean <strong>reutilizables</strong> entre diferentes pantallas y las clases que representen su <strong>UiState</strong> si fuera necesario.</li>
<li><strong><code>ui.features</code></strong> es un paquete que contendr&#xE1; las diferentes pantallas de nuestra aplicaci&#xF3;n. En nuestro ejemplo de plantilla, tendremos la pantalla <strong><code>Feature1Screen</code></strong> con un <strong>ViewModel</strong> para gestionarla definido en la clase <strong><code>Feature1ViewModel</code></strong> y su correspondiente <strong>UiState</strong> definido en la clase <strong><code>Feature1UiState</code></strong>. Adem&#xE1;s, si esta pantalla esta compuesta por diferentes grupos l&#xF3;gicos de elementos visuales, podr&#xED;amos crear un paquete <strong><code>component1</code></strong> y <strong><code>component2</code></strong> con sus correspondientes <strong>ViewModel</strong> y <strong>UiState</strong> para gestionarlos. De esta manera si tuvi&#xE9;ramos que reutilizarlos en otra pantalla, podr&#xED;amos hacerlo f&#xE1;cilmente conservando toda la l&#xF3;gica.</li>
</ol>
<div style="page-break-after:always;"></div>
<h2 class="mume-header" id="ap%C3%A9ndice-i---codificando-im%C3%A1genes-en-base64">Ap&#xE9;ndice I - Codificando im&#xE1;genes en Base64</h2>

<p>En ocasiones, necesitamos codificar una imagen en Base64 para poder enviarla a un servidor o almacenarla en una base de datos. Para ello, podemos usar la siguiente funci&#xF3;n que nos permite codificar una imagen en Base64.</p>
<p>La <strong>codificaci&#xF3;n base64</strong> consiste en realizar <strong>agrupaciones de 6 bits</strong> y asignarle un  car&#xE1;cter:</p>
<ul>
<li>Letras may&#xFA;sculas (<strong>0-25</strong>): ABCDEFGHIJKLMNOPQRSTUVWXYZ</li>
<li>Letras min&#xFA;sculas (<strong>26-51</strong>): abcdefghijklmnopqrstuvwxyz</li>
<li>D&#xED;gitos decimales (<strong>52-61</strong>): 0123456789</li>
<li>S&#xED;mbolos especiales (<strong>62-63</strong>): +/</li>
</ul>
<p>Si la cadena de bytes no contiene exactamente un m&#xFA;ltiplo de 6 bits, se <strong>completar&#xE1; con ceros</strong>.</p>
<blockquote>
<p><strong>Ejemplo</strong>: Supongamos la cadena ...</p>
<table>
<thead>
<tr>
<th><strong>Cadena</strong></th>
<th><strong>Binario</strong></th>
<th><strong>Hexadecimal</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>a&#xD8;</td>
<td>0110 0001 1100 0011 1001 1000</td>
<td>61 C3 98</td>
</tr>
</tbody>
</table>
<p>Si queremos codificar esta cadena de bits en Base64 tendremos que realizar <strong>grupos de 6 bits</strong>:</p>
<table>
<thead>
<tr>
<th><strong>Binario</strong></th>
<th><strong>Grupos de 6 bits</strong></th>
<th><strong>Base 64</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0110 0001 1100 0011 1001 1000</td>
<td>011000 011100 001110 01100</td>
<td>YcOY</td>
</tr>
</tbody>
</table>
</blockquote>
<p>Aqu&#xED; tienes diferentes URL&apos;s de utilidad que te permiten codificar y decodificar textos e im&#xE1;genes en Base64:</p>
<ul>
<li><a href="https://codebeautify.org/text-to-base64-converter">https://codebeautify.org/text-to-base64-converter</a></li>
<li><a href="https://codebeautify.org/base64-to-text-converter">https://codebeautify.org/base64-to-text-converter</a></li>
<li><a href="https://codebeautify.org/image-to-base64-converter">https://codebeautify.org/image-to-base64-converter</a></li>
<li><a href="https://codebeautify.org/base64-to-image-converter">https://codebeautify.org/base64-to-image-converter</a></li>
</ul>
<h3 class="mume-header" id="funciones-de-utilidad-para-codificar-y-decodificar-im%C3%A1genes">Funciones de utilidad para codificar y decodificar im&#xE1;genes</h3>

<p>En el siguiente c&#xF3;digo tienes una serie de funciones de utilidad para codificar y decodificar im&#xE1;genes en Base64. Puedes descargar el c&#xF3;digo de las funciones de utilidad desde el siguiente enlace <strong><a href="assets/codigo/Imagenes.kt">Imagenes.kt</a></strong>.</p>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px">
<div style="width: 80%">
<p>En nuestra propuesta organizativa de proyecto, estas funciones de utilidad las vamos a incluir en el paquete <strong><code>utilities.imagenes</code></strong> dentro del paquete <strong>principal</strong> de nuestro proyecto y a su vez. Iremos pues, creando dentro de este paquete diferentes paquetes para agrupar las diferentes funciones de utilidad que vayamos creando.</p>
</div>
<div style="width: auto">
<p align="center" style="zoom:1"><!--?xml version="1.0" encoding="us-ascii" standalone="no"?--><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="78px" preserveAspectRatio="none" style="width:151px;height:78px;background:#FFFFFF;" version="1.1" viewBox="0 0 151 78" width="151px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="18.0938" style="stroke:#000000;stroke-width:1.0;" width="71" x="6" y="6"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="8" y="20.457">Android</text><line style="stroke:#000000;stroke-width:1.0;" x1="66" x2="66" y1="6" y2="24.0938"/><polygon fill="#000000" points="69,12,75,12,72,19.0938" style="stroke:#000000;stroke-width:1.0;"/><path d="M17,31.1875 L17,33.1875 L25,33.1875 L25,32.1875 L20,32.1875 L20,31.1875 L17,31.1875 M17,34.1875 L17,38.6875 C17,38.9675 17.22,39.1875 17.5,39.1875 L24.5,39.1875 C24.78,39.1875 25,38.9675 25,38.6875 L25,34.1875 L17,34.1875 " fill="#000000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="26" y="39.5508">[com.pmdm.agenda]</text><path d="M27,46.2813 L27,48.2813 L35,48.2813 L35,47.2813 L30,47.2813 L30,46.2813 L27,46.2813 M27,49.2813 L27,53.7813 C27,54.0613 27.22,54.2813 27.5,54.2813 L34.5,54.2813 C34.78,54.2813 35,54.0613 35,53.7813 L35,49.2813 L27,49.2813 " fill="#0000FF" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#0000FF" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="108" x="36" y="54.6445">[utilities.imagenes]</text><text fill="#4169E1" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="70" x="46" y="69.7383">Imagenes.kt</text><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="9" y="33.6406"/><rect fill="none" height="2" style="stroke:#888888;stroke-width:1.0;" width="2" x="19" y="48.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="10" y1="36.6406" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="10" x2="18" y1="49.7344" y2="49.7344"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="20" y1="51.7344" y2="64.8281"/><line style="stroke:#888888;stroke-width:1.0;" x1="20" x2="38" y1="64.8281" y2="64.8281"/><!--SRC=[HO_RQW8n48RlynHpLNJ5HRVMbb34raEf1ohTrPkY43UZX6OdaeCWqdTlf1QPkvdlc_cdxxomtWdj6JkppGj9QvJSi7F16l1yjpDQekrzbQPA3vMiKh57acBD6d5Q6cqit-g0lIIviS4hhRn2bwhgWgDR9qaKReer9w6ltlkLIRzzf7vYzUE5lq0BBSWlvpCuedNA4BJJh9NTfraj3mHZt4BMXNQBPm-yymY3KG6NSPtLtXOpS2RO4a4gvwtQnb26wcmYZW8-0tbL8OUF0z9aEFrlm8YEoXgga3oRhEOteDjflYeFETgO15PpDiIT2Df7epHIqPx3iXWtdzXCq3x4XpYWOmCJzzeJXr7-2m00]--></g></svg></p></div>
</div>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword keyword-fun">fun</span> <span class="token function">blobToBase64</span><span class="token punctuation">(</span>byteArray<span class="token operator">:</span> ByteArray<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span>
    byteArray<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> Base64<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> Base64<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">base64ToBlob</span><span class="token punctuation">(</span>base64ImageString<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> ByteArray<span class="token operator">?</span> <span class="token operator">=</span>
    base64ImageString<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> Base64<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> Base64<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">base64ToBitmap</span><span class="token punctuation">(</span>base64ImageString<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Bitmap <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> decodedString <span class="token operator">=</span> base64ImageString<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> Base64<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span> Base64<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword keyword-return">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeByteArray</span><span class="token punctuation">(</span>decodedString<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> decodedString<span class="token operator">!!</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-fun">fun</span> <span class="token function">bitmapToBase64</span><span class="token punctuation">(</span>bitmap<span class="token operator">:</span> Bitmap<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>
    <span class="token keyword keyword-val">val</span> stream <span class="token operator">=</span> <span class="token function">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    bitmap<span class="token punctuation">.</span><span class="token function">compress</span><span class="token punctuation">(</span>Bitmap<span class="token punctuation">.</span>CompressFormat<span class="token punctuation">.</span>PNG<span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> stream<span class="token punctuation">)</span>
    <span class="token keyword keyword-val">val</span> byteArray<span class="token operator">:</span> ByteArray <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-return">return</span> Base64<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>byteArray<span class="token punctuation">,</span> Base64<span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre>
      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>