<!DOCTYPE html><html><head>
      <title>PMDM 2&#xBA; DAM  Tema 7. Fragments</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
.markdown-preview.markdown-preview {
  background-color: #FFFF;
}

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <style>/* 
Añade 

@import "../EstilosPersonalizadosMarkdownEnhanced.less"

justo después del front matter 
*/
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v8/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.fondo {
  background: url(https://programacioniesbalmis.github.io/Imagenes/BannersMoodle/banner.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
</style>
<h1 class="mume-header undefined" id="apuntes">Apuntes</h1>

<p><a href="./tema7_Fragments.pdf">Descargar estos apuntes</a></p>
<h1 class="mume-header undefined" id="tema-7-fragments">Tema 7. Fragments</h1>

<h2 class="mume-header undefined" id="%C3%ADndice">&#xCD;ndice</h2>

<ol>
<li><a href="#introducci%C3%B3n">Introducci&#xF3;n</a></li>
<li><a href="#ciclo-de-vida-de-un-fragment">Ciclo de vida de un Fragment</a></li>
<li><a href="#subclases-de-fragment">Subclases de Fragment</a></li>
<li><a href="#crear-un-fragment">Crear un Fragment</a></li>
<li><a href="#agregar-un-fragment-a-una-activity">Agregar un Fragment a una Activity</a>
<ol>
<li><a href="#agregar-fragments-est%C3%A1ticos">Agregar Fragments Est&#xE1;ticos</a></li>
<li><a href="#agregar-fragment-din%C3%A1mico">Agregar Fragment Din&#xE1;mico</a></li>
<li><a href="#gestionar-fragments">Gestionar Fragments.</a></li>
</ol>
</li>
<li><a href="#comunicar-fragments-y-activitys">Comunicar Fragments y Activitys</a>
<ol>
<li><a href="#comunicaci%C3%B3n-mediante-viewmodel">Comunicaci&#xF3;n mediante ViewModel</a></li>
<li><a href="#comunicaci%C3%B3n-mediante-interfaces">Comunicaci&#xF3;n mediante Interfaces</a></li>
</ol>
</li>
<li><a href="#pila-de-actividades">Pila de actividades</a>
<ol>
<li><a href="#tasks-y-backstacks">Tasks y BackStacks</a></li>
<li><a href="#fragmentmanager">FragmentManager</a></li>
<li><a href="#jetpack-navigation">Jetpack Navigation</a></li>
</ol>
</li>
<li><a href="#dialogfragment">DialogFragment</a></li>
<li><a href="#dialogfragment-1">DialogFragment</a></li>
</ol>
<div style="page-break-after:always;"></div>
<h3 class="mume-header" id="introducci%C3%B3n">Introducci&#xF3;n</h3>

<p>La necesidad de usar fragmentos nace con la versi&#xF3;n 3.0 (API 11) de Android, debido a los m&#xFA;ltiples tama&#xF1;os de pantalla que estaban apareciendo en el mercado y a la capacidad de orientaci&#xF3;n de la interfaz (Landscape y Portrait). Estas caracter&#xED;sticas necesitaban dotar a las aplicaciones Android de la capacidad para adaptarse y responder a la interfaz de usuario sin importar el dispositivo.<br>
Un <a href="https://developer.android.com/guide/components/fragments?hl=es-419">fragment</a> es una secci&#xF3;n <em>modular</em> de interfaz de usuario embebida dentro de una actividad anfitriona, el cual permite versatilidad y optimizaci&#xF3;n de dise&#xF1;o. Se trata de miniactividades contenidas dentro de una actividad anfitriona, manejando su propio dise&#xF1;o (un recurso layout propio) y ciclo de vida.</p>
<div align="center">
    <img height="200" src="./imagenes/fragments1.png">
</div>
<p>Estas nuevas entidades permiten reusar c&#xF3;digo y ahorrar tiempo de dise&#xF1;o a la hora de desarrollar una aplicaci&#xF3;n. Los fragmentos facilitan el despliegue de tus aplicaciones en cualquier tipo de tama&#xF1;o de pantalla y orientaci&#xF3;n.<br>
Otra ventaja de usarlos es que permiten crear dise&#xF1;os de interfaces de usuario de m&#xFA;ltiples vistas. &#xBF;Qu&#xE9; quiere decir eso?, que <em><strong>los fragmentos son imprescindibles para generar actividades con dise&#xF1;os din&#xE1;micos</strong></em>, como por ejemplo el uso de pesta&#xF1;as de navegaci&#xF3;n, expand and collapse, stacking, etc.</p>
<div align="center">
    <img height="200" src="./imagenes/fragments2.png">
</div>
<p>Un fragmento se ejecuta en el contexto de una actividad, pero tiene su propio ciclo de vida y por lo general su propia interfaz de usuario, recibe sus propios eventos de entrada, y se pueden agregar o quitar mientras que la actividad exista.<br>
<strong>Un fragmento tiene que estar siempre integrado en una activity</strong>, de forma que se ver&#xE1; afectado por el propio ciclo de vida de la activity. Por ejemplo: <em>cuando una activity se detiene, lo hacen todos los fragmentos de la misma; cuando &#xE9;sta se destruye, lo hacen tambi&#xE9;n todos sus fragmentos. Sin embargo, mientras una activity est&#xE1; en ejecuci&#xF3;n, se puede manipular cada uno de los fragmentos incluidos en ella de forma independiente, tanto a&#xF1;adi&#xE9;ndolos como elimin&#xE1;ndolos</em>.</p>
<h3 class="mume-header" id="ciclo-de-vida-de-un-fragment">Ciclo de vida de un Fragment</h3>

<p>La imagen de la izquierda representa el ciclo de vida de un fragmento. Y la imagen de la derecha los estados de sus m&#xE9;todos.</p>
<div align="center">
    <img height="500" src="./imagenes/fragments3.png">
</div>
<p>Generalmente los m&#xE9;todos m&#xE1;s usados a la hora de implementar un fragmento son los siguientes:</p>
<ul>
<li><strong><code>onCreate()</code></strong>. El sistema llama a este m&#xE9;todo a la hora de crear el fragmento. Normalmente en &#xE9;l, iniciaremos los componentes esenciales del fragmento.</li>
<li><strong><code>onCreateView()</code></strong>. El sistema llama al m&#xE9;todo cuando es la hora de crear la interface de usuario o vista, es decir, asociar el layout al fragment, normalmente se devuelve la view del fragmento.</li>
<li><strong><code>onPause()</code></strong>. El sistema llamara a este m&#xE9;todo en el momento que el usuario abandone el fragmento, por lo tanto es un buen momento para guardar informaci&#xF3;n.</li>
</ul>
<p>Aunque en el ciclo de vida nos encontramos con los siguientes m&#xE9;todos callback, relacionados con el ciclo de vida de una actividad. Averig&#xFC;emos un poco sobre ellos:</p>
<ul>
<li><strong><code>onAttach():</code></strong>. Es invocado cuando el fragmento ha sido asociado a la actividad anfitriona.</li>
<li><strong><code>onActiviyCreated()</code></strong>. Se ejecuta cuando la actividad anfitriona ya ha terminado la ejecuci&#xF3;n de su m&#xE9;todo <em>onCreate()</em>.</li>
<li><strong><code>onCreate()</code></strong>. Este m&#xE9;todo es llamado cuando el fragmento se est&#xE1; creando. En el puedes inicializar todos los componentes.</li>
<li><strong><code>onCreateView()</code></strong>. Se llama cuando el fragmento ser&#xE1; dibujado por primera vez en la interfaz de usuario. En este m&#xE9;todo crearemos el view que representa al fragmento para retornarlo hacia la actividad.</li>
<li><strong><code>onStart()</code></strong>. Se llama cuando el fragmento esta visible ante el usuario. Obviamente depende del m&#xE9;todo <em>onStart()</em> de la actividad.</li>
<li><strong><code>onResume()</code></strong>. Es ejecutado cuando el fragmento est&#xE1; activo e interactuando con el usuario. Esta situaci&#xF3;n depende de que la actividad anfitriona este primero en su estado Resume.</li>
<li><strong><code>onStop()</code></strong>. Se llama cuando un fragmento ya no es visible para el usuario debido a que la actividad anfitriona est&#xE1; detenida o porque dentro de la actividad se est&#xE1; gestionando una operaci&#xF3;n de fragmentos.</li>
<li><strong><code>onPause()</code></strong>. Al igual que las actividades, onPause se ejecuta cuando se detecta que el usuario dirigi&#xF3; el foco por fuera del fragmento.</li>
<li><strong><code>onDestroyView()</code></strong>. Este m&#xE9;todo es llamado cuando la jerarqu&#xED;a de views a la cual ha sido asociado el fragmento ha sido destruida.</li>
<li><strong><code>onDetach()</code></strong>. Se llama cuando el fragmento ya no est&#xE1; asociado a la actividad anfitriona.</li>
</ul>
<h3 class="mume-header" id="subclases-de-fragment">Subclases de Fragment</h3>

<p>A parte de crear un Fragment directamente, Android nos ofrece la posibilidad de utilizar las siguientes subclases de Fragment, de estas subclases hablaremos posteriormente</p>
<ul>
<li>DialogFragment - Muestra un cuadro de dialogo flotante.</li>
<li>ListFragment - Muestra una lista de elementos.</li>
<li>PreferenceFragment - Muestra una lista de preferencias.</li>
</ul>
<h3 class="mume-header" id="crear-un-fragment">Crear un Fragment</h3>

<p>Para crear un fragment primero deberemos extender la clase <strong><code>Fragment</code></strong> y sobrescribir el m&#xE9;todo <strong><code>onCreateView()</code></strong> en el que devolveremos la vista de dicho fragmento. Vamos a ver el ejemplo y lo explicamos a continuaci&#xF3;n.</p>
<h5 class="mume-header" id="fragmentunokt">FragmentUNO.kt</h5>

<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> FragmentUno<span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
        inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
        container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
        savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_uno<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x270B; Comentar que previamente se ha creado el layout para este fragmento y se corresponde con <strong><code>fragment_uno.xml</code></strong>.</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.&gt;android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#CC00CC00<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
      <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Informaci&#xF3;n fragment1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</pre></blockquote>
<blockquote>
<p>&#x1F4CC; Al sobrescribir el m&#xE9;todo <strong><code>onCreateView()</code></strong> podemos observar que de serie nos da la posibilidad de utilizar un LayoutInflater, un ViewGroup y un Bundle. El LayoutInflater normalmente lo utilizaremos para inflar el layout de nuestro fragment. El ViewGroup ser&#xE1; la vista padre donde se insertara el layout de nuestro fragment. Y por &#xFA;ltimo el Bundle podremos utilizarlo para recuperar datos de una instancia anterior de nuestro fragment.<br>
De esta manera ya tendremos creado un fragment que nos devolver&#xE1; una vista y que podremos insertar en cualquier activity de nuestro proyecto.</p>
</blockquote>
<h3 class="mume-header" id="agregar-un-fragment-a-una-activity">Agregar un Fragment a una Activity</h3>

<p>A la hora de agregar un fragmento a una actividad lo podremos realizar de dos maneras:</p>
<ol>
<li>Declarar el fragmento en el layout de la activity. Este fragment tendr&#xE1; la cualidad de no ser eliminado o sustituido por nada, de lo contrario tendremos errores. Se le da el nombre de <strong>fragment est&#xE1;tico o final</strong>.</li>
<li>Agregar directamente el Fragment mediante programaci&#xF3;n Android.  &#xC9;ste s&#xED; que se podr&#xE1; eliminar o sustituir por otro fragment u otro contenido. <strong>Se les da el nombre de fragment din&#xE1;mico</strong>.</li>
</ol>
<h4 class="mume-header" id="agregar-fragments-est%C3%A1ticos">Agregar Fragments Est&#xE1;ticos</h4>

<p>Lo primero que tenemos que hacer es crear el layout de nuestra activity especificando un elemento fragment.</p>
<h5 class="mume-header" id="activity_mainxml">activity_main.xml</h5>

<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_uno<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ejemplos.b3.ejemplofragmentv1.FragmentUno<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_dos<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ejemplos.b3.ejemplofragmentv1.FragmentDos<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</pre><blockquote>
<p>&#x1F4CC; Simplemente creamos el elemento <a href="https://developer.android.com/reference/androidx/fragment/app/FragmentContainerView">FragmentContainerView</a> y especificamos a trav&#xE9;s del atributo <strong><code>android:name</code></strong> la ubicaci&#xF3;n de nuestro fragmento (nombre de paquete donde est&#xE1; ubicado el fragmento). FragmentContainerView es un contenedor personalizado para Fragmentos que extiende de FrameLayout, por lo que maneja las transacciones de manera m&#xE1;s fiable.<br>
Es recomendable crear un identificador &#xFA;nico para cada fragmento, que nos puede servir para restaurar fragmentos o incluso para realizar transacciones o eliminaci&#xF3;n de estos.<br>
Una vez creado el layout de la activity simplemente creamos una actividad y le aplicamos el m&#xE9;todo <strong><code>setContentView()</code></strong> indicando la id del layout que acabamos de crear. El resultado puede ser el siguiente, teniendo en cuenta que se debe a&#xF1;adir la clase FragmentDos similar a la FragmentUno:</p>
</blockquote>
<div align="center">
    <img height="200" src="./imagenes/fragments4.png">
</div>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Crea una App FragmentEstatico, para probar los fragments est&#xE1;ticos del ejemplo anterior</span></p>
<h4 class="mume-header" id="agregar-fragment-din%C3%A1mico">Agregar Fragment Din&#xE1;mico</h4>

<p>De esta manera podemos agregar un fragment a una activity en cualquier momento. Simplemente indicaremos la id de una vista padre (ViewGroup, recomendado usar <strong><code>FragmentContainerView</code></strong>) donde deber&#xE1; colocarse el fragment.<br>
En el ejemplo vamos a  agregar un fragment din&#xE1;mico junto a uno est&#xE1;tico. Lo primero es definir en el layout de la activity un espacio donde poder a&#xF1;adir el fragment, para ello usaremos el segundo FragmentContainerView con id <em>fragment_container</em>.</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainActivity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.ejemplos.b3.ejemplofragmentv1.FragmentUno<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_uno<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_container<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3355CC00<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.fragment.app.FragmentContainerView</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</pre><p>Nos creamos una clase para el fragment2, similar a la anterior y un layout para gestionar el aspecto. Pasemos a a&#xF1;adir el fragment por c&#xF3;digo. Para ello tenemos que utilizar la API <strong><code>FragmentTransaction</code></strong> y a trav&#xE9;s de su m&#xE9;todo <strong><code>add()</code></strong> Q, a&#xF1;adiremos el fragmento a la vista padre. Despu&#xE9;s de a&#xF1;adir el fragment tendremos que terminar la transacci&#xF3;n a trav&#xE9;s del m&#xE9;todo <strong><code>commit()</code></strong>.<br>
Vamos a ver el ejemplo de la clase <strong>MainActivity</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[7, 8,10,11]}" class="language-kotlin" data-line="7,8,10,11"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
        <span class="token keyword">val</span> framentManager<span class="token operator">=</span>supportFragmentManager
        <span class="token keyword">val</span> fragmentTransaction<span class="token operator">=</span>framentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> fragmentDos<span class="token operator">=</span><span class="token function">FragmentDos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fragmentTransaction<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment_container<span class="token punctuation">,</span>fragmentDos<span class="token punctuation">)</span>
        fragmentTransaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>              
<div class="line-highlight-wrapper">





<div aria-hidden="true" class="line-highlight" data-range="7" data-start="7">
</div></div><div class="line-highlight-wrapper">






<div aria-hidden="true" class="line-highlight" data-range="8" data-start="8">
</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10" data-start="10">
</div></div><div class="line-highlight-wrapper">









<div aria-hidden="true" class="line-highlight" data-range="11" data-start="11">
</div></div></pre><blockquote>
<p>&#x1F4CC;En este caso nuestra activity carga un layout con un View <strong><code>fragment</code></strong> para el  fragmento est&#xE1;tico  y un <strong><code>FragmeLayout</code></strong> que no muestra nada pero nos va a servir como contenedor para agregar el fragment din&#xE1;mico program&#xE1;ticamente.<br>
Lo primero que hacemos es crear una instancia de <strong><code>FragmentManager</code></strong> a trav&#xE9;s de su m&#xE9;todo <strong><code>getSupportFragmentManaget()</code></strong>, <strong>L&#xED;nea 7</strong>. De esta manera estamos creando un objeto que nos servir&#xE1; para manejar los fragmentos.<br>
A continuaci&#xF3;n creamos una instancia de <strong><code>FragmentTransaction</code></strong> para realizar la transacci&#xF3;n de fragmentos. A trav&#xE9;s del m&#xE9;todo <strong><code>beginTransaction()</code></strong> <strong>L&#xED;nea 8</strong>, indicamos que vamos a realizar una transacci&#xF3;n de fragmentos.<br>
Lo siguiente es crear una instancia de nuestro <strong><code>FragmentDos</code></strong> y a&#xF1;adirla a la transacci&#xF3;n a trav&#xE9;s del m&#xE9;todo <strong><code>add()</code></strong>, que nos pide como par&#xE1;metros la id del ViewGroup o vista padre donde se colocara dicho fragmento (en este caso es la id del FrameLayout que coment&#xE1;bamos antes) y como segundo par&#xE1;metro nos pide la instancia del fragmento que se mostrara dicha vista <strong>L&#xED;nea 10</strong>.<br>
Para terminar la transacci&#xF3;n siempre deberemos declarar el m&#xE9;todo <strong><code>commit()</code></strong> <strong>L&#xED;nea 11</strong>.</p>
</blockquote>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Crea una App fragmentV1, para probar el ejemplo anterior, el fragment1 ser&#xE1; est&#xE1;tico mientras que el fragment2 ser&#xE1; a&#xF1;adido de forma din&#xE1;mica desde el c&#xF3;digo</span></p>
<h4 class="mume-header" id="gestionar-fragments">Gestionar Fragments.</h4>

<p>En el punto anterior hemos hablado de transacciones, una transacci&#xF3;n simplemente es una acci&#xF3;n que nos permite agregar, reemplazar, eliminar o incluso realizar otras acciones cuando trabajamos con fragmentos. Estas transacciones pueden ser apiladas por la activity de acogida, permitiendo as&#xED; al usuario navegar entre fragmentos mientras la activity siga en ejecuci&#xF3;n.<br>
Cada transacci&#xF3;n es un conjunto de cambios que se realizan al mismo tiempo. Podremos realizar dichos cambios a trav&#xE9;s de los m&#xE9;todos <strong><code>add()</code></strong>, <strong><code>replace()</code></strong>, <strong><code>remove()</code></strong> terminando la transacci&#xF3;n con el m&#xE9;todo <strong><code>commit()</code></strong>.<br>
Para a&#xF1;adir la transacci&#xF3;n a la pila de retroceso de la activity utilizaremos el m&#xE9;todo <strong><code>addToBackStack()</code></strong> para cada transacci&#xF3;n que realicemos. Esta pila ser&#xE1; administrada por la activity y permitir&#xE1; al usuario volver a un fragmento anterior pulsando la tecla volver del smartphone o tablet.<br>
Por otra parte a trav&#xE9;s del m&#xE9;todo <strong><code>setTransaction()</code></strong> podemos establecer el tipo de animaci&#xF3;n para cada transacci&#xF3;n.<br>
Para este caso se ha creado un ejemplo que muestra un layout con un ViewGroup para mostrar los fragmentos y un bot&#xF3;n que servir&#xE1; para a&#xF1;adir fragmentos a la pila de retroceso. Empezaremos creando el layout que mostrar&#xE1; la activity:</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_container<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_above</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/boton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.fragment.app.FragmentContainerView</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/boton<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CAMBIAR<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fill_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_alignParentBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">&gt;</span></span>
</pre><p>Una vez creado el layout deberemos crear la siguiente activity:</p>
<h5 class="mume-header" id="mainactivitykt">Mainactivity.kt</h5>

<pre data-role="codeBlock" data-info="kotlin {highlight=[7, 8,10,16,18]}" class="language-kotlin" data-line="7,8,10,16,18"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
        <span class="token keyword">val</span> f1 <span class="token operator">=</span> <span class="token function">FragmentUno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> f2 <span class="token operator">=</span> <span class="token function">FragmentDos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> bol<span class="token operator">=</span><span class="token boolean">true</span>
        <span class="token keyword">val</span> boton <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>boton<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        boton<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">{</span>
                <span class="token keyword">val</span> FT <span class="token operator">=</span> <span class="token function">getSupportFragmentManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>bol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    FT<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment_container<span class="token punctuation">,</span> f1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    FT<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment_container<span class="token punctuation">,</span> f2<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                FT<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                FT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                bol <span class="token operator">=</span> <span class="token keyword">if</span><span class="token punctuation">(</span>bol<span class="token punctuation">)</span><span class="token boolean">false</span> <span class="token keyword">else</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<div class="line-highlight-wrapper">





<div aria-hidden="true" class="line-highlight" data-range="7" data-start="7">
</div></div><div class="line-highlight-wrapper">






<div aria-hidden="true" class="line-highlight" data-range="8" data-start="8">
</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10" data-start="10">
</div></div><div class="line-highlight-wrapper">














<div aria-hidden="true" class="line-highlight" data-range="16" data-start="16">
</div></div><div class="line-highlight-wrapper">
















<div aria-hidden="true" class="line-highlight" data-range="18" data-start="18">
</div></div></pre><blockquote>
<p>&#x1F4CC;Comentar que previamente se han creado dos fragmentos &quot;FragmentUNO&quot; y &quot;FragmentDOS&quot;, cada uno con su layout.<br>
En la activity primero creamos un valor booleano que nos servir&#xE1; para cambiar entre un fragmento u otro cada vez que el usuario pulse el bot&#xF3;n <strong>L&#xED;nea 18</strong>.<br>
Establecemos el layout de la activity y creamos dos instancias de nuestros fragmentos. A continuaci&#xF3;n declaramos nuestro bot&#xF3;n y le aplicamos un listener.<br>
Cada vez que el usuario pulse el bot&#xF3;n se creara una transacci&#xF3;n a&#xF1;adiendo a la pila un fragmento u otro a trav&#xE9;s del m&#xE9;todo <strong><code>addToBackStack()</code></strong> que pide como par&#xE1;metro un tag o identificador para la transacci&#xF3;n que se va a realizar <strong>L&#xED;nea 16</strong>.<br>
Se finaliza la transacci&#xF3;n con el m&#xE9;todo <strong><code>commit()</code></strong> y cambiamos el valor booleano.</p>
</blockquote>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Prueba el anterior ejemplo FragmentV2: bot&#xF3;n que te vaya cargando uno u otro fagment y al mismo tiempo que se acumulen en la pila. Probar que al pulsar el bot&#xF3;n de retroceso, se pasa por cada uno de los fragments que se han cargado anteriormente.</span></p>
<h3 class="mume-header" id="comunicar-fragments-y-activitys">Comunicar Fragments y Activitys</h3>

<p>Cuando hablamos sobre <a href="https://developer.android.com/training/basics/fragments/communicating?hl=es">la comunicaci&#xF3;n de fragmentos</a>, debemos tener en cuenta las siguientes premisas:</p>
<ul>
<li>Los fragmentos no pueden ni deben comunicarse directamente.</li>
<li>La comunicaci&#xF3;n entre fragmentos debe hacerse a trav&#xE9;s de los asociados activity.</li>
<li>Los fragmentos no necesitan conocer qui&#xE9;n es su actividad principal.</li>
</ul>
<p>A partir de lo anterior, podemos deducir que dos objetos Fragment nunca deben comunicarse directamente. Hay varias maneras de realizar la comunicaci&#xF3;n entre estos, pero vamos a estudiar las dos m&#xE1;s recomendadas. Estas dos formas son: mediante la <strong>implementaci&#xF3;n de una interface</strong> o mediante un elemento <strong>ViewModel</strong>.</p>
<span style="align: center; font-size: 7pt">
<table align="center">
<tbody><tr>
<td>
<div align="center">
    <img height="220" src="./imagenes/fragments5.png">
  </div>
   <div align="center"> Comunicaci&#xF3;n mediante Interface</div>
</td>
<td>
<div align="center">
    <img height="220" src="./imagenes/fragments6.png">
</div>
   <div align="center">Comunicaci&#xF3;n mediante ViewModel</div>
</td>
</tr>
</tbody></table>
</span>
<h4 class="mume-header" id="comunicaci%C3%B3n-mediante-viewmodel">Comunicaci&#xF3;n mediante ViewModel</h4>

<p><a href="https://developer.android.com/guide/fragments/communicate?hl=es-419#viewmodel">ViewModel</a>. es una de las nuevas incorporaciones a la implementaci&#xF3;n de Android y la que google recomienda para la comunicaci&#xF3;n entre fragments.<br>
Un ViewModel siempre se crea en asociaci&#xF3;n con un &#xE1;mbito (un fragmento o una actividad) y se conservar&#xE1; mientras el &#xE1;mbito est&#xE9; activo. Por ejemplo, si es una Actividad, hasta que se termine. En otras palabras, esto significa que un ViewModel no se destruir&#xE1; si su propietario se destruye por un cambio de configuraci&#xF3;n (por ejemplo, rotaci&#xF3;n). La nueva instancia del propietario se volver&#xE1; a conectar al ViewModel existente.</p>
<p>El siguiente paso ser&#xE1; crear una clase que derive de ViewModel parecida a la siguiente, y teniendo en cuenta que tipo de datos queremos pasar entre los fragments, en este caso un String aunque podr&#xED;a ser un objeto o incluso colecciones de estos:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> ItemViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">val</span> liveData <span class="token operator">=</span> MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> selectedItem<span class="token operator">:</span> LiveData<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> liveData
        <span class="token keyword">fun</span> <span class="token function">selectItem</span><span class="token punctuation">(</span>item<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           liveData<span class="token punctuation">.</span>value <span class="token operator">=</span> item
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x1F4CC;Como podemos ver en el c&#xF3;digo anterior, aparece un elemento nuevo para exponer los datos que lo hemos llamado liveData de tipo <strong><code>MutableLiveData</code></strong> que a su vez extiende de <strong><code>LiveData</code></strong>, este elemento es un titular de datos que es capaz de ser observado para enviar solo actualizaciones de datos cuando su observador est&#xE1; activo, puede contener cualquier tipo de datos, y adem&#xE1;s de eso, es consciente del ciclo de vida para mandar las actualizaciones de datos solamente si el observador est&#xE1; activo.<br>
Para observar un elemento <a href="https://developer.android.com/topic/libraries/architecture/livedata?hl=es-419">LiveData</a>, tenemos la clase <strong><code>Observer</code></strong>, que a trav&#xE9;s de su objeto podremos saber si est&#xE1; en estado activo (su ciclo de vida est&#xE1; en el estado STARTED o RESUMED) o inactivo (en cualquier otro caso). LiveData solo notifica a los observadores activos sobre las actualizaciones.</p>
</blockquote>
<blockquote>
<p>&#x1F393; Vamos a suponer un ejemplo en el que, usando el ViewModel del ejemplo anterior, en una activity se cargan dos fragments a la vez y se realiza <strong>la comunicaci&#xF3;n entre los dos fragments</strong>. Uno tendr&#xE1; una lista y en el otro se mostrar&#xE1; el elemento pulsado de la lista. Para ello deberemos crear dos clase Fragments, una que ser&#xE1; el detalle y que solo tendr&#xE1; un texto y una clase <strong>ListaFragment</strong> que heredar&#xE1; de <a href="https://developer.android.com/reference/kotlin/androidx/fragment/app/ListFragment">ListFragment</a> y que debido a esto no necesita tener asociado un xml. El resultado ser&#xE1; parecido al siguiente:</p>
<div align="center">
   <img height="200" src="./imagenes/fragments7.png">
</div>
<p>El layout del fragment detalle podr&#xED;a ser, <strong>fragment_secundario.xml</strong>:</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#247f9e<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TEXTO<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/texto<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>

</pre><p>El layout de la actividad principal, <strong>activity_main.xml:</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainActivity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_uno<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fragment_dos<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.fragment.app.FragmentContainerView</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</pre><p>La actividad principal con la carga de los dos fragments podr&#xED;a quedar as&#xED;, <strong>MainActivity.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> <span class="token operator">&gt;</span>Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
       <span class="token keyword">val</span> fM<span class="token operator">:</span> FragmentManager <span class="token operator">=</span> supportFragmentManager
       <span class="token keyword">val</span> fT<span class="token operator">:</span> FragmentTransaction <span class="token operator">=</span> fM<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment_uno<span class="token punctuation">,</span> <span class="token function">MyListFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment_dos<span class="token punctuation">,</span>FragmentSecundario<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>El Fragment con la lista podr&#xED;a ser como el que sigue, <strong>MyListFragment.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[1,2,8,[11-15],14]}" class="language-kotlin" data-line="1,2,8,11-15,14"><span class="token keyword">class</span> MyListFragment<span class="token operator">:</span> <span class="token function">ListFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span>ItemViewModel <span class="token keyword">by</span> <span class="token function">activityViewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">private</span> <span class="token keyword">val</span> valores <span class="token operator">=</span>
             arrayOf<span class="token operator">&lt;</span>String<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item4&quot;</span><span class="token punctuation">,</span>
                               <span class="token string">&quot;item5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item8&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       listAdapter <span class="token operator">=</span> ArrayAdapter<span class="token operator">&lt;</span>Any<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                     android<span class="token punctuation">.</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>simple_list_item_1<span class="token punctuation">,</span> valores<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onListItemClick</span><span class="token punctuation">(</span>l<span class="token operator">:</span> ListView<span class="token punctuation">,</span> v<span class="token operator">:</span> View<span class="token punctuation">,</span>
                                   position<span class="token operator">:</span> Int<span class="token punctuation">,</span> id<span class="token operator">:</span> Long<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onListItemClick</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> v<span class="token punctuation">,</span> position<span class="token punctuation">,</span> id<span class="token punctuation">)</span>
       valores<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> model<span class="token punctuation">.</span><span class="token function">selectItem</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper"><div aria-hidden="true" class="line-highlight" data-range="1" data-start="1">
</div></div><div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">






<div aria-hidden="true" class="line-highlight" data-range="8" data-start="8">
</div></div><div class="line-highlight-wrapper">









<div aria-hidden="true" class="line-highlight" data-range="11-15" data-start="11" data-end="15">




</div></div><div class="line-highlight-wrapper">












<div aria-hidden="true" class="line-highlight" data-range="14" data-start="14">
</div></div></pre><p>&#x1F4CC;<strong>L&#xED;nea 1</strong> en este caso vemos que el fragment hereda de <strong><code>ListFragment</code></strong> en vez de <strong><code>Fragment</code></strong>, esto permite que el fragment est&#xE9; formado por una lista de elementos y que no se tenga que crear ninguna vista espec&#xED;fica para el. Para asociar los elementos a la lista, deberemos crear un <strong><code>ArrayAdapter</code></strong> indicando los valores y el layout de salida (predefinido en los recursos de Android) <strong>L&#xED;nea 8</strong> (Este elemento se ver&#xE1; m&#xE1;s extensamente en temas posteriores). <strong>L&#xED;nea de 11 a 15</strong>, esta sobrecarga del m&#xE9;todo <strong><code>onListItemClick</code></strong> est&#xE1; asociada a la pulsaci&#xF3;n de cualquier elemento de la lista, entrando como par&#xE1;metros la vista y la posici&#xF3;n del elemento pulsado.  <strong>L&#xED;nea 2</strong> se crea una propiedad del <strong><code>ViewModel</code></strong> creado con anterioridad, utilizando el delegado <strong><code>activityViewModels</code></strong> para obtener una referencia al ViewModel en el &#xE1;mbito de su actividad y que se pueda compartir entre las distintas vistas o fragments, mientras el ciclo de vida lo permita. Para poder incluir este delegado, se tiene que a&#xF1;adir la siguiente dependencia (a d&#xED;a de hoy):</p>
<pre data-role="codeBlock" data-info="groovy" class="language-groovy">implementation <span class="token string">&apos;androidx.fragment:fragment-ktx:1.3.2&apos;</span>
</pre><p><strong>L&#xED;nea 14</strong>, cuando se pulse un elemento de la lista se modificar&#xE1; el valor del LiveData con la informaci&#xF3;n de esa posici&#xF3;n del array (siempre que no sea nula <em>let{}</em>)</p>
<p>El Fragment con el detalle, <strong>FragmentSecundario.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[2,9,11]}" class="language-kotlin" data-line="2,9,11"><span class="token keyword">class</span> FragmentSecundario<span class="token operator">:</span><span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span>ItemViewModel <span class="token keyword">by</span> <span class="token function">activityViewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
       inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
       container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
       saveInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{</span>
       <span class="token keyword">val</span> view<span class="token operator">:</span> View <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span>
                <span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_secundario<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
       <span class="token keyword">val</span> nameObserver <span class="token operator">=</span> Observer<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">{</span>cadena <span class="token operator">-&gt;</span>
               view<span class="token punctuation">.</span>findViewById<span class="token operator">&lt;</span>TextView<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>texto<span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token operator">=</span>cadena<span class="token punctuation">}</span>
       model<span class="token punctuation">.</span>selectedItem<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nameObserver<span class="token punctuation">)</span>
       <span class="token keyword">return</span> view
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">







<div aria-hidden="true" class="line-highlight" data-range="9" data-start="9">
</div></div><div class="line-highlight-wrapper">









<div aria-hidden="true" class="line-highlight" data-range="11" data-start="11">
</div></div></pre><p>&#x1F4CC; Instanciamos el ViewModel <strong>L&#xED;nea 2</strong>, Creamos el manejador con la funcionalidad de asignar al TextView el texto que est&#xE1; siendo observado <strong>L&#xED;nea 9</strong>. <strong>L&#xED;nea 11</strong> se asigna al delegado observe el manejador creado con anterioridad.</p>
</blockquote>
<blockquote>
<p>&#x1F393; Otro caso distinto, podemos tenerlo cuando <strong>el fragment se comunica a trav&#xE9;s de la activity</strong>, mediante el ViewModel. Vamos a suponer, el caso m&#xE1;s com&#xFA;n en el que una activity cargar&#xE1; una lista y al pulsar un elemento de esta se carga el otro fragmento. El layout del <strong>fragment_secundario.xml</strong> y <strong>MyListFragment.kt</strong> tendr&#xE1;n el mismo c&#xF3;digo que para el anterior ejemplo.</p>
<p>El layout de la actividad principal ahora solo tendr&#xE1; un contenedor, <strong>activity_main.xml:</strong></p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/contenedor_fragment<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainActivity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.fragment.app.FragmentContainerView</span><span class="token punctuation">&gt;</span></span>
</pre><p>La actividad principal con la carga del fragment con la lista y con el observador sobre el ViewModel, quedar&#xE1; as&#xED; <strong>MainActivity.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[2,[10-19],20]}" class="language-kotlin" data-line="2,10-19,20"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span> ItemViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
       <span class="token keyword">val</span> fM<span class="token operator">:</span> FragmentManager <span class="token operator">=</span> supportFragmentManager
       <span class="token keyword">var</span> fT<span class="token operator">:</span> FragmentTransaction <span class="token operator">=</span> fM<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor_fragment<span class="token punctuation">,</span> <span class="token function">MyListFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token keyword">val</span> nameObserver <span class="token operator">=</span> Observer<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">{</span>cadena <span class="token operator">-&gt;</span>
           <span class="token keyword">val</span> bundle<span class="token operator">=</span><span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;DATO&quot;</span><span class="token punctuation">,</span>cadena<span class="token punctuation">)</span>
           <span class="token keyword">var</span> fragmentSecundario<span class="token operator">=</span><span class="token function">FragmentSecundario</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           fragmentSecundario<span class="token punctuation">.</span>arguments<span class="token operator">=</span>bundle
           fT<span class="token operator">=</span>fM<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor_fragment<span class="token punctuation">,</span>fragmentSecundario <span class="token punctuation">)</span>
           fT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
           fT<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
       model<span class="token punctuation">.</span>selectedItem<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> nameObserver<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10-19" data-start="10" data-end="19">









</div></div><div class="line-highlight-wrapper">


















<div aria-hidden="true" class="line-highlight" data-range="20" data-start="20">
</div></div></pre><p>&#x1F4CC;<strong>L&#xED;nea 2</strong>, instanciamos el ViewModel teniendo en cuenta que para la actividad se asocia el delegado <strong><code>viewModels</code></strong>. En el bloque desde la <strong>L&#xED;nea 10 hasta la 19</strong>, construimos un delegado con el observador que se encargar&#xE1; de cargar el FragmentSecundario con la informaci&#xF3;n pasada en un Bundle. <strong>L&#xED;nea 20</strong>, se pone en observaci&#xF3;n el ViewModel con el delegado construido anteriormente.</p>
<p>En el <strong>FragmentSecundario.kt</strong> se deber&#xE1; recuperar el bundle para poder modificar el TextView con el dato del elemento pulsado.</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> FragmentSecundario<span class="token operator">:</span><span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
       inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
       container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
       saveInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
   <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{</span>
       <span class="token keyword">val</span> bundle<span class="token operator">=</span>arguments
       <span class="token keyword">val</span> view<span class="token operator">:</span> View <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment_secundario<span class="token punctuation">,</span>
                                         container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
       view<span class="token punctuation">.</span>findViewById<span class="token operator">&lt;</span>TextView<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>texto<span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token operator">=</span>
                                   bundle<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;DATO&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">return</span> view
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></blockquote>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Con la informaci&#xF3;n que se pasa en los dos ejemplos, reconstruye y prueba ambos casos a&#xF1;adiendo el c&#xF3;digo que falte. </span></p>
<h4 class="mume-header" id="comunicaci%C3%B3n-mediante-interfaces">Comunicaci&#xF3;n mediante Interfaces</h4>

<p>La <a href="https://developer.android.com/training/basics/fragments/communicating?hl=es#DefineInterface">implementaci&#xF3;n de una interface</a>, es la otra manera correcta para pasar informaci&#xF3;n y controlar alg&#xFA;n evento. Se trata de crear una interface en el fragmento y exigir a la activity que la implemente. De esta manera cuando el fragmento reciba un evento tambi&#xE9;n lo har&#xE1; la activity, que se encargara de recibir los datos de ese evento y compartirlos con otros fragmentos.</p>
<blockquote>
<p>&#x1F393; Para ello vamos a volver a implementar el &#xFA;ltimo ejemplo. Es decir la aplicaci&#xF3;n que comienza con el fragment de la lista, y que carga otro que muestra el texto del elemento pulsado. En este caso solamente tendremos que modificar el c&#xF3;digo de la clase principal y del fragmente de la lista, es resto quedar&#xE1; igual.<br>
Primero crearemos la interface con el m&#xE9;todo que necesitemos, <strong>PasoCadenaInterface.kt</strong></p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">interface</span> PasoCadenaInterface <span class="token punctuation">{</span>
   <span class="token keyword">fun</span> <span class="token function">informacionCadena</span><span class="token punctuation">(</span>dato<span class="token operator">:</span>String<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre><p>La actividad principal <strong>MainActivity.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[0,[10-19]]}" class="language-kotlin" data-line="0,10-19"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PasoCadenaInterface <span class="token punctuation">{</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
       <span class="token keyword">val</span> fM<span class="token operator">:</span> FragmentManager <span class="token operator">=</span> supportFragmentManager
       <span class="token keyword">var</span> fT<span class="token operator">:</span> FragmentTransaction <span class="token operator">=</span> fM<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor_fragment<span class="token punctuation">,</span> <span class="token function">MyListFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">informacionCadena</span><span class="token punctuation">(</span>dato<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">val</span> bundle<span class="token operator">=</span><span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;DATO&quot;</span><span class="token punctuation">,</span>dato<span class="token punctuation">)</span>
       <span class="token keyword">var</span> fragmentSecundario<span class="token operator">=</span><span class="token function">FragmentSecundario</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fragmentSecundario<span class="token punctuation">.</span>arguments<span class="token operator">=</span>bundle
       <span class="token keyword">val</span>  fT<span class="token operator">=</span>supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor_fragment<span class="token punctuation">,</span>fragmentSecundario <span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       fT<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper"><div aria-hidden="true" class="line-highlight" data-range="0" data-start="0">
</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10-19" data-start="10" data-end="19">









</div></div></pre><p>&#x1F4CC;<strong>L&#xED;nea 0</strong> obligamos a que la actividad implemente la interface. <strong>L&#xED;nea 10 a 19</strong>, m&#xE9;todo de la interface al que le llega el dato que mandaremos al fragment secundario.</p>
<p>Fragment con la lista, <strong>MyListFragment.kt</strong>:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[2,14, [17-20]]}" class="language-kotlin" data-line="2,14,17-20"><span class="token keyword">class</span> MyListFragment<span class="token operator">:</span> <span class="token function">ListFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">lateinit</span> <span class="token keyword">var</span> pasoCadenaInterface<span class="token operator">:</span>PasoCadenaInterface
   <span class="token keyword">private</span> <span class="token keyword">val</span> valores <span class="token operator">=</span>
             arrayOf<span class="token operator">&lt;</span>String<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item4&quot;</span><span class="token punctuation">,</span> 
                           <span class="token string">&quot;item5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;item8&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       listAdapter <span class="token operator">=</span> ArrayAdapter<span class="token operator">&lt;</span>Any<span class="token operator">?</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                       android<span class="token punctuation">.</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>simple_list_item_1<span class="token punctuation">,</span> valores<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onListItemClick</span><span class="token punctuation">(</span>l<span class="token operator">:</span> ListView<span class="token punctuation">,</span> v<span class="token operator">:</span> View<span class="token punctuation">,</span> 
                                position<span class="token operator">:</span> Int<span class="token punctuation">,</span> id<span class="token operator">:</span> Long<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onListItemClick</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> v<span class="token punctuation">,</span> position<span class="token punctuation">,</span> id<span class="token punctuation">)</span>
       valores<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token operator">?</span>
                 <span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> pasoCadenaInterface<span class="token punctuation">.</span><span class="token function">informacionCadena</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttach</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAttach</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
       pasoCadenaInterface<span class="token operator">=</span>context <span class="token keyword">as</span> PasoCadenaInterface
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">












<div aria-hidden="true" class="line-highlight" data-range="14" data-start="14">
</div></div><div class="line-highlight-wrapper">















<div aria-hidden="true" class="line-highlight" data-range="17-20" data-start="17" data-end="20">



</div></div></pre><p>&#x1F4CC; <strong>L&#xED;nea 2</strong> se crea una instancia de la interface. <strong>L&#xED;nea desde 17 a 20</strong> se anual el m&#xE9;todo <strong><code>onAttach</code></strong> que es invocado en el momento que el fragment se enlaza en la actividad, en este m&#xE9;todo asignamos el contexto de entrada a la instancia de la interface creada. <strong>L&#xED;nea 14</strong> con el objeto de la interface llamamos a su m&#xE9;todo pasando el valor del elemento pulsado.</p>
</blockquote>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Reconstruye el ejemplo anterior y prueba su funcionamiento</span></p>
<h3 class="mume-header" id="pila-de-actividades">Pila de actividades</h3>

<h4 class="mume-header" id="tasks-y-backstacks">Tasks y BackStacks</h4>

<p>Una <a href="https://developer.android.com/guide/components/activities/tasks-and-back-stack">tarea</a> es una colecci&#xF3;n de metadatos e informaci&#xF3;n entorno a un pila de actividades. Cuando iniciamos una app el sistema busca si esa tarea ya ha sido iniciada previamente y en ese caso la reanuda y regresar exactamente al punto donde estaba. Si no existe la tarea la inicia, lanzando la actividad principal como base en la <strong>pila de tareas</strong>.<br>
Cada vez que se inicia una actividad o se realiza una transacci&#xF3;n de fragmento a&#xF1;adiendo la transici&#xF3;n al la pila <strong><code>addToBackStack()</code></strong>, se a&#xF1;ade esa actividad/fragmento a la tarea lo que hace que la actividad que queda por debajo se pause o se detenga si la nueva actividad oculta por completo la anterior.</p>
<div align="center">
    <img height="200" src="./imagenes/tareas1.png">
</div>
<p>El bot&#xF3;n de retroceso est&#xE1; directamente asociado a la pila de actividades. Cuando se presiona este bot&#xF3;n, se elimina un fragmento o actividad de la pila se restaura el inmediatamente inferior en esta. La repetici&#xF3;n del <strong>BackPressed</strong> eliminar&#xE1; todas las actividades hasta que no quede ninguna y se destruya la aplicaci&#xF3;n (tarea).</p>
<div align="center">
    <img height="200" src="./imagenes/tareas1.png">
</div>
<h5 class="mume-header" id="gestionar-tareas-program%C3%A1ticamente">Gestionar Tareas Program&#xE1;ticamente</h5>

<p>Existen casos espec&#xED;ficos donde requeriremos manipular la forma en que una actividad es apilada o retirada en la back stack de una tarea. El framework nos provee atributos del Manifest para dicho fin, con <strong><code>launchMode</code></strong> podremos  especificar el modo de lanzamiento de una actividad, sus posibles valores son los siguientes: <strong><code>standard, singleTop, singleTask y singleInstance</code></strong>, para m&#xE1;s <a href="https://developer.android.com/guide/topics/manifest/activity-element">informaci&#xF3;n</a>.</p>
<h4 class="mume-header" id="fragmentmanager">FragmentManager</h4>

<p><a href="https://developer.android.com/guide/fragments/fragmentmanager?hl=es-419">FragmentManager</a> es la clase responsable de realizar acciones en los fragmentos de tu app, como agregarlos, quitarlos o reemplazarlos, as&#xED; como trabajar con la pila de actividades. Aunque en el punto siguiente se va a explicar la biblioteca <strong>Jetpack Navigation</strong> que facilita el trabaja, es importante conocer algo sobre esta clase.</p>
<p>Para acceder a FragmentManager con Kotlin, lo haremos a trabes de <strong><code>supportFragmentManager</code></strong>. FragmentManager agrupa los cambios realizados en lo que se llaman <strong>transacciones</strong> tratadas con la clase <strong><code>FragmentTransaction</code></strong>. Por lo que es com&#xFA;n que se agrupen varias acciones en una sola transacci&#xF3;n (agregar o reemplazar varios fragmentos en una sola transacci&#xF3;n). Por ejemplo: <em>esta agrupaci&#xF3;n puede ser &#xFA;til cuando tiene varios fragmentos de hermanos mostrados en la misma pantalla, como con vistas divididas</em>.<br>
Para obtener una instancia de FragmentTransaction utilizamos <strong><code>beginTransaction</code></strong></p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">val</span> fragmentTransaction <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>Una instancia de <strong>FragmentTransaccion</strong> permite realizar varias operaciones como agregar, reemplazar, eliminar  u ocultar fragmentos. Algunos de sus m&#xE9;todos principales son:</p>
<ul>
<li><strong><code>add()</code></strong> recibe el ID del contenedor  del fragmento (debe ser de tipo <strong><code>FragmentContainerView</code></strong>) y el fragmento que desea agregar. El fragmento agregado se traslada al  estado de RESUMED a espera del pr&#xF3;ximo commit.</li>
<li><strong><code>remove()</code></strong> permite eliminar un fragmento que se debe recuperar del administrador de fragmentos a trav&#xE9;s de <strong><code>findFragmentById() o findFragmentByTag()</code></strong>. Si la vista del fragmento se agreg&#xF3; previamente a un contenedor, se eliminar&#xE1; tras la llamada a este m&#xE9;todo. El fragmento eliminado se traslada al estad0 de DESTROYED.</li>
<li><strong><code>replace()</code></strong> reemplaza un fragmento existente en un contenedor con una instancia de uno nuevo que se proporcione como argumento. Es equivalente a llamar remove y add en un mismo contenedor.</li>
<li><strong><code>show() y hide()</code></strong> son m&#xE9;todos que permiten mostrar y ocultar la vista de los fragmentos que se han agregado a un contenedor. Estos m&#xE9;todos establecen la visibilidad de las vistas del fragmento sin afectar el ciclo de vida del fragmento.</li>
<li><strong><code>addToBackStack()</code></strong> De forma predeterminada, los cambios realizados en a FragmentTransaction no se agregan a la pila de actividades, hay que usar este m&#xE9;todo para hacerlo (se puede a&#xF1;adir un tag identificativo)</li>
<li><strong><code>commit</code></strong> programa una confirmaci&#xF3;n de las transacciones pendientes de forma as&#xED;ncrona, que se realizar&#xE1; la pr&#xF3;xima vez que ese hilo est&#xE9; listo.</li>
</ul>
<p>FragmentManager tambi&#xE9;n tiene varios m&#xE9;todos de utilidad, entre los que se encuentran:</p>
<ul>
<li>
<p><strong><code>popBackStack</code></strong> desapila fragmentos de la pila de retroceso,simulando el uso del comando Atr&#xE1;s por parte del usuario. Tambi&#xE9;n se puede seleccionar un fragment en concreto para desapilar.</p>
</li>
<li>
<p>Para obtener fragmentos que ya existen en la actividad con <strong><code>findFragmentById()</code></strong> (para fragmentos que proporcionan una IU en el dise&#xF1;o de la actividad) o <strong><code>findFragmentByTag()</code></strong> (para fragmentos con o sin IU).</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin">fT<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor<span class="token punctuation">,</span><span class="token function">Fragment2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;f2&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> f<span class="token operator">=</span>fM<span class="token punctuation">.</span><span class="token function">findFragmentByTag</span><span class="token punctuation">(</span><span class="token string">&quot;f2&quot;</span><span class="token punctuation">)</span>
</pre></li>
</ul>
<h4 class="mume-header" id="jetpack-navigation">Jetpack Navigation</h4>

<p>El componente <a href="https://developer.android.com/guide/navigation/navigation-getting-started#add-navhost">Navitacion</a> de Android Jetpack,  permite implementar la navegaci&#xF3;n de los elementos de la aplicaci&#xF3;n de forma m&#xE1;s coherente y sencilla, desde simples clics de botones hasta patrones m&#xE1;s complejos, como las barras de apps y los paneles laterales de navegaci&#xF3;n. Es importante seguir el sistema establecido de <a href="https://developer.android.com/guide/navigation/navigation-principles">principios</a>, para que el usuario pueda entender correctamente el funcionamiento de la app. Podemos encontrar tres elementos fundamentales:</p>
<ul>
<li><strong>Gr&#xE1;fico de navegaci&#xF3;n</strong>: Es un recurso XML que contiene toda la informaci&#xF3;n relacionada con la navegaci&#xF3;n.</li>
<li><strong>NavHost</strong>: Es un contenedor vac&#xED;o que muestra los destinos de tu gr&#xE1;fico de navegaci&#xF3;n. Por defecto est&#xE1; implementado el <strong><code>NavHostFragment</code></strong> para fragments y que ser&#xE1; el que usemos.</li>
<li><strong>NavController</strong>: Es el objeto que administra la navegaci&#xF3;n de la app dentro de un NavHost.</li>
</ul>
<blockquote>
<p>&#x270B;Ser&#xE1; importante decidir como queremos pasar de unos fragments a otros, <strong>porque lo que no se debe hacer es mezclar el sistema de Navigation con el que usamos con FragmentManager</strong>.</p>
</blockquote>
<h5 class="mume-header" id="navhost">NavHost</h5>

<p>Para comenzar lo primero que debemos hacer es crear el <strong><code>NavHost</code></strong>, para ello usaremos el contenedor donde vamos a insertar los fragments. Este elemento debe ser de tipo <strong><code>FragmentContainerView</code></strong> y habr&#xE1; que a&#xF1;adir los siguientes atributos:</p>
<pre data-role="codeBlock" data-info="xml{highlight=[9-15,10,13,14]}" class="language-xml" data-line="9-15,10,13,14"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/tools<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.MainActivity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.fragment.app.FragmentContainerView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>androidx.navigation.fragment.NavHostFragment<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>defaultNavHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">app:</span>navGraph</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@navigation/navegacion_fragments<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/contenedor<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
<div class="line-highlight-wrapper">







<div aria-hidden="true" class="line-highlight" data-range="9-15" data-start="9" data-end="15">






</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10" data-start="10">
</div></div><div class="line-highlight-wrapper">











<div aria-hidden="true" class="line-highlight" data-range="13" data-start="13">
</div></div><div class="line-highlight-wrapper">












<div aria-hidden="true" class="line-highlight" data-range="14" data-start="14">
</div></div></pre><blockquote>
<p>&#x1F4CC; En la actividad principal, por ejemplo, podemos crear el espacio para insertar los fragmentes, en este caso desde <strong>L&#xEC;nea 9 a 15</strong>. Los atributos nuevos y que se tienen que poner para el funcionamiento correcto son: el nombre asignado a la clase <strong>L&#xED;nea 10</strong>, se usa el <strong><code>NavHostFragment</code></strong> que ya est&#xE1; implementado; <strong>L&#xED;nea 13</strong>, el atrivuto <strong><code>defaultNavHost</code></strong> garantiza que tu <strong><code>NavHostFragment</code></strong> intercepte el bot&#xF3;n Atr&#xE1;s del sistema; En el <strong>navGraph</strong> se indica el nombre del gr&#xE1;fico de navegaci&#xF3;n. Elemento que vamos a explicar ahora <strong>L&#xED;nea 14</strong>.</p>
</blockquote>
<h5 class="mume-header" id="navgraph">NavGraph</h5>

<p>Para crear el <strong><code>NavGraph</code></strong> debemos crear un nuevo recurso de tipo navigation <em><strong>res-&gt;new-&gt;android resource file</strong></em>.</p>
<div align="center">
    <img height="200" src="./imagenes/navigation1.png">
</div>
<p>Al hacer esto se crear&#xE1; una nueva carpeta navigation con el recurso dentro de ella. El archivo <em>.xml</em> se podr&#xE1; trabajar de forma gr&#xE1;fica o mediante c&#xF3;digo, aunque en este caso es m&#xE1;s sencillo utilizar la parte visual. Podremos a&#xF1;adir los elementos por los que queremos que navegue la app y crear las acciones entre ellos, todo es muy visual y sencillo.</p>
<div align="center">
    <img height="150
    " src="./imagenes/navigation3.png">
</div>
<p>Podemos ver que en la parte del Host se ha a&#xF1;adido el elemento <strong>NavHost</strong> al crear el contenedor de fragmentos como hemos explicado anteriormente (enlazando, <em>por nombre</em>, con el recurso en la l&#xED;nea   <strong><code>app:navGraph=&quot;@navigation/navegacion_fragments&quot;</code></strong>). Si no se crea correctamente el Host no funcionar&#xE1;n las acciones.<br>
Para a&#xF1;adir <strong>elementos</strong> pulsaremos el s&#xED;mbolo de <strong><code>+</code></strong> y seleccionaremos de la lista de elementos navegables que tengamos en la app.</p>
<div align="center">
    <img height="200
    " src="./imagenes/navigation4.png">
</div>
<p>Una vez agregados los elementos, podemos a&#xF1;adir las <strong>acciones</strong> entre ellos. Simplemente seleccionando elemento e indicando, de entre los elementos a&#xF1;adidos en el gr&#xE1;fico,  el destino donde nos llevar&#xE1; esa acci&#xF3;n, el id de la acci&#xF3;n se crea autom&#xE1;ticamente y se usar&#xE1; posteriormente en el c&#xF3;digo.</p>
<div align="center">
    <img height="100
    " src="./imagenes/navigation5.png">
</div>
<p>Hay un tipo de <strong>acciones globales</strong> que permiten llegar a un destino desde cualquier lugar. Se muestran como una <strong><code>-&gt;</code></strong> corta enlazada solamente por el destino, y que se crean mediante el men&#xFA; contextual del destino seleccionado.</p>
<div align="center">
    <img height="200
    " src="./imagenes/navigation6.png">
</div>
<h5 class="mume-header" id="navcontroller">NavController</h5>

<p>Este elemento ya lo usaremos de forma program&#xE1;tica y es el que nos permite ejecutar las acciones que hemos creado con el <strong><code>NavGraph</code></strong>. Cada <strong><code>NavHost</code></strong> tiene su propio <a href="https://developer.android.com/guide/navigation/navigation-navigate">NavController</a> correspondiente. Como se explica en la documentaci&#xF3;n oficial, hay varias formas de hacerlo. Por ejemplo <strong>desde un fragmento</strong> podemos hacerlo de la siguiente manera:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">val</span> navHostFragment<span class="token operator">=</span> NavHostFragment<span class="token punctuation">.</span><span class="token function">findNavController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>navHostFragment<span class="token punctuation">.</span>currentDestination<span class="token operator">?</span><span class="token punctuation">.</span>id <span class="token operator">==</span> R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment1<span class="token punctuation">)</span>
            navHostFragment<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>action_fragment1_to_fragment2<span class="token punctuation">)</span>
</pre><p>NavController tambi&#xE9;n permite <a href="https://developer.android.com/guide/navigation/navigation-pass-data#bundle">pasar datos entre fragment mediante bundle</a>, el proceso es similar al usado en otras explicaciones.</p>
<blockquote>
<p>&#x1F4CC; Primero usamos una de las maneras existentes para referenciar al <strong><code>NavController</code></strong>  usando el <strong><code>NavHostFragment</code></strong> que tenemos por defecto. Antes de navegar a una acci&#xF3;n, es interesante comprobar si estamos en el fragmento que tiene creada esa acci&#xF3;n, de esta forma evitaremos excepciones.Y por &#xFA;ltimo, navegaremos al fragmento deseado usando el <strong><code>id</code></strong> de la acci&#xF3;n registrada con anterioridad. <em>L&#xF3;gicamente, este c&#xF3;digo lo tendremos que a&#xF1;adir al bot&#xF3;n u otro elemento que queramos que ejecute la navegaci&#xF3;n</em>.</p>
</blockquote>
<blockquote>
<p>&#x1F393; Vamos a mostrar el c&#xF3;digo de una actividad con tres fragmentos de forma que: del primero se pueda navegar al segundo, del segundo al tercero y del tercero al primero siempre que se pulse el <strong>bot&#xF3;n aceptar</strong>, mientras que si se pulsa el <strong>bot&#xF3;n cancelar</strong> se navegar&#xE1; siempre al primero (la navegaci&#xF3;n al primero se realizar&#xE1; con una acci&#xF3;n global). Para ello se tendr&#xE1;n que construir los <em>.xml</em> de los Fragments, todos ser&#xE1;n iguales, cambiando el color y el texto.<br>
C&#xF3;digo <strong>fragment1.xml</strong> con dos botones <em>cancelar y aceptar</em>:</p>
<pre data-role="codeBlock" data-info="xml" class="language-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/&gt;res/android<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#2196F3<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20dp<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Fragment1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButton</span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/aceptar<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#2196F3<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Aceptar<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.button.MaterialButton</span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>layout_weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.5<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>backgroundTint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#2196F3<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Cancelar<span class="token punctuation">&quot;</span></span>
           <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/cancelar<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</pre><p>El <em>.xml</em> de la actividad principal ser&#xE1; como el que hemos puesto al principio de la explicaci&#xF3;n de <strong><code>Navigation</code></strong>. Mientras que <strong>MainActivity.kt</strong> tendr&#xE1; el siguiente c&#xF3;digo:</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[6,11,12]}" class="language-kotlin" data-line="6,11,12"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">lateinit</span> <span class="token keyword">var</span> navHostFragment<span class="token operator">:</span>NavHostFragment
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
       <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
       navHostFragment <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span>
          <span class="token function">findFragmentById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>contenedor<span class="token punctuation">)</span> <span class="token keyword">as</span> NavHostFragment
   <span class="token punctuation">}</span>
    <span class="token keyword">fun</span> <span class="token function">cancelar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">val</span> navController <span class="token operator">=</span> navHostFragment<span class="token punctuation">.</span>navController
        navController<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>action_global_fragment1<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">




<div aria-hidden="true" class="line-highlight" data-range="6" data-start="6">
</div></div><div class="line-highlight-wrapper">









<div aria-hidden="true" class="line-highlight" data-range="11" data-start="11">
</div></div><div class="line-highlight-wrapper">










<div aria-hidden="true" class="line-highlight" data-range="12" data-start="12">
</div></div></pre><p>&#x1F4CC; Se ha creado un m&#xE9;todo <strong>cancelar</strong> que permite ejecutar la acci&#xF3;n global, se ha hecho de esta forma para no repetir c&#xF3;digo en los fragments y de paso conocer como se ejecuta una acci&#xF3;n desde la main. <strong>L&#xED;nea 6</strong>, creamos la instancia del <strong><code>NavHostFragment</code></strong>. <strong>L&#xED;nea 11 y 12</strong> instanciamos el <strong><code>NavController</code></strong> y ejecutamos la acci&#xF3;n global de navegaci&#xF3;n al Fragment1.</p>
<p>El <strong>Fragment1.kt</strong> y por ende, el resto de Fragments. Con el bot&#xF3;n <strong>aceptar</strong> que realizar&#xE1; la acci&#xF3;n de moverse al siguiente fragment (en Fragment3 ser&#xE1; la global de moverse al fragment1) y el bot&#xF3;n <strong>cancelar</strong> que lanzar&#xE1; la acci&#xF3;n global.</p>
<pre data-role="codeBlock" data-info="kotlin{highlight=[8,10]}" class="language-kotlin" data-line="8,10"><span class="token keyword">class</span> Fragment1<span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
       inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
       container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
       savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
   <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{</span>
       <span class="token keyword">val</span> view<span class="token operator">=</span>inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>fragment1<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
       view<span class="token punctuation">.</span><span class="token function">findViewByIdMaterialButton</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>aceptar<span class="token punctuation">)</span><span class="token punctuation">.</span>
                setOnClickListener <span class="token punctuation">{</span> <span class="token function">aceptar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
       view<span class="token punctuation">.</span><span class="token function">findViewByIdMaterialButton</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>cancelar<span class="token punctuation">)</span><span class="token punctuation">.</span>
                setOnClickListener<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> MainActivity<span class="token punctuation">)</span>
                                    <span class="token punctuation">.</span><span class="token function">cancelar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
       <span class="token keyword">return</span> view
   <span class="token punctuation">}</span>
   <span class="token keyword">fun</span> <span class="token function">aceptar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
       <span class="token keyword">val</span> navHostFragment<span class="token operator">=</span> NavHostFragment<span class="token punctuation">.</span><span class="token function">findNavController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>navHostFragment<span class="token punctuation">.</span>currentDestination<span class="token operator">?</span><span class="token punctuation">.</span>id <span class="token operator">==</span> R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragment1<span class="token punctuation">)</span>
           navHostFragment<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>action_fragment1_to_fragment2<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<div class="line-highlight-wrapper">






<div aria-hidden="true" class="line-highlight" data-range="8" data-start="8">
</div></div><div class="line-highlight-wrapper">








<div aria-hidden="true" class="line-highlight" data-range="10" data-start="10">
</div></div></pre><p>&#x1F4CC; <strong>L&#xED;nea 9</strong> acci&#xF3;n del bot&#xF3;n aceptar que llama al m&#xE9;todo aceptar que ejecuta la acci&#xF3;n de navegaci&#xF3;n. <strong>L&#xED;nea 10</strong> acci&#xF3;n del bot&#xF3;n cancelar que llamar&#xE1; al m&#xE9;todo cancelar de MainActivity, realizando un casteo del contexto.</p>
</blockquote>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F; A partir del  c&#xF3;digo expuesto en el ejemplo anterior, crea el ejercicio completo. Recuerda que debes crear las acciones de navegaci&#xF3;n creando un  recurso de tipo navigation.</span></p>
<h3 class="mume-header" id="dialogfragment">DialogFragment</h3>

<p>Como hemos visto al principio del tema, la clase Fragment tiene varias clases hijas que nos permiten realizar tareas concretas, una de ellas es la clase <a href="https://developer.android.com/guide/topics/ui/dialogs">DialogFragment</a>. Al heredar de ella podremos crear distintos tipos de di&#xE1;logos y es la manera aconsejada para hacerlo. Como hemos dicho, para utilizar este tipo de di&#xE1;logos deberemos crearnos una clase derivada de DialogFragment e implementar en ella el tipo de dialogo que queramos (como esta parte ya la conocemos de temas anteriores, solo vamos a comentar un par de AlertDialog diferentes). Como en este caso los di&#xE1;logos est&#xE1;n implementados con fragments para mostrarlos necesitaremos usar un <strong><code>FragmentManager</code></strong>, no la t&#xED;pica llamada al m&#xE9;todo show. Vamos a pasar a ver un ejemplo:</p>
<h5 class="mume-header" id="di%C3%A1logo-de-alerta">Di&#xE1;logo de Alerta</h5>

<p>Este tipo de di&#xE1;logo se limita a mostrar un mensaje sencillo al usuario, y un &#xFA;nico bot&#xF3;n de OK para confirmar su lectura. Veamos un ejemplo:</p>
<div align="center">
    <img height="100
    " src="./imagenes/dialogfragment1.png">
</div>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> DialogoAlerta<span class="token operator">:</span><span class="token function">DialogFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Dialog <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token keyword">val</span> builder<span class="token operator">=</span><span class="token function">MaterialAlertDialogBuilder</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        builder<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Esto es un mensaje de alerta&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;INFORMACI&#xD3;N DE ALERTA&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string">&quot;Avisado&quot;</span><span class="token punctuation">,</span>
                DialogInterface<span class="token punctuation">.</span><span class="token function">OnClickListener</span><span class="token punctuation">{</span>dialogo<span class="token punctuation">,</span>id<span class="token operator">-&gt;</span>dialogo<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><blockquote>
<p>&#x1F4CC;Como se puede ver en el c&#xF3;digo, la forma de crear el dialogo es igual que la vista en el bloque6, pero al introducirlo en un fragment lo hacemos m&#xE1;s reutilizable.</p>
</blockquote>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin">     <span class="token keyword">val</span> dialogoAlerta<span class="token operator">=</span><span class="token function">DialogoAlerta</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        dialogoAlerta<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>supportFragmentManager<span class="token punctuation">,</span><span class="token string">&quot;DialogoAlerta&quot;</span><span class="token punctuation">)</span>
</pre><blockquote>
<p>&#x1F4CC;Para lanzar este di&#xE1;logo, por ejemplo, desde nuestra actividad principal, creamos un objeto de tipo DialogoAlerta y lo mostramos medi&#xE1;nte el m&#xE9;todo show(), pasando una referencia al Fragment Manager mediante una llamada a la propiedad <strong><code>supportFragmentManager</code></strong>, y una etiqueta identificativa del di&#xE1;logo.Este segundo argumento, debe ser un nombre de etiqueta &#xFA;nico y que el sistema usar&#xE1; para guardar y restaurar el estado del fragmento cuando sea necesario. La etiqueta tambi&#xE9;n permite obtener un controlador para el fragmento llamando a <strong><code>findFragmentByTag()</code></strong>.</p>
</blockquote>
<p>Si por alg&#xFA;n motivo se necesita pasar informaci&#xF3;n al dialogo, podremos crear un constructor al que le llegue la informaci&#xF3;n mediante Bundle o de otro modo.En el siguiente c&#xF3;digo se puede ver un posible caso:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> <span class="token function">DialogoAlerta</span><span class="token punctuation">(</span>bundle<span class="token operator">:</span> Bundle<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">DialogFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> bundle<span class="token operator">:</span> Bundle
    <span class="token keyword">init</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>bundle<span class="token operator">=</span>bundle
    <span class="token punctuation">}</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Dialog <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token keyword">val</span> builder<span class="token operator">=</span><span class="token function">MaterialAlertDialogBuilder</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        builder<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;DATO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;INFORMACI&#xD3;N&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setPositiveButton</span><span class="token punctuation">(</span><span class="token string">&quot;Acceptar&quot;</span><span class="token punctuation">,</span>
                DialogInterface<span class="token punctuation">.</span><span class="token function">OnClickListener</span><span class="token punctuation">{</span>dialogo<span class="token punctuation">,</span>id<span class="token operator">-&gt;</span>dialogo<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Y en la creaci&#xF3;n del dialog fragment:</p>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"> <span class="token keyword">val</span> bundle<span class="token operator">=</span><span class="token function">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">&quot;DATO&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;AVISO DE PROXIMA CONSULTA M&#xC9;DICA&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> dialogoAlerta<span class="token operator">=</span><span class="token function">DialogoAlerta</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span>
        dialogoAlerta<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>supportFragmentManager<span class="token punctuation">,</span><span class="token string">&quot;DialogoAlerta&quot;</span><span class="token punctuation">)</span>
</pre><h5 class="mume-header" id="di%C3%A1logo-de-selecci%C3%B3n-m%C3%BAltiple">Di&#xE1;logo de Selecci&#xF3;n M&#xFA;ltiple</h5>

<p>Este tipo de dialogo nos permite implementar una selecci&#xF3;n m&#xFA;ltiple, como podemos ver en la siguiente imagen:</p>
<div align="center">
    <img height="150" src="./imagenes/DialogFragment2.png">
</div>
<pre data-role="codeBlock" data-info="kotlin" class="language-kotlin"><span class="token keyword">class</span> DialogoSeleccionMultiple<span class="token operator">:</span><span class="token function">DialogFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> Dialog <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreateDialog</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token keyword">val</span> builder<span class="token operator">=</span> <span class="token function">MaterialAlertDialogBuilder</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> datos<span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token string">&quot;Chino&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Espa&#xF1;o&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Frances&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Ingl&#xE9;s&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Turco&quot;</span><span class="token punctuation">)</span>
        builder<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;Seleccione idioma&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setMultiChoiceItems</span><span class="token punctuation">(</span>datos<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span> 
            DialogInterface<span class="token punctuation">.</span><span class="token function">OnMultiChoiceClickListener</span><span class="token punctuation">{</span>dialogo<span class="token punctuation">,</span>item<span class="token punctuation">,</span>isChecked<span class="token operator">-&gt;</span>
                Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;Se ha seleccionado &quot;</span>
                <span class="token operator">+</span>datos<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Cada vez que se selecciona un elemento de la lista se ejecutar&#xE1; el escuchador <strong><code>OnMultiChoiceClickListener</code></strong>, llegando a este el item pulsado y si esta <em>checked</em> o <em>unchecked</em>.</p>
<p><span style="color: DarkRed; font-weight: bold;">&#x2712;&#xFE0F;Ejercicio PropuestoDialogoPersonalizado</span></p>
<h3 class="mume-header" id="dialogfragment-1">DialogFragment</h3>


      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>